;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;
;  Terminal MTUTOR interface
;
;   Hex            
; Address  Label   
;                  
;   0040   R.INIT  
;   0043   R.DOT   
;   0046   R.LINE  
;   0049   R.CHARS 
;   004C   R.BLOCK 
;   004F   R.INPX  
;   0052   R.INPY  
;   0055   R.OUTX  
;   0058   R.OUTY  
;   005B   R.XMIT  
;   005E   R.MODE  
;   0061   R.STEPX 
;   0064   R.STEPY 
;   0067   R.WE    
;   006A   R.DIR   
;   006D   R.INPUT 
;   0070   R.SSF   
;   0073   R.CCR   
;   0076   R.EXTOUT
;   0079   R.EXEC  
;   007C   R.GJOB  
;   007F   R.XJOB  
;   0082   R.RETURN
;   0085   R.CHRCV
;   0088   R.ALARM
;   008B   R.PRINT
;
;;
;
;   Hex                                                    
; Address  Label       Description                         
;                                                          
;   22E5   M.LDFILE    Controlware load file number        
;   22E6   M.SBTYPE    Terminal Subtype                    
;   22E7   M.CONFIG    Terminal Configuration              
;   22E8   M.M0        Location of M0 character set        
;   22EA   M.VERS      Controlware version                 
;   22EB   M.TYPE      Terminal Type                       
;   22EC   M.CLOCK     Real-time Clock                     
;   22EE   M.EXTPA     Interrupt Processor Address         
;   22F0   M.MARGIN    Margin used for Carriage Returns    
;   22F2   M.JOBS      Job Stack Count                     
;   22F4   M.CCR       Character Plotting Parameters       
;   22F6   M.MODE      Current Terminal Operating Mode     
;   22F8   M.DIR       Direction of Coordinate Step        
;   22FA   M.KSW       Device Input Director               
;   22FC   M.ENAB      Internal Interrupt Mask             
;   22FE   unused                                          
;   2300   MOD5A       Mode 5 Entry Address                
;   2302   MOD6A       Mode 6 Entry Address                
;   2304   MOD7A       Mode 7 Entry Address                
;   2306   M2          Character Set M2 First Word Address 
;   2308   M3          Character Set M3 First Word Address
;   230A   M4          Character Set M4 First Word Address
;   230C   M5          Character Set M5 First Word Address
;   230E   M6          Character Set M6 First Word Address
;   2310   M7          Character Set M7 First Word Address
;   2314   M.HALT      Turns off user program             
;   2316   M.STATUS    Status of usert program            
;
;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;
;	mtutor unit contents
;
 The following collected by David Sides/Dale Sinder during the PCD2 project at Duosoft 1984

  0: finis    terminate execution -- finish lesson or cont.
  1: write    8/twrit=  16/addr  16/chars
              [embed: 8/temb1=  8/temb2=]
  2: calc     8/tcalc=  n*gvar(var)
  3: at       8/tat=  n*gvar(x)  n*gvar(y)
  4: branch   8/tbran=  16/branch-address
  5: branch   8/5  16/add-branch-table  8/max-pos-value
              n*gvar(expression)
  6: erase    8/terase=  n*gvar(chars)
  7: mode     8/tmode=  8/type
 10: draw     8/tdraw=  8/pts  n*gvar(x1)  n*gvar(y1) ...
 11: showa    8/tshoa=  n*gvar(var)  n*gvar(length)
 12: show     8/tshow=  n*gvar(expression)
 13: pause    8/tpaus=  n*gvar(<0->blank, >=0->time)
 14: do       8/tdo=  8/unit
 15: do       8/15  16/addr-unit-table  8/max-pos-value
              n*gvar(expression)
 16: calcs    8/tcalcs=  16/add-ptr-table  8/max-pos-value
              n*gvar(expression)  n*gvar(variable)
 17: return   no tag
 20: embed1
 21: embed2
 22: writec   8/twritec=  16/table-addr  8/max-value
              n*gvar(expression)
 23: writec
 24: *UNUSED*
 25: *UNUSED*
 26: *UNUSED*
 27: *UNUSED*
 30: mode     8/tmodec=  16/tabaddr  8/maxval  n*gvar(expr)
 31: goto     8/tgoto=  8/unum
 32: goto     8/32  16/addr-unit-table  8/max-pos-value
              n*gvar(expression)
 33: ccode    8/ccode=  n*gvar(addr)  n*gvar(variable)
 34: jumpn    8/34  8/unit-num
 35: jumpn    8/35  16/addr-unit-table  8/max-pos-value
              n*gvar(expression)
 36: beep     8/beep=
 37: doto     8/tidoto=  [ doto setup ]
 40: doto     8/40  16/xstor-table-addr  16/end-label-addr
 41: doto     8/41  [ floating doto? ]
 42: doto     8/42  [ floating doto? ]
 43: block    8/tblck=  n*gvar(from)  n*gvar(to)
              n*gvar(length)
 44: atnm     8/tatnm=  n*gvar(x)  n*gvar(y)
 45: atnm     8/tatnmc=  n*gvar(coarse)
 46: funkey   8/tfunk=  8/option  8/unum
 47: write
 50: at       8/tatc=  n*gvar(coarse)
 51: erase    8/teras2=  n*gvar(chars)  n*gvar(lines)
 52: erase    8/terasf=  
 53: draw     8/tdrawc=  8/pts  n*gvar(x1)  n*gvar(y1)  ...
 54: draw     8/tdrawl=  8/pts  n*gvar(x1)  n*gvar(y1)  ...
 55: xov
 56: enable
 57: rama
 60: ramb
 61: noargs   no tag
 62: base     8/62
 63: jump     8/63  8/unit-num
 64: jump     8/64  16/addr-unit-table  8/max-pos-value
              n*gvar(expression)
 65: *UNUSED*
 66: rotate   8/trot=  8/cnum (0=blank, 1=vertical)
 67: size     8/tsize=  8/cnum (0=blank, 1=bold)
 70: calcc    8/70  16/addr-ptr-table  8/max-pos-value
              n*gvar(expression)
 71: *UNUSED*
 72: tpause   8/tpaus2=  n*gvar(<0->blank, >=0->time)
              16/addr-of-bit-table 8/length-of-table
 73: inhibit  8/73  16/value to $or$ to bit matp
 74: force
 75: lvars    16/number-of-lvars-bytes
 76: *UNUSED*
 77: noargs   no tag
100: return   no tag
101: *UNUSED*
102: *UNUSED*
103: getkey
104: clrkey
105: specs
106: allow

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;
; from tutor file mcond2a

;terminal *getvar* code format -         
                                        
;00b = short literal       8/00, 8/value 
;01b = long  literal       8/01, 16/value
;02b = short 8-bit var     8/02, 8/addr  
;03b = long  8-bit var     8/03, 16/addr 
;04b = short 16-bit var    8/04, 8/addr  
;05b = long  16-bit var    8/05, 16/addr 
;06b = short expression    8/06, 8/addr  
;07b = long  expression    8/07, 16/addr 
;10b = short 8 v addr      8/10, 8/addr           
;11b = long  8 v addr      8/11, 16/addr          
;12b = short 16 v addr     8/12, 8/addr           
;13b = long  16 v addr     8/13, 16/addr          
;14b = reserved word       8/14, 8/reserved wd num
;15b = end-of-expression                         
;16b = add                                       
;17b = subtract                                  
;20b = unary minus                               
;21b = multiply                                  
;22b = divide  (round)                           
;23b = divide  (truncate)                        
;24b = assignment to  8 bit variable             
;25b = assignment to 16 bit variable             
;26b = index into  8 bit array - return value    
;27b = index into 16 bit array - return value    
;30b = index into  8 bit array - return address  
;31b = index into 16 bit array - return address  
;32b = mask                                      
;33b = union                                     
;34b = logical difference                        
;35b = circular   left  shift                    
;36b = arithmetic right shift                    
;37b = ones complement                           
;40b = absolute value                            
;41b = pop stack                                 
;42b = floating literal        8/42, 16/exp, 32/m
;43b = floating 48-bit var     8/43, 16/addr     
;44b = floating 48-bit v addr  8/44, 16/addr     
;45b = floating add                              
;46b = floating subtract                         
;47b = floating unary minus                      
;50b = floating multiply                         
;51b = floating divide                           
;52b = floating assign 48-bit var                
;53b = floating index into 48-bit array (value)  
;54b = floating index into 48-bit array (address)
;55b = floating absolute value                   
;56b = floating pop stack                        
;57b = integer to floating                       
;60b = floating to integer                     
;61b = floating log base 10                    
;62b = floating anti-log base 10               
;63b = floating sin                            
;64b = floating cos                            
;65b = floating to integer truncated           
;66b = floating end-of-line                    
;67b = .eq.                                    
;70b = .ne.                                    
;71b = .lt.                                    
;72b = .ge.                                    
;73b = .gt.                                    
;74b = .le.                                    
;75b = floating .eq.                           
;76b = floating .ne.                           
;77b = floating .lt.                           
;100b = floating .ge.                          
;101b = floating .gt.                          
;102b = floating .le.                          
;103b = absolute address of variable           
;104b = exponentiation                         
;105b = floating e**x                          
;106b = floating natural log                   
;107b = integer    part of floating value      
;110b = fractional part of floating value      
;111b = short 8-bit local var    8/111, 8/addr 
;112b = long 8-bit local var     8/112, 16/addr
;113b = short 16-bit local var   8/113, 8/addr 
;114b = long 16-bit local var    8/114, 16/addr
;115b = short 8-bit local v addr 8/115, 8/addr 
;116b = long 8-bit local v addr  8/116, 16/addr
;117b = short 16-bit local v add 8/117, 8/addr 
;120b = long 16-bit local v addr 8/120, 16/addr
;121b = f 48-bit local var       8/121, 16/addr
;122b = f 48-bit local var addr  8/122, 16/addr
                                              
;130b = begin-of-line                          
;131b = left  paren                            
;132b = right paren                            
;133b = equivalence                            
;134b = double quote                           
;135b = logical operator                       
;136b = integer part                           
;137b = degree sign                            
;140b = logical and                            
;141b = logical or                             


;reserved word codes - 
;                      
;0  = *zkey*           
;1  = *zwherex*        
;2  = *zwherey*        
;3  = *zdata*          
;4  = *zreturn*        
;5  = *zrouten*        
;6  = *zjcount*        
;7  = *ztrap*          
;8  = *zjudged*        
;9  = *zspell*         
;10 = *zextra*         
;11 = *zorder*         
;12 = *zentire*        
;13 = *zwcount*        
;14 = *zcomm*          
;15 = *zttype*         
;16 = *zanscnt*        
;17 = *zntries*        
;18 = *zscore*         
;19 = *zldone*         
;20 = *zmode*          
;21 = *zrecs*          
;22 = *zopcnt*         
;23 = *zcaps*          
;24 = *ztstype*        
;25 = ??
;26 = *zclock*
;
;
;                                  
; floating point format -           
;                                   
; ist  01 bits = mantissa sign      
; next 15      = biased exponent    
; next 32      = unsigned maintissa 
                                   


;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
; Disassembly of the file "E:\mTUTOR\l4\ppttut-pcheck.bin"
; 
; CPU Type: Z80
; 
; Created with dZ80 2.0
; 
; on Thursday, 30 of November 2017 at 04:12 PM
; 

; pcheck
2b40 0e84      ld      c,84h
2b42 21e47b    ld      hl,7be4h
2b45 111104    ld      de,0411h
2b48 0600      ld      b,00h
2b4a 70        ld      (hl),b
2b4b 23        inc     hl
2b4c 1b        dec     de
2b4d 7a        ld      a,d
2b4e b3        or      e
2b4f 20f9      jr      nz,2b4ah         ; (-07h)
2b51 3e3f      ld      a,3fh
2b53 32057d    ld      (7d05h),a
2b56 32077d    ld      (7d07h),a
2b59 21ffff    ld      hl,0ffffh
2b5c 220f7f    ld      (7f0fh),hl
2b5f 212a00    ld      hl,002ah
2b62 221623    ld      (2316h),hl
2b65 210000    ld      hl,0000h
2b68 221423    ld      (2314h),hl
2b6b 39        add     hl,sp
2b6c 22457d    ld      (7d45h),hl
2b6f cd802b    call    2b80h
2b72 2805      jr      z,2b79h          ; (+05h)
2b74 21ec00    ld      hl,00ech
2b77 1803      jr      2b7ch            ; (+03h)
2b79 21eb00    ld      hl,00ebh
2b7c cd5b00    call    005bh
2b7f c9        ret     

; vcheck
2b80 2e01      ld      l,01h
2b82 3a0953    ld      a,(5309h)
2b85 95        sub     l
2b86 c0        ret     nz

2b87 210053    ld      hl,5300h
2b8a 11c17b    ld      de,7bc1h
2b8d 7b        ld      a,e
2b8e 95        sub     l
2b8f 5f        ld      e,a
2b90 7a        ld      a,d
2b91 9c        sbc     a,h
2b92 57        ld      d,a
2b93 0600      ld      b,00h
2b95 78        ld      a,b
2b96 07        rlca    
2b97 ae        xor     (hl)
2b98 47        ld      b,a
2b99 23        inc     hl
2b9a 1b        dec     de
2b9b 7a        ld      a,d
2b9c b3        or      e
2b9d 20f6      jr      nz,2b95h         ; (-0ah)
2b9f 78        ld      a,b
2ba0 b9        cp      c
2ba1 c9        ret     

2ba2 00        nop     
2ba3 00        nop     
2ba4 00        nop     
2ba5 00        nop     
; Disassembly of the file "E:\mTUTOR\l4\ppttut-iload.bin"
; 
; CPU Type: Z80
; 
; Created with dZ80 2.0
; 
; on Thursday, 30 of November 2017 at 06:12 PM
; 
2ba5 cdc52b    call    2bc5h
2ba8 2805      jr      z,2bafh          ; (+05h)
2baa cdc52b    call    2bc5h
2bad 200e      jr      nz,2bbdh         ; (+0eh)
2baf 3a412b    ld      a,(2b41h)
2bb2 4f        ld      c,a
2bb3 cd802b    call    2b80h
2bb6 2005      jr      nz,2bbdh         ; (+05h)
2bb8 21eb00    ld      hl,00ebh
2bbb 1803      jr      2bc0h            ; (+03h)
2bbd 21ec00    ld      hl,00ech
2bc0 cd5b00    call    005bh
2bc3 c9        ret     

2bc4 cdb02c    call    2cb0h
2bc7 e607      and     07h
2bc9 fe02      cp      02h
2bcb c2a42d    jp      nz,2da4h
2bce 3e40      ld      a,40h
2bd0 325f7c    ld      (7c5fh),a
2bd3 cd992c    call    2c99h
2bd6 c0        ret     nz

2bd7 af        xor     a
2bd8 32457c    ld      (7c45h),a
2bdb 3e02      ld      a,02h
2bdd 32467c    ld      (7c46h),a
2be0 3e29      ld      a,29h
2be2 32477c    ld      (7c47h),a
2be5 3e52      ld      a,52h
2be7 324a7c    ld      (7c4ah),a
2bea 210053    ld      hl,5300h
2bed 22487c    ld      (7c48h),hl
2bf0 cdf52b    call    2bf5h
2bf3 c9        ret     

2bf4 af        xor     a
2bf5 324e7c    ld      (7c4eh),a
2bf8 af        xor     a
2bf9 324c7c    ld      (7c4ch),a
2bfc 3a4a7c    ld      a,(7c4ah)
2bff fe35      cp      35h
2c01 fa072c    jp      m,2c07h
2c04 3e34      ld      a,34h
2c06 324c7d    ld      (7d4ch),a
2c09 3e00      ld      a,00h
2c0b cd4d2d    call    2d4dh
2c0e 2871      jr      z,2c81h          ; (+71h)
2c10 213c00    ld      hl,003ch
2c13 cd9c2d    call    2d9ch
2c16 cdfe2c    call    2cfeh
2c19 3e4a      ld      a,4ah
2c1b 21b80b    ld      hl,0bb8h
2c1e cd712d    call    2d71h
2c21 205e      jr      nz,2c81h         ; (+5eh)
2c23 cd932d    call    2d93h
2c26 3a4c7d    ld      a,(7d4ch)
2c29 47        ld      b,a
2c2a af        xor     a
2c2b 324b7d    ld      (7d4bh),a
2c2e 2a487c    ld      hl,(7c48h)
2c31 eb        ex      de,hl
2c32 210000    ld      hl,0000h
2c35 0e80      ld      c,80h
2c37 dbae      in      a,(0aeh)
2c39 12        ld      (de),a
2c3a 13        inc     de
2c3b cd442d    call    2d44h
2c3e 0d        dec     c
2c3f 20f6      jr      nz,2c37h         ; (-0ah)
2c41 dbae      in      a,(0aeh)
2c43 bd        cp      l
2c44 c46b2d    call    nz,2d6bh
2c47 dbae      in      a,(0aeh)
2c49 bc        cp      h
2c4a c46b2d    call    nz,2d6bh
2c4d 05        dec     b
2c4e 20e2      jr      nz,2c32h         ; (-1eh)
2c50 3a4b7d    ld      a,(7d4bh)
2c53 a7        and     a
2c54 2026      jr      nz,2c7ch         ; (+26h)
2c56 eb        ex      de,hl
2c57 22487c    ld      (7c48h),hl
2c5a 3e50      ld      a,50h
2c5c 213c00    ld      hl,003ch
2c5f cd712d    call    2d71h
2c62 c2a42d    jp      nz,2da4h
2c65 3a4c7d    ld      a,(7d4ch)
2c68 47        ld      b,a
2c69 3a4a7c    ld      a,(7c4ah)
2c6c 90        sub     b
2c6d caa92d    jp      z,2da9h
2c70 faa92d    jp      m,2da9h
2c73 324a7c    ld      (7c4ah),a
2c76 cde42c    call    2ce4h
2c79 c3f52b    jp      2bf5h
2c7c cda42d    call    2da4h
2c7f 1803      jr      2c84h            ; (+03h)
2c81 cda42d    call    2da4h
2c84 214e7c    ld      hl,7c4eh
2c87 7e        ld      a,(hl)
2c88 3c        inc     a
2c89 fe05      cp      05h
2c8b f2a92d    jp      p,2da9h
2c8e 77        ld      (hl),a
2c8f cd992c    call    2c99h
2c92 c2a92d    jp      nz,2da9h
2c95 c3f92b    jp      2bf9h
2c98 af        xor     a
2c99 324c7c    ld      (7c4ch),a
2c9c 3e08      ld      a,08h
2c9e cd4d2d    call    2d4dh
2ca1 3e50      ld      a,50h
2ca3 21d007    ld      hl,07d0h
2ca6 cd712d    call    2d71h
2ca9 caa92d    jp      z,2da9h
2cac c3a42d    jp      2da4h
2caf 3e04      ld      a,04h
2cb1 cd4d2d    call    2d4dh
2cb4 c8        ret     z

2cb5 0eff      ld      c,0ffh
2cb7 dbaf      in      a,(0afh)
2cb9 fe4a      cp      4ah
2cbb 2812      jr      z,2ccfh          ; (+12h)
2cbd 47        ld      b,a
2cbe e680      and     80h
2cc0 2014      jr      nz,2cd6h         ; (+14h)
2cc2 210f00    ld      hl,000fh
2cc5 cd9c2d    call    2d9ch
2cc8 0d        dec     c
2cc9 20ec      jr      nz,2cb7h         ; (-14h)
2ccb 3e00      ld      a,00h
2ccd a7        and     a
2cce c9        ret     

2ccf dbae      in      a,(0aeh)
2cd1 32447c    ld      (7c44h),a
2cd4 a7        and     a
2cd5 c9        ret     

2cd6 78        ld      a,b
2cd7 fea0      cp      0a0h
2cd9 2004      jr      nz,2cdfh         ; (+04h)
2cdb 3e08      ld      a,08h
2cdd a7        and     a
2cde c9        ret     

2cdf 3e10      ld      a,10h
2ce1 a7        and     a
2ce2 c9        ret     

2ce3 21477c    ld      hl,7c47h
2ce6 3a5f7c    ld      a,(7c5fh)
2ce9 47        ld      b,a
2cea 3a4c7d    ld      a,(7d4ch)
2ced 86        add     a,(hl)
2cee 77        ld      (hl),a
2cef 90        sub     b
2cf0 f8        ret     m

2cf1 c8        ret     z

2cf2 4f        ld      c,a
2cf3 3a467c    ld      a,(7c46h)
2cf6 3c        inc     a
2cf7 32467c    ld      (7c46h),a
2cfa 79        ld      a,c
2cfb 18f1      jr      2ceeh            ; (-0fh)
2cfd 210000    ld      hl,0000h
2d00 3a457c    ld      a,(7c45h)
2d03 d3ae      out     (0aeh),a
2d05 cd442d    call    2d44h
2d08 cd932d    call    2d93h
2d0b 3a467c    ld      a,(7c46h)
2d0e d3ae      out     (0aeh),a
2d10 cd442d    call    2d44h
2d13 cd932d    call    2d93h
2d16 3a477c    ld      a,(7c47h)
2d19 d3ae      out     (0aeh),a
2d1b cd442d    call    2d44h
2d1e cd932d    call    2d93h
2d21 3a4c7d    ld      a,(7d4ch)
2d24 d3ae      out     (0aeh),a
2d26 cd442d    call    2d44h
2d29 cd932d    call    2d93h
2d2c 3e00      ld      a,00h
2d2e d3ae      out     (0aeh),a
2d30 cd442d    call    2d44h
2d33 cd932d    call    2d93h
2d36 7d        ld      a,l
2d37 d3ae      out     (0aeh),a
2d39 cd932d    call    2d93h
2d3c cd932d    call    2d93h
2d3f 7c        ld      a,h
2d40 d3ae      out     (0aeh),a
2d42 c9        ret     

2d43 f5        push    af
2d44 ac        xor     h
2d45 07        rlca    
2d46 67        ld      h,a
2d47 f1        pop     af
2d48 ad        xor     l
2d49 0f        rrca    
2d4a 6f        ld      l,a
2d4b c9        ret     

2d4c 47        ld      b,a
2d4d 0eff      ld      c,0ffh
2d4f d3af      out     (0afh),a
2d51 211400    ld      hl,0014h
2d54 cd9c2d    call    2d9ch
2d57 dbaf      in      a,(0afh)
2d59 fe48      cp      48h
2d5b 2805      jr      z,2d62h          ; (+05h)
2d5d 0d        dec     c
2d5e 20f1      jr      nz,2d51h         ; (-0fh)
2d60 af        xor     a
2d61 c9        ret     

2d62 78        ld      a,b
2d63 2f        cpl     
2d64 d3af      out     (0afh),a
2d66 3e01      ld      a,01h
2d68 a7        and     a
2d69 c9        ret     

2d6a 3e01      ld      a,01h
2d6c 324b7d    ld      (7d4bh),a
2d6f c9        ret     

2d70 06ff      ld      b,0ffh
2d72 4f        ld      c,a
2d73 e5        push    hl
2d74 cd9c2d    call    2d9ch
2d77 e1        pop     hl
2d78 dbaf      in      a,(0afh)
2d7a b9        cp      c
2d7b ca912d    jp      z,2d91h
2d7e fe40      cp      40h
2d80 ca912d    jp      z,2d91h
2d83 a7        and     a
2d84 f8        ret     m

2d85 05        dec     b
2d86 20eb      jr      nz,2d73h         ; (-15h)
2d88 3e04      ld      a,04h
2d8a 324c7c    ld      (7c4ch),a
2d8d c3a92d    jp      2da9h
2d90 af        xor     a
2d91 c9        ret     

2d92 e5        push    hl
2d93 210100    ld      hl,0001h
2d96 cd9c2d    call    2d9ch
2d99 e1        pop     hl
2d9a c9        ret     

2d9b f5        push    af
2d9c 2b        dec     hl
2d9d 7c        ld      a,h
2d9e b5        or      l
2d9f 20fb      jr      nz,2d9ch         ; (-05h)
2da1 f1        pop     af
2da2 c9        ret     

2da3 3e01      ld      a,01h
2da5 324c7c    ld      (7c4ch),a
2da8 3a4c7c    ld      a,(7c4ch)
2dab a7        and     a
2dac c9        ret     

2dad 00        nop     
2dae 00        nop  









;;;;; space here
















   
; Disassembly of the file "E:\mTUTOR\l4\ppttut-lowcor.bin"
; 
; CPU Type: Z80
; 
; Created with dZ80 2.0
; 
; on Thursday, 30 of November 2017 at 06:19 PM
; 

; ifwa
5300 00        nop     
5301 00        nop     
5302 00        nop     
5303 00        nop     
5304 00        nop     
5305 00        nop

; f.inix     
5306 c3c157    jp      57c1h		; cboot

; v
5309 01
	 04
	 08    ld      bc,0804h
530c 04        inc     b
530d 02        ld      (bc),a
530e 03        inc     bc
530f 03        inc     bc

; ppttut
5310 c39458    jp      5894h		; z.ptut


*
*
*
*         v.reloc            relocate overlay
*         on entry - d,e = relative addr of relocation table
*                   upnt = address of first instruction of
*                          overlay
*
; v.reloc  

5313 2a987d    ld      hl,(7d98h)
5316 44        ld      b,h
5317 4d        ld      c,l
5318 19        add     hl,de
5319 5e        ld      e,(hl)
531a 23        inc     hl
531b 56        ld      d,(hl)
531c 78        ld      a,b
531d ba        cp      d
531e 2003      jr      nz,5323h         ; (+03h)
5320 79        ld      a,c
5321 bb        cp      e
5322 c8        ret     z

5323 2b        dec     hl
5324 71        ld      (hl),c
5325 23        inc     hl
5326 70        ld      (hl),b
5327 23        inc     hl
5328 e5        push    hl
5329 7a        ld      a,d
532a b3        or      e
532b 2807      jr      z,5334h          ; (+07h)
532d eb        ex      de,hl
532e cdf95d    call    5df9h		; comphl
5331 09        add     hl,bc
5332 44        ld      b,h
5333 4d        ld      c,l
5334 e1        pop     hl
5335 5e        ld      e,(hl)
5336 23        inc     hl
5337 56        ld      d,(hl)
5338 7a        ld      a,d
5339 b7        or      a
533a f8        ret     m

533b 23        inc     hl
533c e5        push    hl
533d 2a987d    ld      hl,(7d98h)
5340 19        add     hl,de
5341 5e        ld      e,(hl)
5342 23        inc     hl
5343 56        ld      d,(hl)
5344 eb        ex      de,hl
5345 09        add     hl,bc
5346 eb        ex      de,hl
5347 72        ld      (hl),d
5348 2b        dec     hl
5349 73        ld      (hl),e
534a 18e8      jr      5334h            ; (-18h)
534c 00        nop     
534d 00        nop     
; Disassembly of the file "E:\mTUTOR\l4\ppttut-config.bin"
; 
; CPU Type: Z80
; 
; Created with dZ80 2.0
; 
; on Thursday, 30 of November 2017 at 06:26 PM
;

 
534e 00        nop     
534f 00        nop     
5350 00        nop     
5351 00        nop     
5352 00        nop     
5353 00        nop     
; Disassembly of the file "E:\mTUTOR\l4\ppttut-file.bin"
; 
; CPU Type: Z80
; 
; Created with dZ80 2.0
; 
; on Thursday, 30 of November 2017 at 06:31 PM
; 

;  f.open
5354 110600    ld      de,0006h
5357 19        add     hl,de
5358 22327c    ld      (7c32h),hl
535b cd3054    call    5430h
535e c0        ret     nz

535f 2a327c    ld      hl,(7c32h)
5362 2b        dec     hl
5363 7e        ld      a,(hl)
5364 a7        and     a
5365 fa7253    jp      m,5372h
5368 32457c    ld      (7c45h),a
536b e6fe      and     0feh
536d c27b58    jp      nz,587bh
5370 182a      jr      539ch            ; (+2ah)
5372 fefe      cp      0feh
5374 200a      jr      nz,5380h         ; (+0ah)
5376 af        xor     a
5377 32457c    ld      (7c45h),a
537a cd9c53    call    539ch
537d c0        ret     nz

537e 1812      jr      5392h            ; (+12h)
5380 af        xor     a
5381 32457c    ld      (7c45h),a
5384 cd9c53    call    539ch
5387 2809      jr      z,5392h          ; (+09h)
5389 3e01      ld      a,01h
538b 32457c    ld      (7c45h),a
538e cd9c53    call    539ch
5391 c0        ret     nz

5392 2a327c    ld      hl,(7c32h)
5395 2b        dec     hl
5396 3a457c    ld      a,(7c45h)
5399 77        ld      (hl),a
539a af        xor     a
539b c9        ret     

539c cd0555    call    5505h
539f c0        ret     nz

53a0 cdb453    call    53b4h		; f.fnts
53a3 c0        ret     nz

53a4 2a327c    ld      hl,(7c32h)
53a7 111400    ld      de,0014h
53aa 19        add     hl,de
53ab 7e        ld      a,(hl)
53ac cd8d58    call    588dh		; typechk
53af c26258    jp      nz,5862h
53b2 af        xor     a
53b3 c9        ret     


; f.fnts
53b4 3a9a7c    ld      a,(7c9ah)
53b7 323e7c    ld      (7c3eh),a
53ba 3a997c    ld      a,(7c99h)
53bd 32407c    ld      (7c40h),a
53c0 3a5e7c    ld      a,(7c5eh)
53c3 3c        inc     a
53c4 323c7c    ld      (7c3ch),a
53c7 3a3c7c    ld      a,(7c3ch)
53ca 32477c    ld      (7c47h),a
53cd 3e01      ld      a,01h
53cf 324a7c    ld      (7c4ah),a
53d2 21797c    ld      hl,7c79h
53d5 22487c    ld      (7c48h),hl
53d8 cd2455    call    5524h		; d.read
53db c0        ret     nz

53dc 21797c    ld      hl,7c79h
53df 223a7c    ld      (7c3ah),hl
53e2 eb        ex      de,hl
53e3 0604      ld      b,04h
53e5 2a327c    ld      hl,(7c32h)
53e8 0e15      ld      c,15h
53ea 1a        ld      a,(de)
53eb 96        sub     (hl)
53ec 2015      jr      nz,5403h         ; (+15h)
53ee 23        inc     hl
53ef 13        inc     de
53f0 0d        dec     c
53f1 20f7      jr      nz,53eah         ; (-09h)
53f3 2a3a7c    ld      hl,(7c3ah)
53f6 eb        ex      de,hl
53f7 2a327c    ld      hl,(7c32h)
53fa 012000    ld      bc,0020h
53fd cdae5e    call    5eaeh		; moveb
5400 c36258    jp      5862h
5403 2a3a7c    ld      hl,(7c3ah)
5406 112000    ld      de,0020h
5409 19        add     hl,de
540a 223a7c    ld      (7c3ah),hl
540d eb        ex      de,hl
540e 05        dec     b
540f 20d4      jr      nz,53e5h         ; (-2ch)
5411 3a3e7c    ld      a,(7c3eh)
5414 3d        dec     a
5415 ca7758    jp      z,5877h
5418 fa7758    jp      m,5877h
541b 323e7c    ld      (7c3eh),a
541e 3a3c7c    ld      a,(7c3ch)
5421 3c        inc     a
5422 323c7c    ld      (7c3ch),a
5425 47        ld      b,a
5426 3a407c    ld      a,(7c40h)
5429 b8        cp      b
542a fa7758    jp      m,5877h
542d c3c753    jp      53c7h
5430 cd4a58    call    584ah		; d.vdef
5433 c8        ret     z

5434 cdc256    call    56c2h		; d.rdef
5437 c9        ret     


; f.read
5438 cd4854    call    5448h		; rwcommon
543b c0        ret     nz

543c cd2455    call    5524h		; d.read
543f c9        ret     


; f.write
5440 cd4854    call    5448h		; rwcommon
5443 c0        ret     nz

5444 cdc855    call    55c8h		; d.write
5447 c9        ret     


; rwcommon
5448 22327c    ld      (7c32h),hl
544b af        xor     a
544c 324c7c    ld      (7c4ch),a
544f 110300    ld      de,0003h
5452 19        add     hl,de
5453 5e        ld      e,(hl)
5454 23        inc     hl
5455 56        ld      d,(hl)
5456 eb        ex      de,hl
5457 22487c    ld      (7c48h),hl
545a 2a327c    ld      hl,(7c32h)
545d cdf254    call    54f2h		; f.filel
5460 cdf95d    call    5df9h		; comphl
5463 223e7c    ld      (7c3eh),hl
5466 2a327c    ld      hl,(7c32h)
5469 54        ld      d,h
546a 5d        ld      e,l
546b 010500    ld      bc,0005h
546e 09        add     hl,bc
546f 7e        ld      a,(hl)
5470 32457c    ld      (7c45h),a
5473 e6fe      and     0feh
5475 c27b58    jp      nz,587bh
5478 210000    ld      hl,0000h
547b 19        add     hl,de
547c 4e        ld      c,(hl)
547d 23        inc     hl
547e 46        ld      b,(hl)
547f 03        inc     bc
5480 3ef0      ld      a,0f0h
5482 a0        and     b
5483 c27b58    jp      nz,587bh
5486 0b        dec     bc
5487 210200    ld      hl,0002h
548a 19        add     hl,de
548b 1600      ld      d,00h
548d 5e        ld      e,(hl)
548e 7b        ld      a,e
548f a7        and     a
5490 ca7b58    jp      z,587bh
5493 324a7c    ld      (7c4ah),a
5496 eb        ex      de,hl
5497 09        add     hl,bc
5498 2b        dec     hl
5499 eb        ex      de,hl
549a 2a3e7c    ld      hl,(7c3eh)
549d 19        add     hl,de
549e 7c        ld      a,h
549f a7        and     a
54a0 f27b58    jp      p,587bh
54a3 cda854    call    54a8h
54a6 af        xor     a
54a7 c9        ret     

54a8 2a327c    ld      hl,(7c32h)
54ab 010000    ld      bc,0000h
54ae 09        add     hl,bc
54af 4e        ld      c,(hl)
54b0 23        inc     hl
54b1 46        ld      b,(hl)
54b2 2a327c    ld      hl,(7c32h)
54b5 111a00    ld      de,001ah
54b8 19        add     hl,de
54b9 7e        ld      a,(hl)
54ba cd8758    call    5887h		; sectcnv
54bd 2a327c    ld      hl,(7c32h)
54c0 111b00    ld      de,001bh
54c3 19        add     hl,de
54c4 56        ld      d,(hl)
54c5 23        inc     hl
54c6 5e        ld      e,(hl)
54c7 cdf954    call    54f9h
54ca 09        add     hl,bc
54cb e5        push    hl
54cc 44        ld      b,h
54cd 4d        ld      c,l
54ce 3a5f7c    ld      a,(7c5fh)
54d1 1600      ld      d,00h
54d3 5f        ld      e,a
54d4 cdb55d    call    5db5h		; divbcde
54d7 79        ld      a,c
54d8 32467c    ld      (7c46h),a
54db 50        ld      d,b
54dc 59        ld      e,c
54dd 2a5f7c    ld      hl,(7c5fh)
54e0 2600      ld      h,00h
54e2 cddc5d    call    5ddch		; muldehl
54e5 eb        ex      de,hl
54e6 cdf95d    call    5df9h		; comphl
54e9 eb        ex      de,hl
54ea e1        pop     hl
54eb 19        add     hl,de
54ec 7d        ld      a,l
54ed 3c        inc     a
54ee 32477c    ld      (7c47h),a
54f1 c9        ret     


; f.filel
54f2 111d00    ld      de,001dh
54f5 19        add     hl,de
54f6 1600      ld      d,00h
54f8 5e        ld      e,(hl)
54f9 62        ld      h,d
54fa 6b        ld      l,e
54fb 19        add     hl,de
54fc 29        add     hl,hl
54fd 29        add     hl,hl
54fe 29        add     hl,hl
54ff cd8d58    call    588dh		; typechk
5502 c0        ret     nz

5503 2b        dec     hl
5504 c9        ret     

5505 cd0c55    call    550ch
5508 cd2455    call    5524h		; d.read
550b c9        ret     

550c 3a5d7c    ld      a,(7c5dh)
550f 32467c    ld      (7c46h),a
5512 3a5e7c    ld      a,(7c5eh)
5515 32477c    ld      (7c47h),a
5518 3e01      ld      a,01h
551a 324a7c    ld      (7c4ah),a
551d 21797c    ld      hl,7c79h
5520 22487c    ld      (7c48h),hl
5523 c9        ret     


; d.read
5524 af        xor     a
5525 324e7c    ld      (7c4eh),a
5528 af        xor     a
5529 324c7c    ld      (7c4ch),a
552c 3a4a7c    ld      a,(7c4ah)
552f fe35      cp      35h
5531 fa3655    jp      m,5536h
5534 3e34      ld      a,34h
5536 324c7d    ld      (7d4ch),a
5539 3e00      ld      a,00h
553b cd6a57    call    576ah
553e 2871      jr      z,55b1h          ; (+71h)
5540 213c00    ld      hl,003ch
5543 cdb957    call    57b9h
5546 cd1b57    call    571bh
5549 3e4a      ld      a,4ah
554b 21b80b    ld      hl,0bb8h
554e cd8e57    call    578eh
5551 205e      jr      nz,55b1h         ; (+5eh)
5553 cdb057    call    57b0h
5556 3a4c7d    ld      a,(7d4ch)
5559 47        ld      b,a
555a af        xor     a
555b 324b7d    ld      (7d4bh),a
555e 2a487c    ld      hl,(7c48h)
5561 eb        ex      de,hl
5562 210000    ld      hl,0000h
5565 0e80      ld      c,80h
5567 dbae      in      a,(0aeh)
5569 12        ld      (de),a
556a 13        inc     de
556b cd6157    call    5761h
556e 0d        dec     c
556f 20f6      jr      nz,5567h         ; (-0ah)
5571 dbae      in      a,(0aeh)
5573 bd        cp      l
5574 c48857    call    nz,5788h
5577 dbae      in      a,(0aeh)
5579 bc        cp      h
557a c48857    call    nz,5788h
557d 05        dec     b
557e 20e2      jr      nz,5562h         ; (-1eh)
5580 3a4b7d    ld      a,(7d4bh)
5583 a7        and     a
5584 2026      jr      nz,55ach         ; (+26h)
5586 eb        ex      de,hl
5587 22487c    ld      (7c48h),hl
558a 3e50      ld      a,50h
558c 213c00    ld      hl,003ch
558f cd8e57    call    578eh
5592 c26758    jp      nz,5867h
5595 3a4c7d    ld      a,(7d4ch)
5598 47        ld      b,a
5599 3a4a7c    ld      a,(7c4ah)
559c 90        sub     b
559d ca6258    jp      z,5862h
55a0 fa6258    jp      m,5862h
55a3 324a7c    ld      (7c4ah),a
55a6 cd0157    call    5701h
55a9 c32455    jp      5524h		; d.read
55ac cd8358    call    5883h
55af 1803      jr      55b4h            ; (+03h)
55b1 cd6758    call    5867h
55b4 214e7c    ld      hl,7c4eh
55b7 7e        ld      a,(hl)
55b8 3c        inc     a
55b9 fe05      cp      05h
55bb f26258    jp      p,5862h
55be 77        ld      (hl),a
55bf cd5556    call    5655h		; d.clear
55c2 c26258    jp      nz,5862h
55c5 c32855    jp      5528h


; d.write
55c8 af        xor     a
55c9 324e7c    ld      (7c4eh),a
55cc af        xor     a
55cd 324c7c    ld      (7c4ch),a
55d0 3a4a7c    ld      a,(7c4ah)
55d3 fe35      cp      35h
55d5 fada55    jp      m,55dah
55d8 3e34      ld      a,34h
55da 324c7d    ld      (7d4ch),a
55dd 3e02      ld      a,02h
55df cd6a57    call    576ah
55e2 285d      jr      z,5641h          ; (+5dh)
55e4 21dc05    ld      hl,05dch
55e7 cdb957    call    57b9h
55ea cd1b57    call    571bh
55ed 3e4a      ld      a,4ah
55ef 210003    ld      hl,0300h
55f2 cd8e57    call    578eh
55f5 204a      jr      nz,5641h         ; (+4ah)
55f7 3a4c7d    ld      a,(7d4ch)
55fa 47        ld      b,a
55fb 2a487c    ld      hl,(7c48h)
55fe eb        ex      de,hl
55ff 210000    ld      hl,0000h
5602 0e80      ld      c,80h
5604 1a        ld      a,(de)
5605 d3ae      out     (0aeh),a
5607 13        inc     de
5608 cd6157    call    5761h
560b 0d        dec     c
560c 20f6      jr      nz,5604h         ; (-0ah)
560e 7d        ld      a,l
560f d3ae      out     (0aeh),a
5611 cdb057    call    57b0h
5614 7c        ld      a,h
5615 d3ae      out     (0aeh),a
5617 cdb057    call    57b0h
561a 05        dec     b
561b 20e2      jr      nz,55ffh         ; (-1eh)
561d 3e50      ld      a,50h
561f 21204e    ld      hl,4e20h
5622 cd8e57    call    578eh
5625 201a      jr      nz,5641h         ; (+1ah)
5627 ed53487c  ld      (7c48h),de
562b 3a4c7d    ld      a,(7d4ch)
562e 47        ld      b,a
562f 3a4a7c    ld      a,(7c4ah)
5632 90        sub     b
5633 ca6258    jp      z,5862h
5636 fa6258    jp      m,5862h
5639 324a7c    ld      (7c4ah),a
563c cd0157    call    5701h
563f 1887      jr      55c8h            ; (-79h) ; d.write
5641 cd5556    call    5655h		; d.clear
5644 c26258    jp      nz,5862h
5647 214e7c    ld      hl,7c4eh
564a 7e        ld      a,(hl)
564b 3c        inc     a
564c fe02      cp      02h
564e f26b58    jp      p,586bh
5651 77        ld      (hl),a
5652 c3cc55    jp      55cch

; d.clear
5655 af        xor     a
5656 324c7c    ld      (7c4ch),a
5659 3e08      ld      a,08h
565b cd6a57    call    576ah
565e 3e50      ld      a,50h
5660 21d007    ld      hl,07d0h
5663 cd8e57    call    578eh
5666 ca6258    jp      z,5862h
5669 c36f58    jp      586fh

; d.rcid
566c 3e04      ld      a,04h
566e cd6a57    call    576ah
5671 c8        ret     z

5672 0eff      ld      c,0ffh
5674 dbaf      in      a,(0afh)
5676 fe4a      cp      4ah
5678 2812      jr      z,568ch          ; (+12h)
567a 47        ld      b,a
567b e680      and     80h
567d 2014      jr      nz,5693h         ; (+14h)
567f 210f00    ld      hl,000fh
5682 cdb957    call    57b9h
5685 0d        dec     c
5686 20ec      jr      nz,5674h         ; (-14h)
5688 3e00      ld      a,00h
568a a7        and     a
568b c9        ret     

568c dbae      in      a,(0aeh)
568e 32447c    ld      (7c44h),a
5691 a7        and     a
5692 c9        ret     

5693 78        ld      a,b
5694 fea0      cp      0a0h
5696 2004      jr      nz,569ch         ; (+04h)
5698 3e08      ld      a,08h
569a a7        and     a
569b c9        ret     

569c 3e10      ld      a,10h
569e a7        and     a
569f c9        ret     

; d.clock
56a0 3e0b      ld      a,0bh
56a2 cd6a57    call    576ah
56a5 2817      jr      z,56beh          ; (+17h)
56a7 3e4a      ld      a,4ah
56a9 212d00    ld      hl,002dh
56ac cd8e57    call    578eh
56af 200d      jr      nz,56beh         ; (+0dh)
56b1 dbae      in      a,(0aeh)
56b3 6f        ld      l,a
56b4 cdb057    call    57b0h
56b7 cdb057    call    57b0h
56ba dbae      in      a,(0aeh)
56bc 67        ld      h,a
56bd c9        ret     

56be 210000    ld      hl,0000h
56c1 c9        ret     

; d.rdef
56c2 af        xor     a
56c3 324f7c    ld      (7c4fh),a
56c6 32457c    ld      (7c45h),a
56c9 32467c    ld      (7c46h),a
56cc 3e01      ld      a,01h
56ce 32477c    ld      (7c47h),a
56d1 324a7c    ld      (7c4ah),a
56d4 cd6c56    call    566ch		; d.rcid
56d7 2820      jr      z,56f9h          ; (+20h)
56d9 21797c    ld      hl,7c79h
56dc 22487c    ld      (7c48h),hl
56df 3e1a      ld      a,1ah
56e1 325f7c    ld      (7c5fh),a
56e4 cd2455    call    5524h		; d.read
56e7 2010      jr      nz,56f9h         ; (+10h)
56e9 11797c    ld      de,7c79h
56ec 214f7c    ld      hl,7c4fh
56ef 012a00    ld      bc,002ah
56f2 cdae5e    call    5eaeh		; moveb
56f5 cd4a58    call    584ah		; d.vdef
56f8 c8        ret     z

56f9 3e1a      ld      a,1ah
56fb 325f7c    ld      (7c5fh),a
56fe c37f58    jp      587fh
5701 21477c    ld      hl,7c47h
5704 3a5f7c    ld      a,(7c5fh)
5707 47        ld      b,a
5708 3a4c7d    ld      a,(7d4ch)
570b 86        add     a,(hl)
570c 77        ld      (hl),a
570d 90        sub     b
570e f8        ret     m

570f c8        ret     z

5710 4f        ld      c,a
5711 3a467c    ld      a,(7c46h)
5714 3c        inc     a
5715 32467c    ld      (7c46h),a
5718 79        ld      a,c
5719 18f1      jr      570ch            ; (-0fh)
571b 210000    ld      hl,0000h
571e 3a457c    ld      a,(7c45h)
5721 d3ae      out     (0aeh),a
5723 cd6157    call    5761h
5726 cdb057    call    57b0h
5729 3a467c    ld      a,(7c46h)
572c d3ae      out     (0aeh),a
572e cd6157    call    5761h
5731 cdb057    call    57b0h
5734 3a477c    ld      a,(7c47h)
5737 d3ae      out     (0aeh),a
5739 cd6157    call    5761h
573c cdb057    call    57b0h
573f 3a4c7d    ld      a,(7d4ch)
5742 d3ae      out     (0aeh),a
5744 cd6157    call    5761h
5747 cdb057    call    57b0h
574a 3e00      ld      a,00h
574c d3ae      out     (0aeh),a
574e cd6157    call    5761h
5751 cdb057    call    57b0h
5754 7d        ld      a,l
5755 d3ae      out     (0aeh),a
5757 cdb057    call    57b0h
575a cdb057    call    57b0h
575d 7c        ld      a,h
575e d3ae      out     (0aeh),a
5760 c9        ret     

5761 f5        push    af
5762 ac        xor     h
5763 07        rlca    
5764 67        ld      h,a
5765 f1        pop     af
5766 ad        xor     l
5767 0f        rrca    
5768 6f        ld      l,a
5769 c9        ret     

576a 47        ld      b,a
576b 0eff      ld      c,0ffh
576d d3af      out     (0afh),a
576f 211400    ld      hl,0014h
5772 cdb957    call    57b9h
5775 dbaf      in      a,(0afh)
5777 fe48      cp      48h
5779 2805      jr      z,5780h          ; (+05h)
577b 0d        dec     c
577c 20f1      jr      nz,576fh         ; (-0fh)
577e af        xor     a
577f c9        ret     

5780 78        ld      a,b
5781 2f        cpl     
5782 d3af      out     (0afh),a
5784 3e01      ld      a,01h
5786 a7        and     a
5787 c9        ret     

5788 3e01      ld      a,01h
578a 324b7d    ld      (7d4bh),a
578d c9        ret     

578e 06ff      ld      b,0ffh
5790 4f        ld      c,a
5791 e5        push    hl
5792 cdb957    call    57b9h
5795 e1        pop     hl
5796 dbaf      in      a,(0afh)
5798 b9        cp      c
5799 caae57    jp      z,57aeh
579c fe40      cp      40h
579e caae57    jp      z,57aeh
57a1 a7        and     a
57a2 f8        ret     m

57a3 05        dec     b
57a4 20eb      jr      nz,5791h         ; (-15h)
57a6 3e04      ld      a,04h
57a8 324c7c    ld      (7c4ch),a
57ab c36258    jp      5862h
57ae af        xor     a
57af c9        ret     

57b0 e5        push    hl
57b1 210100    ld      hl,0001h
57b4 cdb957    call    57b9h
57b7 e1        pop     hl
57b8 c9        ret     

57b9 f5        push    af
57ba 2b        dec     hl
57bb 7c        ld      a,h
57bc b5        or      l
57bd 20fb      jr      nz,57bah         ; (-05h)
57bf f1        pop     af
57c0 c9        ret     


; cboot
57c1 21e47b    ld      hl,7be4h
57c4 111104    ld      de,0411h
57c7 0600      ld      b,00h
57c9 70        ld      (hl),b
57ca 23        inc     hl
57cb 1b        dec     de
57cc 7a        ld      a,d
57cd b3        or      e
57ce 20f9      jr      nz,57c9h         ; (-07h)
57d0 3e3f      ld      a,3fh
57d2 32057d    ld      (7d05h),a
57d5 32077d    ld      (7d07h),a
57d8 21ffff    ld      hl,0ffffh
57db 220f7f    ld      (7f0fh),hl
57de 210000    ld      hl,0000h
57e1 22fc7f    ld      (7ffch),hl
57e4 221423    ld      (2314h),hl
57e7 39        add     hl,sp
57e8 22457d    ld      (7d45h),hl

; wboot
57eb cdc256    call    56c2h		; d.rdef
57ee c2215d    jp      nz,5d21h		; dskerr
57f1 3a0a53    ld      a,(530ah)
57f4 47        ld      b,a
57f5 3a737c    ld      a,(7c73h)
57f8 b8        cp      b
57f9 c2215d    jp      nz,5d21h		; dskerr
57fc 3e01      ld      a,01h
57fe 32497f    ld      (7f49h),a
5801 21687c    ld      hl,7c68h
5804 1800      jr      5806h            ; (+00h)  ; f.jumpo

; f.jumpo
5806 e5        push    hl
5807 cd6859    call    5968h		; purgeall
580a 210000    ld      hl,0000h
580d 22fc7f    ld      (7ffch),hl
5810 214027    ld      hl,2740h
5813 220823    ld      (2308h),hl
5816 214023    ld      hl,2340h
5819 220623    ld      (2306h),hl
581c 222b7f    ld      (7f2bh),hl
581f cd4658    call    5846h		; setram
5822 222f7f    ld      (7f2fh),hl
5825 3e40      ld      a,40h
5827 cd6e5b    call    5b6eh		; alloc
582a 222f7f    ld      (7f2fh),hl
582d af        xor     a
582e 77        ld      (hl),a
582f 3e01      ld      a,01h
5831 32387f    ld      (7f38h),a
5834 3e3e      ld      a,3eh
5836 32947d    ld      (7d94h),a
5839 323f7d    ld      (7d3fh),a
583c 210000    ld      hl,0000h
583f cd6a5a    call    5a6ah		; libload
5842 c2215d    jp      nz,5d21h		; dskerr
5845 e9        jp      (hl)

; setram
5846 210053    ld      hl,5300h
5849 c9        ret     

; d.vdef
584a 214f7c    ld      hl,7c4fh
584d 015b58    ld      bc,585bh
5850 0a        ld      a,(bc)
5851 a7        and     a
5852 c8        ret     z

5853 56        ld      d,(hl)
5854 92        sub     d
5855 2028      jr      nz,587fh         ; (+28h)
5857 23        inc     hl
5858 03        inc     bc
5859 18f5      jr      5850h            ; (-0bh)
585b 04        inc     b
585c 05        dec     b
585d 0600      ld      b,00h
585f 324c7c    ld      (7c4ch),a
5862 3a4c7c    ld      a,(7c4ch)
5865 a7        and     a
5866 c9        ret     

5867 3e01      ld      a,01h
5869 18f4      jr      585fh            ; (-0ch)
586b 3e02      ld      a,02h
586d 18f0      jr      585fh            ; (-10h)
586f 3e03      ld      a,03h
5871 18ec      jr      585fh            ; (-14h)
5873 3e04      ld      a,04h
5875 18e8      jr      585fh            ; (-18h)
5877 3e05      ld      a,05h
5879 18e4      jr      585fh            ; (-1ch)
587b 3e07      ld      a,07h
587d 18e0      jr      585fh            ; (-20h)
587f 3e09      ld      a,09h
5881 18dc      jr      585fh            ; (-24h)
5883 3e0a      ld      a,0ah
5885 18d8      jr      585fh            ; (-28h)

; sectcnv
5887 cd8d58    call    588dh		; typechk
588a c0        ret     nz

588b 03        inc     bc
588c c9        ret     

; typechk
588d f6ff      or      0ffh
588f c9        ret     

5890 00        nop     
5891 00        nop     
5892 00        nop     
5893 00        nop     
; Disassembly of the file "E:\mTUTOR\l4\ppttut-ppttut.bin"
; 
; CPU Type: Z80
; 
; Created with dZ80 2.0
; 
; on Thursday, 30 of November 2017 at 06:35 PM
; 
;		Initializations and Utility functions
;

          title  mode 5
*
*
*
*         mode 5             ppt tutor interpreter mode
*
*         e = byte 0 = d8/d7/d6/d5/d4/d3/d2/d1
*         d = byte 1 = d16/d15/d14/d13/d12/d11/d10/d9
*         c = byte 2 = 0/0/0/0/0/0/d18/d17
*
*         execute unit    = 2/0, 8/0, 8/unit number
*         receive data    = 2/0, 8/1, 8/0
*         initialize unit = 2/1, 16/address of unit
*         purge unit      = 2/2, 16/unit number
*                            if unit = 0, perform general
*                            initializations
*         halt  unit      = 2/3, 16/0
*
; z.ptut
5894 79        ld      a,c
5895 e603      and     03h
5897 2009      jr      nz,58a2h         ; (+09h)
5899 7a        ld      a,d
589a a7        and     a
589b 2811      jr      z,58aeh          ; (+11h)
589d fe04      cp      04h
589f 2879      jr      z,591ah          ; (+79h)
58a1 c9        ret     


; 
58a2 3d        dec     a
58a3 287a      jr      z,591fh          ; (+7ah) ; iunit
58a5 3d        dec     a
58a6 ca2a59    jp      z,592ah			; purge  ; 2 = purge unit
58a9 3d        dec     a
58aa ca6f59    jp      z,596fh			; halt
58ad c9        ret     

58ae 3a447d    ld      a,(7d44h)
58b1 a7        and     a
58b2 c0        ret     nz

58b3 210000    ld      hl,0000h
58b6 39        add     hl,sp
58b7 22457d    ld      (7d45h),hl
58ba 3e02      ld      a,02h
58bc 32387f    ld      (7f38h),a
58bf 32bb7f    ld      (7fbbh),a
58c2 32b97f    ld      (7fb9h),a
58c5 7b        ld      a,e
58c6 32947d    ld      (7d94h),a
58c9 32b87f    ld      (7fb8h),a
58cc 32ba7f    ld      (7fbah),a
58cf 210000    ld      hl,0000h
58d2 229c7d    ld      (7d9ch),hl
58d5 221423    ld      (2314h),hl
58d8 215d7d    ld      hl,7d5dh
58db cd065c    call    5c06h		; sstat
58de cd146c    call    6c14h		; iformat   
58e1 cdf35f    call    5ff3h		; clrkey
58e4 3e2a      ld      a,2ah
58e6 321623    ld      (2316h),a
58e9 3e03      ld      a,03h
58eb 32fa22    ld      (22fah),a
58ee 32447d    ld      (7d44h),a
58f1 af        xor     a
58f2 32477d    ld      (7d47h),a
58f5 329d7f    ld      (7f9dh),a
58f8 32dc7d    ld      (7ddch),a
58fb 32be7f    ld      (7fbeh),a
58fe 32c07f    ld      (7fc0h),a
5901 cd0759    call    5907h		; stkinit
5904 c39759    jp      5997h		; uexec


; stkinit
5907 2afe7f    ld      hl,(7ffeh)
590a 222b7f    ld      (7f2bh),hl
590d 22277f    ld      (7f27h),hl
5910 22337f    ld      (7f33h),hl
5913 210000    ld      hl,0000h
5916 22297f    ld      (7f29h),hl
5919 c9        ret     

591a 7b        ld      a,e
591b 32387f    ld      (7f38h),a
591e c9        ret     

; iunit
591f eb        ex      de,hl
5920 222f7f    ld      (7f2fh),hl
5923 3a387f    ld      a,(7f38h)
5926 e67f      and     7fh
5928 77        ld      (hl),a
5929 c9        ret     


; purge
592a 3a387f    ld      a,(7f38h)
592d 47        ld      b,a
592e 4b        ld      c,e
592f 7b        ld      a,e
5930 a7        and     a
5931 c2925d    jp      nz,5d92h		; purgu

; general init
5934 cd6859    call    5968h		; purgeall
5937 21487f    ld      hl,7f48h
593a 16ad      ld      d,0adh
593c cdc85e    call    5ec8h		; zerob

593f 217559    ld      hl,5975h
5942 220223    ld      (2302h),hl	; tmmde6
5945 21ffff    ld      hl,0ffffh
5948 22797d    ld      (7d79h),hl
594b 2aec22    ld      hl,(22ech)
594e 22807d    ld      (7d80h),hl
5951 211000    ld      hl,0010h
5954 22967f    ld      (7f96h),hl
5957 cd4658    call    5846h		; setram
595a 222f7f    ld      (7f2fh),hl	; f.vdirp or next
595d 22317f    ld      (7f31h),hl	;
5960 214100    ld      hl,0041h
5963 224d7f    ld      (7f4dh),hl
5966 1807      jr      596fh        ; (+07h) ; halt


; purgeall
5968 2a317f    ld      hl,(7f31h)
596b 222f7f    ld      (7f2fh),hl
596e c9        ret     


; halt
596f cd5e5d    call    5d5eh
5972 c8        ret     z

5973 f9        ld      sp,hl
5974 c9        ret     

5975 2af17f    ld      hl,(7ff1h)
5978 7c        ld      a,h
5979 b5        or      l
597a 2003      jr      nz,597fh         ; (+03h)
597c 214d7f    ld      hl,7f4dh
597f 7a        ld      a,d
5980 51        ld      d,c
5981 d5        push    de
5982 e5        push    hl
5983 cd1c60    call    601ch		; buffin
5986 e1        pop     hl
5987 d1        pop     de
5988 cb4a      bit     1,d
598a 2804      jr      z,5990h          ; (+04h)
598c 7b        ld      a,e
598d cd1c60    call    601ch		; buffin
5990 2a4f7f    ld      hl,(7f4fh)
5993 224b7f    ld      (7f4bh),hl
5996 c9        ret     


; uexec
5997 3a497f    ld      a,(7f49h)
599a a7        and     a
599b c4115a    call    nz,5a11h		; convert
599e cda459    call    59a4h		; uload
59a1 c35861    jp      6158h		; pinc0

; uload
59a4 3a947d    ld      a,(7d94h)
59a7 4f        ld      c,a
59a8 3a387f    ld      a,(7f38h)
59ab 47        ld      b,a
59ac cdd15b    call    5bd1h		; findu
59af f2fa59    jp      p,59fah
59b2 3a497f    ld      a,(7f49h)
59b5 a7        and     a
59b6 ca0b5d    jp      z,5d0bh
59b9 cd0e5b    call    5b0eh
59bc cd6e5b    call    5b6eh		; alloc
59bf d5        push    de
59c0 22e97b    ld      (7be9h),hl
59c3 e5        push    hl
59c4 cd235f    call    5f23h
59c7 21e67b    ld      hl,7be6h
59ca cd3854    call    5438h		; f.read
59cd c2215d    jp      nz,5d21h		; dskerr
59d0 e1        pop     hl
59d1 e5        push    hl
59d2 54        ld      d,h
59d3 5d        ld      e,l
59d4 23        inc     hl
59d5 46        ld      b,(hl)
59d6 3a947d    ld      a,(7d94h)
59d9 90        sub     b
59da c20b5d    jp      nz,5d0bh
59dd e1        pop     hl
59de d1        pop     de
59df e5        push    hl
59e0 23        inc     hl
59e1 23        inc     hl
59e2 23        inc     hl
59e3 23        inc     hl
59e4 46        ld      b,(hl)
59e5 23        inc     hl
59e6 4e        ld      c,(hl)
59e7 60        ld      h,b
59e8 69        ld      l,c
59e9 cda55b    call    5ba5h		;subhlde
59ec e1        pop     hl
59ed e5        push    hl
59ee 19        add     hl,de
59ef d1        pop     de
59f0 e5        push    hl
59f1 cdae5e    call    5eaeh		; moveb
59f4 d1        pop     de
59f5 cd1f59    call    591fh		; iunit
59f8 18aa      jr      59a4h            ; (-56h) ; uload
59fa 22967d    ld      (7d96h),hl
59fd e5        push    hl
59fe 23        inc     hl
59ff 23        inc     hl
5a00 56        ld      d,(hl)
5a01 23        inc     hl
5a02 5e        ld      e,(hl)
5a03 e1        pop     hl
5a04 19        add     hl,de
5a05 229a7d    ld      (7d9ah),hl
5a08 eb        ex      de,hl
5a09 2a9c7d    ld      hl,(7d9ch)
5a0c 19        add     hl,de
5a0d 22987d    ld      (7d98h),hl
5a10 c9        ret     

; convert
5a11 2a3d7f    ld      hl,(7f3dh)
5a14 46        ld      b,(hl)
5a15 3a947d    ld      a,(7d94h)
5a18 b8        cp      b
5a19 d0        ret     nc

5a1a 2a3b7f    ld      hl,(7f3bh)
5a1d 7e        ld      a,(hl)
5a1e 57        ld      d,a
5a1f 23        inc     hl
5a20 7e        ld      a,(hl)
5a21 5f        ld      e,a
5a22 eb        ex      de,hl
5a23 3a947d    ld      a,(7d94h)
5a26 3d        dec     a
5a27 3d        dec     a
5a28 5f        ld      e,a
5a29 1600      ld      d,00h
5a2b e5        push    hl
5a2c 210200    ld      hl,0002h
5a2f cddc5d    call    5ddch		; muldehl
5a32 e1        pop     hl
5a33 19        add     hl,de
5a34 7e        ld      a,(hl)
5a35 32387f    ld      (7f38h),a
5a38 47        ld      b,a
5a39 23        inc     hl
5a3a 7e        ld      a,(hl)
5a3b 32947d    ld      (7d94h),a
5a3e cd435a    call    5a43h		; rd.tbl
5a41 18ce      jr      5a11h            ; (-32h)  ; convert

; rd.tbl
5a43 112900    ld      de,0029h
5a46 2a3f7f    ld      hl,(7f3fh)
5a49 05        dec     b
5a4a 2803      jr      z,5a4fh          ; (+03h)
5a4c 19        add     hl,de
5a4d 18fa      jr      5a49h            ; (-06h)
5a4f 22397f    ld      (7f39h),hl
5a52 112600    ld      de,0026h
5a55 19        add     hl,de
5a56 223b7f    ld      (7f3bh),hl
5a59 23        inc     hl
5a5a 23        inc     hl
5a5b 223d7f    ld      (7f3dh),hl
5a5e 2a397f    ld      hl,(7f39h)
5a61 11e67b    ld      de,7be6h
5a64 012600    ld      bc,0026h
5a67 edb0      ldir    
5a69 c9        ret     

; libload
5a6a 22427d    ld      (7d42h),hl
5a6d 2afc7f    ld      hl,(7ffch)
5a70 7c        ld      a,h
5a71 b5        or      l
5a72 2010      jr      nz,5a84h         ; (+10h)
5a74 214023    ld      hl,2340h
5a77 22fc7f    ld      (7ffch),hl
5a7a 22fe7f    ld      (7ffeh),hl
5a7d cd0759    call    5907h		; stkinit
5a80 cdd45a    call    5ad4h
5a83 c0        ret     nz

5a84 3a947d    ld      a,(7d94h)
5a87 4f        ld      c,a
5a88 3a387f    ld      a,(7f38h)
5a8b 47        ld      b,a
5a8c cdd15b    call    5bd1h		; findu
5a8f f2b65a    jp      p,5ab6h
5a92 3a497f    ld      a,(7f49h)
5a95 a7        and     a
5a96 2004      jr      nz,5a9ch         ; (+04h)
5a98 cdd45a    call    5ad4h
5a9b c0        ret     nz

5a9c cd0e5b    call    5b0eh
5a9f 47        ld      b,a
5aa0 2a427d    ld      hl,(7d42h)
5aa3 7c        ld      a,h
5aa4 b5        or      l
5aa5 78        ld      a,b
5aa6 cc6e5b    call    z,5b6eh		; alloc
5aa9 22427d    ld      (7d42h),hl
5aac 22e97b    ld      (7be9h),hl
5aaf 21e67b    ld      hl,7be6h
5ab2 cd3854    call    5438h		; f.read
5ab5 c0        ret     nz

5ab6 2a987d    ld      hl,(7d98h)
5ab9 e5        push    hl
5aba 2a427d    ld      hl,(7d42h)
5abd 110600    ld      de,0006h
5ac0 19        add     hl,de
5ac1 22987d    ld      (7d98h),hl
5ac4 e5        push    hl
5ac5 23        inc     hl
5ac6 5e        ld      e,(hl)
5ac7 23        inc     hl
5ac8 56        ld      d,(hl)
5ac9 cd1353    call    5313h		; v.reloc
5acc d1        pop     de
5acd e1        pop     hl
5ace 22987d    ld      (7d98h),hl
5ad1 eb        ex      de,hl
5ad2 af        xor     a
5ad3 c9        ret     

5ad4 21e67b    ld      hl,7be6h
5ad7 1626      ld      d,26h
5ad9 cdc85e    call    5ec8h		; zerob
5adc 21085b    ld      hl,5b08h
5adf 11ec7b    ld      de,7bech
5ae2 010600    ld      bc,0006h
5ae5 edb0      ldir    
5ae7 3efd      ld      a,0fdh
5ae9 32007c    ld      (7c00h),a
5aec 3efe      ld      a,0feh
5aee 32eb7b    ld      (7bebh),a
5af1 21e67b    ld      hl,7be6h
5af4 cd5453    call    5354h		;  f.open
5af7 c0        ret     nz

5af8 21e67b    ld      hl,7be6h
5afb 223f7f    ld      (7f3fh),hl
5afe 3e02      ld      a,02h
5b00 cd6e5b    call    5b6eh		; alloc
5b03 22437f    ld      (7f43h),hl
5b06 af        xor     a
5b07 c9        ret     

5b08 13        inc     de
5b09 19        add     hl,de
5b0a 13        inc     de
5b0b 0c        inc     c
5b0c 09        add     hl,bc
5b0d 02        ld      (bc),a
5b0e 3a387f    ld      a,(7f38h)
5b11 32457f    ld      (7f45h),a
5b14 47        ld      b,a
5b15 cd435a    call    5a43h		; rd.tbl
5b18 3e02      ld      a,02h
5b1a 32e87b    ld      (7be8h),a
5b1d 210000    ld      hl,0000h
5b20 22e67b    ld      (7be6h),hl
5b23 3a387f    ld      a,(7f38h)
5b26 3d        dec     a
5b27 2806      jr      z,5b2fh          ; (+06h)
5b29 3a047c    ld      a,(7c04h)
5b2c 32e87b    ld      (7be8h),a
5b2f 2a437f    ld      hl,(7f43h)
5b32 22e97b    ld      (7be9h),hl
5b35 21e67b    ld      hl,7be6h
5b38 cd3854    call    5438h		; f.read
5b3b c2215d    jp      nz,5d21h		; dskerr
5b3e 3a387f    ld      a,(7f38h)
5b41 3d        dec     a
5b42 3a947d    ld      a,(7d94h)
5b45 2808      jr      z,5b4fh          ; (+08h)
5b47 a7        and     a
5b48 ca0b5d    jp      z,5d0bh
5b4b 3d        dec     a
5b4c ca0b5d    jp      z,5d0bh
5b4f 3d        dec     a
5b50 5f        ld      e,a
5b51 1600      ld      d,00h
5b53 2a437f    ld      hl,(7f43h)
5b56 011000    ld      bc,0010h
5b59 09        add     hl,bc
5b5a 19        add     hl,de
5b5b 19        add     hl,de
5b5c 19        add     hl,de
5b5d 56        ld      d,(hl)
5b5e 23        inc     hl
5b5f 5e        ld      e,(hl)
5b60 23        inc     hl
5b61 7e        ld      a,(hl)
5b62 eb        ex      de,hl
5b63 22e67b    ld      (7be6h),hl
5b66 32e87b    ld      (7be8h),a
5b69 a7        and     a
5b6a ca0b5d    jp      z,5d0bh
5b6d c9        ret     

*
*         alloc
*         allocate requested amount of memory from unit
*         buffer
*
*         on entry - a = requested memory length in 128-byte
*                        blocks
*         on exit  - h,l = address of free memory
*
*         uses - all registers
*
; alloc
5b6e 5f        ld      e,a
5b6f 1600      ld      d,00h
5b71 218000    ld      hl,0080h
5b74 cddc5d    call    5ddch		; muldehl
5b77 eb        ex      de,hl

; balloc
5b78 cd865b    call    5b86h		; getmem
5b7b 2a2f7f    ld      hl,(7f2fh)
5b7e ed5b4b7d  ld      de,(7d4bh)
5b82 a7        and     a
5b83 ed52      sbc     hl,de
5b85 c9        ret     


; getmem
5b86 224b7d    ld      (7d4bh),hl
5b89 2a4b7d    ld      hl,(7d4bh)
5b8c eb        ex      de,hl
5b8d 2a2b7f    ld      hl,(7f2bh)
5b90 19        add     hl,de
5b91 eb        ex      de,hl
5b92 2a2f7f    ld      hl,(7f2fh)
5b95 cda55b    call    5ba5h		;subhlde
5b98 d8        ret     c

5b99 3a497f    ld      a,(7f49h)
5b9c a7        and     a
5b9d ca415d    jp      z,5d41h
5ba0 cdac5b    call    5bach
5ba3 18e4      jr      5b89h            ; (-1ch)


;subhlde
5ba5 7b        ld      a,e
5ba6 95        sub     l
5ba7 5f        ld      e,a
5ba8 7a        ld      a,d
5ba9 9c        sbc     a,h
5baa 57        ld      d,a
5bab c9        ret     

5bac 010000    ld      bc,0000h
5baf cdd15b    call    5bd1h		; findu
5bb2 ed4b9e7d  ld      bc,(7d9eh)
5bb6 78        ld      a,b
5bb7 b1        or      c
5bb8 ca415d    jp      z,5d41h
5bbb cd925d    call    5d92h		; purgu
5bbe c9        ret     


; pin
5bbf 44        ld      b,h
5bc0 4d        ld      c,l
5bc1 cdd15b    call    5bd1h		; findu
5bc4 f8        ret     m

5bc5 cbfe      set     7,(hl)
5bc7 c9        ret     

; unpin
5bc8 44        ld      b,h
5bc9 4d        ld      c,l
5bca cdd15b    call    5bd1h		; findu
5bcd f8        ret     m

5bce cbbe      res     7,(hl)
5bd0 c9        ret     


; findu
5bd1 d5        push    de
5bd2 210000    ld      hl,0000h
5bd5 229e7d    ld      (7d9eh),hl
5bd8 2a2f7f    ld      hl,(7f2fh)
5bdb 56        ld      d,(hl)
5bdc 23        inc     hl
5bdd 5e        ld      e,(hl)
5bde 2b        dec     hl
5bdf 7a        ld      a,d
5be0 a7        and     a
5be1 281e      jr      z,5c01h          ; (+1eh)
5be3 faea5b    jp      m,5beah
5be6 ed539e7d  ld      (7d9eh),de
5bea e67f      and     7fh
5bec b8        cp      b
5bed 2006      jr      nz,5bf5h         ; (+06h)
5bef 7b        ld      a,e
5bf0 b9        cp      c
5bf1 3e00      ld      a,00h
5bf3 280e      jr      z,5c03h          ; (+0eh)
5bf5 e5        push    hl
5bf6 23        inc     hl
5bf7 23        inc     hl
5bf8 23        inc     hl
5bf9 23        inc     hl
5bfa 56        ld      d,(hl)
5bfb 23        inc     hl
5bfc 5e        ld      e,(hl)
5bfd e1        pop     hl
5bfe 19        add     hl,de
5bff 18da      jr      5bdbh            ; (-26h)
5c01 3eff      ld      a,0ffh
5c03 d1        pop     de
5c04 a7        and     a
5c05 c9        ret     


; sstat
5c06 3af622    ld      a,(22f6h)		; m.mode
5c09 77        ld      (hl),a	
5c0a 23        inc     hl
5c0b 3af422    ld      a,(22f4h)		; m.ccr
5c0e 77        ld      (hl),a
5c0f 227d7d    ld      (7d7dh),hl
5c12 2af022    ld      hl,(22f0h)		; m.margin
5c15 cd2b5c    call    5c2bh
5c18 cd4f00    call    004fh			; R.INPX
5c1b cd2b5c    call    5c2bh
5c1e cd5200    call    0052h			; R.INPY
5c21 cd2b5c    call    5c2bh
5c24 2af822    ld      hl,(22f8h)		; m.dir
5c27 cd2b5c    call    5c2bh
5c2a c9        ret     

5c2b eb        ex      de,hl
5c2c 2a7d7d    ld      hl,(7d7dh)
5c2f 23        inc     hl
5c30 72        ld      (hl),d
5c31 23        inc     hl
5c32 73        ld      (hl),e
5c33 227d7d    ld      (7d7dh),hl
5c36 c9        ret     


; rstat
5c37 7e        ld      a,(hl)
5c38 23        inc     hl
5c39 227d7d    ld      (7d7dh),hl
5c3c 07        rlca    
5c3d e6fe      and     0feh
5c3f 2600      ld      h,00h
5c41 6f        ld      l,a
5c42 cd5e00    call    005eh			; R.MODE
5c45 2a7d7d    ld      hl,(7d7dh)
5c48 6e        ld      l,(hl)
5c49 2600      ld      h,00h
5c4b cd7300    call    0073h			; R.CCR
5c4e cd675c    call    5c67h
5c51 22f022    ld      (22f0h),hl		; m.margin
5c54 cd675c    call    5c67h
5c57 cd5500    call    0055h			; R.OUTX
5c5a cd675c    call    5c67h
5c5d cd5800    call    0058h			; R.OUTY
5c60 cd675c    call    5c67h
5c63 cd6a00    call    006ah			; R.DIR
5c66 c9        ret     

5c67 2a7d7d    ld      hl,(7d7dh)
5c6a 23        inc     hl
5c6b 56        ld      d,(hl)
5c6c 23        inc     hl
5c6d 5e        ld      e,(hl)
5c6e 227d7d    ld      (7d7dh),hl
5c71 eb        ex      de,hl
5c72 c9        ret     


; xcall
5c73 e5        push    hl
5c74 2a3f7d    ld      hl,(7d3fh)
5c77 e3        ex      (sp),hl
5c78 e5        push    hl
5c79 21805c    ld      hl,5c80h
5c7c e3        ex      (sp),hl
5c7d fde5      push    iy
5c7f c9        ret     

5c80 224b7d    ld      (7d4bh),hl
5c83 e1        pop     hl
5c84 22947d    ld      (7d94h),hl
5c87 210000    ld      hl,0000h
5c8a 229c7d    ld      (7d9ch),hl
5c8d f5        push    af
5c8e cda459    call    59a4h		; uload
5c91 f1        pop     af
5c92 2a987d    ld      hl,(7d98h)
5c95 d1        pop     de
5c96 19        add     hl,de
5c97 e5        push    hl
5c98 2a987d    ld      hl,(7d98h)
5c9b 23        inc     hl
5c9c 5e        ld      e,(hl)
5c9d 23        inc     hl
5c9e 56        ld      d,(hl)
5c9f f5        push    af
5ca0 cd1353    call    5313h		; v.reloc
5ca3 f1        pop     af
5ca4 2a4b7d    ld      hl,(7d4bh)
5ca7 c9        ret     


; errorx
; calcerr
5ca8 cd6859    call    5968h		; purgeall
5cab 3a387f    ld      a,(7f38h)
5cae 32467f    ld      (7f46h),a
5cb1 3a947d    ld      a,(7d94h)
5cb4 32477f    ld      (7f47h),a
5cb7 3e01      ld      a,01h
5cb9 32387f    ld      (7f38h),a
5cbc 3e3d      ld      a,3dh
5cbe 32947d    ld      (7d94h),a
5cc1 210000    ld      hl,0000h
5cc4 cd6a5a    call    5a6ah		; libload
5cc7 2033      jr      nz,5cfch         ; (+33h)
5cc9 e9        jp      (hl)

; errplt
5cca 22f97c    ld      (7cf9h),hl
5ccd 1600      ld      d,00h
5ccf eb        ex      de,hl
5cd0 22fb7c    ld      (7cfbh),hl
5cd3 210700    ld      hl,0007h
5cd6 cd0d5e    call    5e0dh		; ferase

; errplt2
5cd9 219800    ld      hl,0098h
5cdc cd5500    call    0055h
5cdf 211001    ld      hl,0110h
5ce2 cd5800    call    0058h
5ce5 cd146c    call    6c14h		; iformat   
5ce8 cd3a6c    call    6c3ah		; format
5ceb 210400    ld      hl,0004h
5cee 227b7d    ld      (7d7bh),hl
5cf1 3a497f    ld      a,(7f49h)
5cf4 a7        and     a
5cf5 285a      jr      z,5d51h          ; (+5ah) ; exstop
5cf7 cdc15f    call    5fc1h		; getkey
5cfa 18fb      jr      5cf7h            ; (-05h)
5cfc 21035d    ld      hl,5d03h
5cff 1e08      ld      e,08h
5d01 18c7      jr      5ccah            ; (-39h) ; errplt
5d03 05        dec     b
5d04 1805      jr      5d0bh            ; (+05h)
5d06 03        inc     bc
5d07 2d        dec     l
5d08 05        dec     b
5d09 12        ld      (de),a
5d0a 12        ld      (de),a
5d0b 21125d    ld      hl,5d12h
5d0e 1e0f      ld      e,0fh
5d10 18b8      jr      5ccah            ; (-48h) ; errplt
5d12 15        dec     d
5d13 0e09      ld      c,09h
5d15 14        inc     d
5d16 2d        dec     l
5d17 0e0f      ld      c,0fh
5d19 14        inc     d
5d1a 2d        dec     l
5d1b 0c        inc     c
5d1c 0f        rrca    
5d1d 010405    ld      bc,0504h
5d20 04        inc     b


; dskerr
5d21 21285d    ld      hl,5d28h
5d24 1e08      ld      e,08h
5d26 18a2      jr      5ccah            ; (-5eh)	; errplt
5d28 04        inc     b
5d29 09        add     hl,bc
5d2a 13        inc     de
5d2b 0b        dec     bc
5d2c 2d        dec     l
5d2d 05        dec     b
5d2e 12        ld      (de),a
5d2f 12        ld      (de),a

; leserr
5d30 21375d    ld      hl,5d37h
5d33 1e0a      ld      e,0ah
5d35 1893      jr      5ccah            ; (-6dh)	; errplt
5d37 0c        inc     c
5d38 05        dec     b
5d39 13        inc     de
5d3a 13        inc     de
5d3b 0f        rrca    
5d3c 0e2d      ld      c,2dh
5d3e 05        dec     b
5d3f 12        ld      (de),a
5d40 12        ld      (de),a
5d41 21485d    ld      hl,5d48h
5d44 1e09      ld      e,09h
5d46 1882      jr      5ccah            ; (-7eh)	; errplt
5d48 0e0f      ld      c,0fh
5d4a 2d        dec     l
5d4b 0d        dec     c
5d4c 05        dec     b
5d4d 0d        dec     c
5d4e 0f        rrca    
5d4f 12        ld      (de),a
5d50 19        add     hl,de


; exstop
5d51 cd5e5d    call    5d5eh
5d54 f9        ld      sp,hl
5d55 3a497f    ld      a,(7f49h)
5d58 fe01      cp      01h
5d5a c0        ret     nz

5d5b c3eb57    jp      57ebh		; wboot


; 
5d5e 3a447d    ld      a,(7d44h)
5d61 a7        and     a
5d62 f5        push    af
5d63 af        xor     a
5d64 32fa22    ld      (22fah),a
5d67 32447d    ld      (7d44h),a
5d6a 324a7f    ld      (7f4ah),a
5d6d 3e38      ld      a,38h
5d6f 321623    ld      (2316h),a
5d72 210000    ld      hl,0000h
5d75 22ee22    ld      (22eeh),hl
5d78 224b7f    ld      (7f4bh),hl
5d7b 214f7f    ld      hl,7f4fh
5d7e 1606      ld      d,06h
5d80 cdc85e    call    5ec8h		; zerob
5d83 f1        pop     af
5d84 c8        ret     z

5d85 f5        push    af
5d86 215d7d    ld      hl,7d5dh
5d89 cd375c    call    5c37h		; rstat	
5d8c 2a457d    ld      hl,(7d45h)
5d8f f1        pop     af
5d90 c9        ret     

5d91 00        nop     
; Disassembly of the file "E:\mTUTOR\l4\ppttut-ppttut1.bin"
; 
; CPU Type: Z80
; 
; Created with dZ80 2.0
; 
; on Thursday, 30 of November 2017 at 06:41 PM
; 

; purgu
5d92 cdd15b    call    5bd1h		; findu
5d95 f8        ret     m

5d96 e5        push    hl
5d97 ed5b2f7f  ld      de,(7f2fh)
5d9b a7        and     a
5d9c ed52      sbc     hl,de
5d9e 44        ld      b,h
5d9f 4d        ld      c,l
5da0 e1        pop     hl
5da1 23        inc     hl
5da2 23        inc     hl
5da3 23        inc     hl
5da4 23        inc     hl
5da5 56        ld      d,(hl)
5da6 23        inc     hl
5da7 5e        ld      e,(hl)
5da8 eb        ex      de,hl
5da9 ed5b2f7f  ld      de,(7f2fh)
5dad 19        add     hl,de
5dae 222f7f    ld      (7f2fh),hl
5db1 cdae5e    call    5eaeh		; moveb
5db4 c9        ret     

; divbcde
5db5 7a        ld      a,d
5db6 2f        cpl     
5db7 57        ld      d,a
5db8 7b        ld      a,e
5db9 2f        cpl     
5dba 5f        ld      e,a
5dbb 13        inc     de
5dbc d5        push    de
5dbd 210000    ld      hl,0000h
5dc0 3e11      ld      a,11h
5dc2 e5        push    hl
5dc3 19        add     hl,de
5dc4 3001      jr      nc,5dc7h         ; (+01h)
5dc6 e3        ex      (sp),hl
5dc7 e1        pop     hl
5dc8 cb11      rl      c
5dca cb10      rl      b
5dcc cb15      rl      l
5dce cb14      rl      h
5dd0 3d        dec     a
5dd1 20ef      jr      nz,5dc2h         ; (-11h)
5dd3 d1        pop     de
5dd4 19        add     hl,de
5dd5 29        add     hl,hl
5dd6 210000    ld      hl,0000h
5dd9 d8        ret     c

5dda 23        inc     hl
5ddb c9        ret     


; muldehl
5ddc 7d        ld      a,l
5ddd 93        sub     e
5dde 7c        ld      a,h
5ddf 9a        sbc     a,d
5de0 f2e45d    jp      p,5de4h
5de3 eb        ex      de,hl
5de4 44        ld      b,h
5de5 4d        ld      c,l
5de6 210000    ld      hl,0000h
5de9 eb        ex      de,hl
5dea 78        ld      a,b
5deb b1        or      c
5dec c8        ret     z

5ded eb        ex      de,hl
5dee cb18      rr      b
5df0 cb19      rr      c
5df2 3001      jr      nc,5df5h         ; (+01h)
5df4 19        add     hl,de
5df5 eb        ex      de,hl
5df6 29        add     hl,hl
5df7 18f1      jr      5deah            ; (-0fh)


; comphl
5df9 7c        ld      a,h
5dfa 2f        cpl     
5dfb 67        ld      h,a
5dfc 7d        ld      a,l
5dfd 2f        cpl     
5dfe 6f        ld      l,a
5dff 23        inc     hl
5e00 c9        ret     


; abshl
5e01 7c        ld      a,h
5e02 a7        and     a
5e03 f0        ret     p

5e04 cdf95d    call    5df9h		; comphl
5e07 c9        ret     

; rshl
5e08 cb3c      srl     h
5e0a cb1d      rr      l
5e0c c9        ret     

; ferase
5e0d cd5e00    call    005eh
5e10 c9        ret     


; gnbyte
5e11 110100    ld      de,0001h
5e14 b7        or      a
5e15 c8        ret     z

5e16 1e02      ld      e,02h
5e18 3d        dec     a
5e19 c8        ret     z

5e1a 1e06      ld      e,06h
5e1c c9        ret     


; itoa
5e1d 7c        ld      a,h
5e1e a7        and     a
5e1f f5        push    af
5e20 f2265e    jp      p,5e26h
5e23 cdf95d    call    5df9h		; comphl
5e26 110000    ld      de,0000h
5e29 d5        push    de
5e2a 11537d    ld      de,7d53h
5e2d d5        push    de
5e2e 1807      jr      5e37h            ; (+07h)
5e30 2a537d    ld      hl,(7d53h)
5e33 7c        ld      a,h
5e34 b5        or      l
5e35 2826      jr      z,5e5dh          ; (+26h)
5e37 e5        push    hl
5e38 44        ld      b,h
5e39 4d        ld      c,l
5e3a 110a00    ld      de,000ah
5e3d cdb55d    call    5db5h		; divbcde
5e40 60        ld      h,b
5e41 69        ld      l,c
5e42 22537d    ld      (7d53h),hl
5e45 110a00    ld      de,000ah
5e48 cddc5d    call    5ddch		; muldehl
5e4b eb        ex      de,hl
5e4c cdf95d    call    5df9h		; comphl
5e4f d1        pop     de
5e50 19        add     hl,de
5e51 3e1b      ld      a,1bh
5e53 85        add     a,l
5e54 e1        pop     hl
5e55 2b        dec     hl
5e56 77        ld      (hl),a
5e57 d1        pop     de
5e58 13        inc     de
5e59 d5        push    de
5e5a e5        push    hl
5e5b 18d3      jr      5e30h            ; (-2dh)
5e5d e1        pop     hl
5e5e d1        pop     de
5e5f f1        pop     af
5e60 f0        ret     p

5e61 3e26      ld      a,26h
5e63 2b        dec     hl
5e64 77        ld      (hl),a
5e65 13        inc     de
5e66 c9        ret     


; cond
5e67 56        ld      d,(hl)
5e68 23        inc     hl
5e69 5e        ld      e,(hl)
5e6a eb        ex      de,hl
5e6b 224b7d    ld      (7d4bh),hl
5e6e eb        ex      de,hl
5e6f 23        inc     hl
5e70 4e        ld      c,(hl)
5e71 23        inc     hl
5e72 22677d    ld      (7d67h),hl
5e75 2600      ld      h,00h
5e77 69        ld      l,c
5e78 224d7d    ld      (7d4dh),hl
5e7b cde571    call    71e5h		; getvar
5e7e 7c        ld      a,h
5e7f a7        and     a
5e80 fa955e    jp      m,5e95h
5e83 2015      jr      nz,5e9ah         ; (+15h)
5e85 7d        ld      a,l
5e86 45        ld      b,l
5e87 2a4d7d    ld      hl,(7d4dh)
5e8a a7        and     a
5e8b fa9a5e    jp      m,5e9ah
5e8e 95        sub     l
5e8f f29d5e    jp      p,5e9dh
5e92 68        ld      l,b
5e93 1808      jr      5e9dh            ; (+08h)
5e95 21ffff    ld      hl,0ffffh
5e98 1803      jr      5e9dh            ; (+03h)
5e9a 2a4d7d    ld      hl,(7d4dh)
5e9d 23        inc     hl
5e9e 29        add     hl,hl
5e9f 44        ld      b,h
5ea0 4d        ld      c,l
5ea1 2a4b7d    ld      hl,(7d4bh)
5ea4 eb        ex      de,hl
5ea5 2a967d    ld      hl,(7d96h)
5ea8 19        add     hl,de
5ea9 09        add     hl,bc
5eaa 56        ld      d,(hl)
5eab 23        inc     hl
5eac 5e        ld      e,(hl)
5ead c9        ret     

; moveb
5eae 78        ld      a,b
5eaf b1        or      c
5eb0 c8        ret     z

5eb1 e5        push    hl
5eb2 cdf95d    call    5df9h		; comphl
5eb5 19        add     hl,de
5eb6 7c        ld      a,h
5eb7 a7        and     a
5eb8 e1        pop     hl
5eb9 fac05e    jp      m,5ec0h
5ebc eb        ex      de,hl
5ebd edb0      ldir    
5ebf c9        ret     

5ec0 09        add     hl,bc
5ec1 2b        dec     hl
5ec2 eb        ex      de,hl
5ec3 09        add     hl,bc
5ec4 2b        dec     hl
5ec5 edb8      lddr    
5ec7 c9        ret     


; zerob
5ec8 15        dec     d
5ec9 3600      ld      (hl),00h
5ecb c8        ret     z

5ecc 23        inc     hl
5ecd 18f9      jr      5ec8h            ; (-07h) ; zerob

; funku
5ecf 7c        ld      a,h
5ed0 a7        and     a
5ed1 203f      jr      nz,5f12h         ; (+3fh)
5ed3 45        ld      b,l
5ed4 21155f    ld      hl,5f15h
5ed7 23        inc     hl
5ed8 7e        ld      a,(hl)
5ed9 a7        and     a
5eda 2836      jr      z,5f12h          ; (+36h)
5edc b8        cp      b
5edd 20f8      jr      nz,5ed7h         ; (-08h)
5edf eb        ex      de,hl
5ee0 21165f    ld      hl,5f16h		; keyin               -----
5ee3 cdf95d    call    5df9h		; comphl
5ee6 19        add     hl,de
5ee7 eb        ex      de,hl
5ee8 219e7f    ld      hl,7f9eh
5eeb cb03      rlc     e
5eed 19        add     hl,de
5eee 7e        ld      a,(hl)
5eef 23        inc     hl
5ef0 46        ld      b,(hl)
5ef1 a7        and     a
5ef2 c0        ret     nz

5ef3 3aba7f    ld      a,(7fbah)
5ef6 47        ld      b,a
5ef7 21b87f    ld      hl,7fb8h
5efa be        cp      (hl)
5efb 2815      jr      z,5f12h          ; (+15h)
5efd 7b        ld      a,e
5efe a7        and     a
5eff 2808      jr      z,5f09h          ; (+08h)
5f01 fe04      cp      04h
5f03 2804      jr      z,5f09h          ; (+04h)
5f05 fe06      cp      06h
5f07 2009      jr      nz,5f12h         ; (+09h)
5f09 78        ld      a,b
5f0a f5        push    af
5f0b 3abb7f    ld      a,(7fbbh)
5f0e 47        ld      b,a
5f0f f1        pop     af
5f10 a7        and     a
5f11 c9        ret     

5f12 3eff      ld      a,0ffh
5f14 a7        and     a
5f15 c9        ret     


; keyin
5f16 1636      ld      d,36h
5f18 1838      jr      5f52h            ; (+38h)
5f1a 15        dec     d
5f1b 35        dec     (hl)
5f1c 1d        dec     e
5f1d 3d        dec     a
5f1e 19        add     hl,de
5f1f 39        add     hl,sp
5f20 1a        ld      a,(de)
5f21 3a003a    ld      a,(3a00h)
5f24 14        inc     d
5f25 23        inc     hl
5f26 e602      and     02h
5f28 c26f59    jp      nz,596fh		; halt
5f2b cd6d00    call    006dh		; r.input
5f2e 7c        ld      a,h
5f2f a7        and     a
5f30 fa515f    jp      m,5f51h		; keyneg
5f33 2005      jr      nz,5f3ah         ; (+05h)
5f35 3e3f      ld      a,3fh
5f37 bd        cp      l
5f38 2822      jr      z,5f5ch          ; (+22h)  ; sprint		
5f3a 3a967f    ld      a,(7f96h)
5f3d e640      and     40h
5f3f 2804      jr      z,5f45h          ; (+04h)   ; new out and in ports
5f41 cd5b00    call    005bh
5f44 c9        ret     

5f45 7c        ld      a,h
5f46 a7        and     a
5f47 2063      jr      nz,5fach         ; (+63h) ; keyput
5f49 3e3a      ld      a,3ah
5f4b bd        cp      l
5f4c ca0760    jp      z,6007h
5f4f 185b      jr      5fach            ; (+5bh) ; keyput


; keyneg
5f51 3aeb22    ld      a,(22ebh)
5f54 fe0c      cp      0ch
5f56 c8        ret     z

5f57 3ae622    ld      a,(22e6h)
5f5a a7        and     a
5f5b c0        ret     nz


-------------------------- new out and in ports

; sprint   - screen print?
5f5c 3e00      ld      a,00h
5f5e d3ab      out     (0abh),a
5f60 3e08      ld      a,08h
5f62 d3ab      out     (0abh),a
5f64 dbaa      in      a,(0aah)
5f66 fe37      cp      37h
5f68 c0        ret     nz

5f69 dbab      in      a,(0abh)
5f6b e601      and     01h
5f6d c0        ret     nz

5f6e 3a387f    ld      a,(7f38h)
5f71 47        ld      b,a
5f72 3a947d    ld      a,(7d94h)
5f75 4f        ld      c,a
5f76 c5        push    bc
5f77 3e01      ld      a,01h
5f79 32387f    ld      (7f38h),a
5f7c 3e3f      ld      a,3fh
5f7e 32947d    ld      (7d94h),a
5f81 2ae822    ld      hl,(22e8h)
5f84 116900    ld      de,0069h
5f87 19        add     hl,de
5f88 cd6a5a    call    5a6ah		; libload
5f8b c1        pop     bc
5f8c e5        push    hl
5f8d f5        push    af
5f8e 78        ld      a,b
5f8f 32387f    ld      (7f38h),a
5f92 79        ld      a,c
5f93 32947d    ld      (7d94h),a
5f96 cd435a    call    5a43h		; rd.tbl
5f99 f1        pop     af
5f9a e1        pop     hl
5f9b c0        ret     nz

5f9c 11a15f    ld      de,5fa1h
5f9f d5        push    de
5fa0 e9        jp      (hl)
5fa1 f5        push    af
5fa2 cd2455    call    5524h		; d.read
5fa5 f1        pop     af
5fa6 c0        ret     nz

5fa7 213a00    ld      hl,003ah
5faa 185b      jr      6007h            ; (+5bh)

; keyput
5fac eb        ex      de,hl
5fad 21a07d    ld      hl,7da0h
5fb0 7e        ld      a,(hl)
5fb1 fe18      cp      18h
5fb3 f0        ret     p

5fb4 0600      ld      b,00h
5fb6 4f        ld      c,a
5fb7 34        inc     (hl)
5fb8 34        inc     (hl)
5fb9 21a17d    ld      hl,7da1h
5fbc 09        add     hl,bc
5fbd 73        ld      (hl),e
5fbe 23        inc     hl
5fbf 72        ld      (hl),d
5fc0 c9        ret     

; getkey
5fc1 cd235f    call    5f23h
5fc4 21a07d    ld      hl,7da0h
5fc7 7e        ld      a,(hl)
5fc8 a7        and     a
5fc9 2007      jr      nz,5fd2h         ; (+07h)
5fcb 21ffff    ld      hl,0ffffh
5fce 22757d    ld      (7d75h),hl
5fd1 c9        ret     

5fd2 35        dec     (hl)
5fd3 35        dec     (hl)
5fd4 2aa17d    ld      hl,(7da1h)
5fd7 e5        push    hl
5fd8 11a37d    ld      de,7da3h
5fdb 21a17d    ld      hl,7da1h
5fde 011600    ld      bc,0016h
5fe1 cdae5e    call    5eaeh		; moveb
5fe4 e1        pop     hl
5fe5 22777d    ld      (7d77h),hl
5fe8 7c        ld      a,h
5fe9 e67f      and     7fh
5feb 67        ld      h,a
5fec 22757d    ld      (7d75h),hl
5fef 3eff      ld      a,0ffh
5ff1 a7        and     a
5ff2 c9        ret     


; clrkey
5ff3 af        xor     a
5ff4 32a07d    ld      (7da0h),a
5ff7 21ffff    ld      hl,0ffffh
5ffa 22757d    ld      (7d75h),hl
5ffd cd6d00    call    006dh
6000 7c        ld      a,h
6001 a7        and     a
6002 c0        ret     nz

6003 3e3a      ld      a,3ah
6005 bd        cp      l
6006 c0        ret     nz

6007 cd5b00    call    005bh
600a 210500    ld      hl,0005h
600d 3a4a7d    ld      a,(7d4ah)
6010 a7        and     a
6011 2003      jr      nz,6016h         ; (+03h)
6013 210300    ld      hl,0003h
6016 227b7d    ld      (7d7bh),hl
6019 c3515d    jp      5d51h		; exstop


; buffin
601c 5e        ld      e,(hl)
601d 23        inc     hl
601e 56        ld      d,(hl)
601f 23        inc     hl
6020 4e        ld      c,(hl)
6021 23        inc     hl
6022 46        ld      b,(hl)
6023 eb        ex      de,hl
6024 e5        push    hl
6025 a7        and     a
6026 ed42      sbc     hl,bc
6028 e1        pop     hl
6029 2004      jr      nz,602fh         ; (+04h)
602b 3eff      ld      a,0ffh
602d a7        and     a
602e c9        ret     

602f 03        inc     bc
6030 eb        ex      de,hl
6031 70        ld      (hl),b
6032 2b        dec     hl
6033 71        ld      (hl),c
6034 23        inc     hl
6035 23        inc     hl
6036 4e        ld      c,(hl)
6037 23        inc     hl
6038 46        ld      b,(hl)
6039 c5        push    bc
603a 03        inc     bc
603b eb        ex      de,hl
603c a7        and     a
603d ed42      sbc     hl,bc
603f 2002      jr      nz,6043h         ; (+02h)
6041 44        ld      b,h
6042 4d        ld      c,l
6043 eb        ex      de,hl
6044 70        ld      (hl),b
6045 2b        dec     hl
6046 71        ld      (hl),c
6047 c1        pop     bc
6048 23        inc     hl
6049 23        inc     hl
604a 23        inc     hl
604b 23        inc     hl
604c 09        add     hl,bc
604d 77        ld      (hl),a
604e af        xor     a
604f c9        ret     


; xplato
6050 3a967f    ld      a,(7f96h)
6053 47        ld      b,a
6054 e608      and     08h
6056 c0        ret     nz

6057 78        ld      a,b
6058 e640      and     40h
605a 2007      jr      nz,6063h         ; (+07h)
605c 3a497f    ld      a,(7f49h)
605f fe01      cp      01h
6061 2832      jr      z,6095h          ; (+32h)
6063 3afc22    ld      a,(22fch); M.ENAB
6066 e628      and     28h
6068 f5        push    af
6069 21537d    ld      hl,7d53h	; save to loc
606c cd065c    call    5c06h	; sstat
606f 215d7d    ld      hl,7d5dh	; restore from loc
6072 cd375c    call    5c37h	; rstat
6075 cd7900    call    0079h	; r.exec
6078 215d7d    ld      hl,7d5dh	; save to loc
607b cd065c    call    5c06h	; sstat
607e 21537d    ld      hl,7d53h	; restore from loc
6081 cd375c    call    5c37h	; rstat
6084 f3        di      
6085 3afc22    ld      a,(22fch)
6088 e6d7      and     0d7h
608a 6f        ld      l,a
608b f1        pop     af
608c b5        or      l
608d 6f        ld      l,a
608e 2604      ld      h,04h
6090 cd7000    call    0070h	; r.ssf
6093 fb        ei      
6094 c9        ret     

6095 3af222    ld      a,(22f2h)
6098 a7        and     a
6099 c8        ret     z

609a cd7c00    call    007ch
609d 18f6      jr      6095h            ; (-0ah)
609f 00        nop     
60a0 00        nop     
60a1 00        nop     
60a2 00        nop     
60a3 00        nop     








; Disassembly of the file "E:\mTUTOR\l4\ppttut-ppttut2.bin"
; 
; CPU Type: Z80
; 
; Created with dZ80 2.0
; 
; on Thursday, 30 of November 2017 at 06:46 PM
; 
;		MTUTOR command interpreter
;
;; mtutor command interp table interp
;

          title  process next command
*
*
*
*         proc               process next command
*         on entry - upnt = address of previous command
*                    b,c  = bias to next command
*         on exit  - upnt = address of current command
*                    h,l  = *gloc* = upnt+1

; proc
60a4 2a987d    ld      hl,(7d98h)
60a7 09        add     hl,bc
60a8 22987d    ld      (7d98h),hl
60ab 7e        ld      a,(hl)
60ac 323e7d    ld      (7d3eh),a
60af 23        inc     hl
60b0 e5        push    hl
60b1 07        rlca    
60b2 4f        ld      c,a
60b3 0600      ld      b,00h
60b5 21c260    ld      hl,60c2h
60b8 09        add     hl,bc
60b9 4e        ld      c,(hl)
60ba 23        inc     hl
60bb 46        ld      b,(hl)
60bc e1        pop     hl
60bd 22677d    ld      (7d67h),hl
60c0 c5        push    bc
60c1 c9        ret     
    ; address				; command number 	; command
60c2 c9        ret     
60c3 63        ld      h,e		0				finisx

60c4 bd        cp      l
60c5 62        ld      h,d		1				writecmd

60c6 77        ld      (hl),a
60c7 66        ld      h,(hl)	2				calccmd

60c8 0f        rrca    
60c9 63        ld      h,e		3				atcmd


60ca 51        ld      d,c
60cb 67        ld      h,a		4				branch1

60cc 61        ld      h,c
60cd 67        ld      h,a		5				branchcond

60ce dd65      ld      ixh,ixl	6				erasecmd
60d0 8c        adc     a,h
60d1 66        ld      h,(hl)	7				modecmd

60d2 76        halt    
60d3 67        ld      h,a		8				drawcmd

60d4 d9        exx     
60d5 67        ld      h,a		9				showacmd

60d6 0168						10				showcmd

	 fa    
60d9 68        ld      l,b		11				pausecmd

60da c8        ret     z
60db 64        ld      h,h		12				docmd

60dc b4        or      h
60dd 64        ld      h,h		13 - 			docond

60de 61        ld      h,c
60df 64        ld      h,h		14				calcscmd

60e0 bc        cp      h
60e1 63        ld      h,e		15				returncmd

60e2 fd62      ld      iyh,d	16				embed1cmd

60e4 0163						17				embed2cmd
	 85    ld      bc,8563h
60e7 63        ld      h,e		18				writeccmd

60e8 aa        xor     d
60e9 63        ld      h,e		19				writeccmd2

60ea a8        xor     b
60eb 5c        ld      e,h		20				errorx

60ec a8        xor     b
60ed 5c        ld      e,h		21				errorx

60ee a8        xor     b
60ef 5c        ld      e,h		22				errorx

60f0 a8        xor     b
60f1 5c        ld      e,h		23				errorx

60f2 7d        ld      a,l
60f3 66        ld      h,(hl)	24				modeccmd

60f4 40        ld      b,b
60f5 65        ld      h,l		25				gotocmd

60f6 33        inc     sp
60f7 65        ld      h,l		26				gotoccmd

60f8 1b        dec     de
60f9 68        ld      l,b		27				ccodecmd

60fa 6a        ld      l,d
60fb 65        ld      h,l		28				jumpncmd

60fc 5d        ld      e,l
60fd 65        ld      h,l		29				jumpnccmd

60fe 2f        cpl     
60ff 68        ld      l,b		30				beepcmd

6100 1a        ld      a,(de)
6101 6a        ld      l,d		31				doto0cmd

6102 25        dec     h
6103 6a        ld      l,d		32				doto1cmd

6104 46        ld      b,(hl)	33
6105 43        ld      b,e


6106 49        ld      c,c		34
6107 43        ld      b,e


6108 c5        push    bc
6109 66        ld      h,(hl)	35				blockcmd

610a 39        add     hl,sp
610b 63        ld      h,e		36				atnmfcmd

610c 44        ld      b,h
610d 63        ld      h,e		37				atnmccmd

610e 35        dec     (hl)
610f 68        ld      l,b		38				funkeycmd

6110 df        rst     18h
6111 62        ld      h,d		39				write0cmd

6112 24        inc     h
6113 63        ld      h,e		40				at0cmd

6114 5d        ld      e,l
6115 66        ld      h,(hl)	41				erase2cmd

6116 4c        ld      c,h
6117 66        ld      h,(hl)	42				erasfcmd

6118 95        sub     l
6119 67        ld      h,a		43				drawccmd

611a ae        xor     (hl)
611b 67        ld      h,a		44				drawlcmd

611c a3        and     e
611d 65        ld      h,l		45				xovcmd

611e 1667      ld      d,67h	46				enablecmd

6120 a1        and     c		
6121 66        ld      h,(hl)	47				fcolor

6122 c266						48				bcolor

	 18    jp      nz,1866h
6125 6b        ld      l,e 		49				noargscmd

6126 73        ld      (hl),e
6127 68        ld      l,b		50				basecmd

6128 6a        ld      l,d
6129 65        ld      h,l		51				jumpcmd

612a 5d        ld      e,l
612b 65        ld      h,l		52				jumpccmd
612c a8        xor     b
612d 5c        ld      e,h		53				errorx

612e 42        ld      b,d
612f 67        ld      h,a		54				rotatecmd

6130 33        inc     sp
6131 67        ld      h,a		55				sizecmd

6132 4f        ld      c,a
6133 64        ld      h,h		56				calcccmd

6134 a8        xor     b
6135 5c        ld      e,h		56				errorx

6136 d5        push    de
6137 68        ld      l,b		57				tpausecmd

6138 9a        sbc     a,d
6139 6a        ld      l,d		58				inhibitcmd

613a a3        and     e
613b 6a        ld      l,d		59				forcecmd

613c ec6a						60				lvarscmd

	 a8    call    pe,0a86ah
613f 5c        ld      e,h		61				errorx

6140 186b      jr      61adh	62				noargs1cmd
6142 bc        cp      h
6143 63        ld      h,e		63				return1cmd

6144 a8        xor     b
6145 5c        ld      e,h		64				errorx

6146 a8        xor     b
6147 5c        ld      e,h		65				errorx

6148 c9        ret     
6149 68        ld      l,b		66				getkeycmd

614a cf        rst     08h
614b 68        ld      l,b		67				clrkeycmd

614c ac        xor     h
614d 6a        ld      l,d		68				specscmd

614e cb6a      bit     5,d		69				allowcmd
6150 00        nop     
6151 00        nop   


; pincg  
6152 2a677d    ld      hl,(7d67h)
6155 22987d    ld      (7d98h),hl



; pinc0
6158 010000    ld      bc,0000h
615b 180d      jr      616ah            ; (+0dh)  ; proc0

; pinc1
615d 010100    ld      bc,0001h
6160 1808      jr      616ah            ; (+08h)  ; proc0

; pinc2
6162 010200    ld      bc,0002h
6165 1803      jr      616ah            ; (+03h)  ; proc0

; pinc3
6167 010300    ld      bc,0003h


; proc0
616a 3a4a7f    ld      a,(7f4ah)
616d a7        and     a
616e c2b868    jp      nz,68b8h
6171 c3a460    jp      60a4h 			; proc

; bounds
6174 2a867d    ld      hl,(7d86h)
6177 7c        ld      a,h
6178 a7        and     a
6179 faa85c    jp      m,5ca8h		; errorx
617c 2a847d    ld      hl,(7d84h)
617f e5        push    hl
6180 ed5bfe7f  ld      de,(7ffeh)
6184 a7        and     a
6185 ed52      sbc     hl,de
6187 d1        pop     de
6188 7c        ld      a,h
6189 a7        and     a
618a f29961    jp      p,6199h
618d eb        ex      de,hl
618e 2a867d    ld      hl,(7d86h)
6191 2b        dec     hl
6192 19        add     hl,de
6193 7c        ld      a,h
6194 a7        and     a
6195 f8        ret     m

6196 c3a85c    jp      5ca8h		; errorx
6199 2a2d7f    ld      hl,(7f2dh)
619c cdf95d    call    5df9h		; comphl
619f 19        add     hl,de
61a0 18eb      jr      618dh            ; (-15h)

; dispsav
61a2 cd146c    call    6c14h		; iformat   
61a5 3adc7d    ld      a,(7ddch)
61a8 3d        dec     a
61a9 f8        ret     m

61aa 2a9a7d    ld      hl,(7d9ah)
61ad cdf95d    call    5df9h		; comphl
61b0 eb        ex      de,hl
61b1 2a987d    ld      hl,(7d98h)
61b4 19        add     hl,de
61b5 22d37d    ld      (7dd3h),hl
61b8 3a947d    ld      a,(7d94h)
61bb 32d57d    ld      (7dd5h),a
61be 3a387f    ld      a,(7f38h)
61c1 32d77d    ld      (7dd7h),a
61c4 3a487f    ld      a,(7f48h)
61c7 32d87d    ld      (7dd8h),a
61ca 3ac37f    ld      a,(7fc3h)
61cd 32027f    ld      (7f02h),a
61d0 cd4f00    call    004fh
61d3 22cf7d    ld      (7dcfh),hl
61d6 cd5200    call    0052h
61d9 22d17d    ld      (7dd1h),hl
61dc af        xor     a
61dd 32db7d    ld      (7ddbh),a
61e0 2a3a7d    ld      hl,(7d3ah)
61e3 22d97d    ld      (7dd9h),hl
61e6 2a3c7d    ld      hl,(7d3ch)
61e9 22f27e    ld      (7ef2h),hl
61ec c9        ret     

; autoer
61ed cda459    call    59a4h		; uload
61f0 2a987d    ld      hl,(7d98h)
61f3 22677d    ld      (7d67h),hl
61f6 cd146c    call    6c14h		; iformat   
61f9 3adb7d    ld      a,(7ddbh)
61fc 32477d    ld      (7d47h),a
61ff 2a677d    ld      hl,(7d67h)
6202 7e        ld      a,(hl)
6203 23        inc     hl
6204 fe2d      cp      2dh
6206 caa365    jp      z,65a3h


; autoelp
6209 2a677d    ld      hl,(7d67h)
620c 7e        ld      a,(hl)
620d 23        inc     hl
620e 22677d    ld      (7d67h),hl
6211 22987d    ld      (7d98h),hl
6214 fe03      cp      03h
6216 ca0f63    jp      z,630fh
6219 fe07      cp      07h
621b ca8c66    jp      z,668ch
621e fe24      cp      24h
6220 ca3963    jp      z,6339h
6223 fe25      cp      25h
6225 ca4463    jp      z,6344h
6228 fe28      cp      28h
622a ca2463    jp      z,6324h
622d fe36      cp      36h
622f ca4267    jp      z,6742h
6232 fe37      cp      37h
6234 ca3367    jp      z,6733h
6237 fe01      cp      01h
6239 cabd62    jp      z,62bdh
623c fe09      cp      09h
623e cad967    jp      z,67d9h
6241 fe0a      cp      0ah
6243 ca0168    jp      z,6801h
6246 fe27      cp      27h
6248 cadf62    jp      z,62dfh
624b fe10      cp      10h
624d cafd62    jp      z,62fdh
6250 fe2d      cp      2dh
6252 2007      jr      nz,625bh         ; (+07h)
6254 3a477d    ld      a,(7d47h)
6257 a7        and     a
6258 c2a365    jp      nz,65a3h
625b af        xor     a
625c 32dc7d    ld      (7ddch),a
625f 32477d    ld      (7d47h),a
6262 cd1364    call    6413h		; unjoin
6265 cda459    call    59a4h		; uload
6268 3e05      ld      a,05h
626a 32ef7f    ld      (7fefh),a
626d 3e2a      ld      a,2ah
626f c3a865    jp      65a8h		; execv

; autoelg
6272 3adc7d    ld      a,(7ddch)
6275 a7        and     a
6276 f25261    jp      p,6152h		; pincg  
6279 3a477d    ld      a,(7d47h)
627c a7        and     a
627d 208a      jr      nz,6209h         ; (-76h) ; autoelp
627f 2a677d    ld      hl,(7d67h)
6282 7e        ld      a,(hl)
6283 fe10      cp      10h
6285 2876      jr      z,62fdh          ; (+76h)
6287 18d2      jr      625bh            ; (-2eh)
6289 e5        push    hl
628a 217f7d    ld      hl,7d7fh
628d 35        dec     (hl)
628e f29362    jp      p,6293h
6291 3605      ld      (hl),05h
6293 d5        push    de
6294 cd235f    call    5f23h
6297 d1        pop     de
6298 e1        pop     hl
6299 c9        ret     

629a 21ffff    ld      hl,0ffffh
629d 22797d    ld      (7d79h),hl
62a0 c9        ret     

62a1 210000    ld      hl,0000h
62a4 18f7      jr      629dh            ; (-09h)
62a6 210100    ld      hl,0001h
62a9 18f2      jr      629dh            ; (-0eh)
62ab cd9a62    call    629ah
62ae c35261    jp      6152h		; pincg  
62b1 cda162    call    62a1h
62b4 c35261    jp      6152h		; pincg  
62b7 cda662    call    62a6h
62ba c35261    jp      6152h		; pincg  


; writecmd
62bd 46        ld      b,(hl)
62be 23        inc     hl
62bf 4e        ld      c,(hl)
62c0 23        inc     hl
62c1 56        ld      d,(hl)
62c2 23        inc     hl
62c3 5e        ld      e,(hl)
62c4 23        inc     hl
62c5 22677d    ld      (7d67h),hl
62c8 eb        ex      de,hl
62c9 22fb7c    ld      (7cfbh),hl
62cc 2a967d    ld      hl,(7d96h)
62cf 09        add     hl,bc
62d0 22f97c    ld      (7cf9h),hl
62d3 3a477d    ld      a,(7d47h)
62d6 a7        and     a
62d7 cca261    call    z,61a2h		; dispsav
62da cd3a6c    call    6c3ah		; format
62dd 1893      jr      6272h            ; (-6dh) ; autoelg

; write0cmd
62df 46        ld      b,(hl)
62e0 23        inc     hl
62e1 4e        ld      c,(hl)
62e2 23        inc     hl
62e3 22677d    ld      (7d67h),hl
62e6 2a967d    ld      hl,(7d96h)
62e9 09        add     hl,bc
62ea 22f97c    ld      (7cf9h),hl
62ed 3a477d    ld      a,(7d47h)
62f0 a7        and     a
62f1 cca261    call    z,61a2h		; dispsav
62f4 2af97c    ld      hl,(7cf9h)
62f7 cd4900    call    0049h
62fa c37262    jp      6272h		; autoelg

; embed1cmd
62fd 3e01      ld      a,01h
62ff 1801      jr      6302h            ; (+01h)

; embed2cmd
6301 af        xor     a
6302 32477d    ld      (7d47h),a
6305 3adc7d    ld      a,(7ddch)
6308 a7        and     a
6309 f25d61    jp      p,615dh		; pinc1
630c c30962    jp      6209h		; autoelp

; atcmd
630f cde571    call    71e5h		; getvar
6312 223a7d    ld      (7d3ah),hl
6315 cd5500    call    0055h
6318 cde571    call    71e5h		; getvar
631b 223c7d    ld      (7d3ch),hl
631e cd5800    call    0058h
6321 c35261    jp      6152h		; pincg

; at0cmd  
6324 cd4f63    call    634fh		; rctoxy
6327 223c7d    ld      (7d3ch),hl
632a cd5800    call    0058h
632d 2a537d    ld      hl,(7d53h)
6330 223a7d    ld      (7d3ah),hl
6333 cd5500    call    0055h
6336 c35261    jp      6152h		; pincg

; atnmfcmd  
6339 cde571    call    71e5h		; getvar
633c cd5500    call    0055h
633f cde571    call    71e5h		; getvar
6342 18da      jr      631eh            ; (-26h)

atnmccmd
6344 cd4f63    call    634fh		; rctoxy
6347 cd5800    call    0058h
634a 2a537d    ld      hl,(7d53h)
634d 18e4      jr      6333h            ; (-1ch)

; rctoxy
634f cde571    call    71e5h		; getvar

; rctoxyn
6352 e5        push    hl
6353 cd7a63    call    637ah		; zerof
6356 116400    ld      de,0064h
6359 cddc5d    call    5ddch		; muldehl
635c e1        pop     hl
635d e5        push    hl
635e eb        ex      de,hl
635f cdf95d    call    5df9h		; comphl
6362 19        add     hl,de
6363 2b        dec     hl
6364 29        add     hl,hl
6365 29        add     hl,hl
6366 29        add     hl,hl
6367 22537d    ld      (7d53h),hl
636a e1        pop     hl
636b cd7a63    call    637ah		; zerof
636e 29        add     hl,hl
636f 29        add     hl,hl
6370 29        add     hl,hl
6371 29        add     hl,hl
6372 cdf95d    call    5df9h		; comphl
6375 110002    ld      de,0200h
6378 19        add     hl,de
6379 c9        ret     

637a 44        ld      b,h
637b 4d        ld      c,l
637c 116400    ld      de,0064h
637f cdb55d    call    5db5h		; divbcde
6382 60        ld      h,b
6383 69        ld      l,c
6384 c9        ret     


; writeccmd
6385 cd675e    call    5e67h		; cond
6388 2a967d    ld      hl,(7d96h)
638b e5        push    hl
638c 19        add     hl,de
638d 22987d    ld      (7d98h),hl
6390 e1        pop     hl
6391 cdf95d    call    5df9h		; comphl
6394 eb        ex      de,hl
6395 2a677d    ld      hl,(7d67h)
6398 19        add     hl,de
6399 22487d    ld      (7d48h),hl
639c cda261    call    61a2h		; dispsav
639f 3e01      ld      a,01h
63a1 32477d    ld      (7d47h),a
63a4 32db7d    ld      (7ddbh),a
63a7 c35861    jp      6158h		; pinc0

; writeccmd2
63aa 2a487d    ld      hl,(7d48h)
63ad eb        ex      de,hl
63ae 2a967d    ld      hl,(7d96h)
63b1 19        add     hl,de
63b2 22987d    ld      (7d98h),hl
63b5 af        xor     a
63b6 32477d    ld      (7d47h),a
63b9 c35861    jp      6158h		; pinc0

; return1cmd
; returncmd
63bc 2a297f    ld      hl,(7f29h)
63bf 7c        ld      a,h
63c0 b5        or      l
63c1 2024      jr      nz,63e7h 	        ; (+24h)
63c3 cd4b6b    call    6b4bh		; abdestr
63c6 c35261    jp      6152h		; pincg  


; finisx
63c9 2a297f    ld      hl,(7f29h)
63cc 7c        ld      a,h
63cd b5        or      l
63ce 2017      jr      nz,63e7h         ; (+17h)
63d0 3a9d7f    ld      a,(7f9dh)
63d3 a7        and     a
63d4 2808      jr      z,63deh          ; (+08h)
63d6 3e01      ld      a,01h
63d8 f5        push    af
63d9 3e16      ld      a,16h
63db c3a865    jp      65a8h		; execv
63de 210200    ld      hl,0002h
63e1 227b7d    ld      (7d7bh),hl
63e4 c3515d    jp      5d51h		; exstop
63e7 3a9a7f    ld      a,(7f9ah)
63ea b7        or      a
63eb 2020      jr      nz,640dh         ; (+20h)
63ed 3a387f    ld      a,(7f38h)
63f0 fe01      cp      01h
63f2 2819      jr      z,640dh          ; (+19h)
63f4 2a967d    ld      hl,(7d96h)
63f7 110c00    ld      de,000ch
63fa 19        add     hl,de
63fb 7e        ld      a,(hl)
63fc 57        ld      d,a
63fd 23        inc     hl
63fe 7e        ld      a,(hl)
63ff 5f        ld      e,a
6400 b7        or      a
6401 280a      jr      z,640dh          ; (+0ah)
6403 2a967d    ld      hl,(7d96h)
6406 19        add     hl,de
6407 22987d    ld      (7d98h),hl
640a c35861    jp      6158h		; pinc0
640d cd1364    call    6413h		; unjoin
6410 c39759    jp      5997h		; uexec

; unjoin
6413 2a297f    ld      hl,(7f29h)
6416 222b7f    ld      (7f2bh),hl
6419 222d7f    ld      (7f2dh),hl
641c 5e        ld      e,(hl)
641d 23        inc     hl
641e 56        ld      d,(hl)
641f 23        inc     hl
6420 eb        ex      de,hl
6421 22297f    ld      (7f29h),hl
6424 eb        ex      de,hl
6425 7e        ld      a,(hl)
6426 32387f    ld      (7f38h),a
6429 47        ld      b,a
642a e5        push    hl
642b cd435a    call    5a43h		; rd.tbl
642e e1        pop     hl
642f 23        inc     hl
6430 7e        ld      a,(hl)
6431 32947d    ld      (7d94h),a
6434 23        inc     hl
6435 56        ld      d,(hl)
6436 23        inc     hl
6437 5e        ld      e,(hl)
6438 eb        ex      de,hl
6439 229c7d    ld      (7d9ch),hl
643c eb        ex      de,hl
643d 23        inc     hl
643e 56        ld      d,(hl)
643f 23        inc     hl
6440 5e        ld      e,(hl)
6441 eb        ex      de,hl
6442 22277f    ld      (7f27h),hl
6445 eb        ex      de,hl
6446 23        inc     hl
6447 56        ld      d,(hl)
6448 23        inc     hl
6449 5e        ld      e,(hl)
644a eb        ex      de,hl
644b 22337f    ld      (7f33h),hl
644e c9        ret     


; calcccmd
644f cd675e    call    5e67h		; cond
6452 7a        ld      a,d
6453 b3        or      e
6454 ca5261    jp      z,6152h		; pincg  
6457 2a677d    ld      hl,(7d67h)
645a e5        push    hl
645b 3e01      ld      a,01h
645d b7        or      a
645e f5        push    af
645f 1809      jr      646ah            ; (+09h)


; calcscmd
6461 cd675e    call    5e67h		; cond
6464 7a        ld      a,d
6465 b3        or      e
6466 2846      jr      z,64aeh          ; (+46h)
6468 af        xor     a
6469 f5        push    af
646a d5        push    de
646b 2a967d    ld      hl,(7d96h)
646e e5        push    hl
646f cdf95d    call    5df9h		; comphl
6472 eb        ex      de,hl
6473 2a677d    ld      hl,(7d67h)
6476 19        add     hl,de
6477 22737d    ld      (7d73h),hl
647a e1        pop     hl
647b d1        pop     de
647c 19        add     hl,de
647d 22677d    ld      (7d67h),hl
6480 cde571    call    71e5h		; getvar
6483 f1        pop     af
6484 2807      jr      z,648dh          ; (+07h)
6486 e1        pop     hl
6487 22677d    ld      (7d67h),hl
648a c35261    jp      6152h		; pincg  
648d 3a6b7d    ld      a,(7d6bh)
6490 f5        push    af
6491 e5        push    hl
6492 cd4377    call    7743h		; fpusha
6495 2a737d    ld      hl,(7d73h)
6498 eb        ex      de,hl
6499 2a967d    ld      hl,(7d96h)
649c 19        add     hl,de
649d 22677d    ld      (7d67h),hl
64a0 cde571    call    71e5h		; getvar
64a3 cd2577    call    7725h		; fpopa
64a6 e1        pop     hl
64a7 f1        pop     af
64a8 cd9571    call    7195h		; putvar
64ab c35261    jp      6152h		; pincg  
64ae cde571    call    71e5h		; getvar
64b1 c35261    jp      6152h		; pincg  



; docond
64b4 cd675e    call    5e67h		; cond
64b7 2a677d    ld      hl,(7d67h)
64ba 22987d    ld      (7d98h),hl
64bd 7b        ld      a,e
64be a7        and     a
64bf ca5861    jp      z,6158h		; pinc0
64c2 3d        dec     a
64c3 cac963    jp      z,63c9h		; finisx
64c6 180a      jr      64d2h            ; (+0ah)

; docmd
64c8 7e        ld      a,(hl)
64c9 5f        ld      e,a
64ca 3d        dec     a
64cb cac963    jp      z,63c9h		; finisx
64ce 23        inc     hl
64cf 22987d    ld      (7d98h),hl

;
64d2 d5        push    de
64d3 cde764    call    64e7h		; join
64d6 2a2b7f    ld      hl,(7f2bh)
64d9 22277f    ld      (7f27h),hl
64dc 22337f    ld      (7f33h),hl
64df d1        pop     de
64e0 7b        ld      a,e
64e1 32947d    ld      (7d94h),a
64e4 c39759    jp      5997h		; uexec

; join
64e7 210a00    ld      hl,000ah		
64ea cd865b    call    5b86h		; getmem
64ed 2a297f    ld      hl,(7f29h)
64f0 eb        ex      de,hl
64f1 2a2b7f    ld      hl,(7f2bh)
64f4 22297f    ld      (7f29h),hl
64f7 73        ld      (hl),e
64f8 23        inc     hl
64f9 72        ld      (hl),d
64fa 23        inc     hl
64fb e5        push    hl
64fc 2a987d    ld      hl,(7d98h)
64ff eb        ex      de,hl
6500 2a9a7d    ld      hl,(7d9ah)
6503 cdf95d    call    5df9h		; comphl
6506 19        add     hl,de
6507 eb        ex      de,hl
6508 e1        pop     hl
6509 3a387f    ld      a,(7f38h)
650c 77        ld      (hl),a
650d 23        inc     hl
650e 3a947d    ld      a,(7d94h)
6511 77        ld      (hl),a
6512 23        inc     hl
6513 72        ld      (hl),d
6514 23        inc     hl
6515 73        ld      (hl),e
6516 23        inc     hl
6517 eb        ex      de,hl
6518 2a277f    ld      hl,(7f27h)
651b eb        ex      de,hl
651c 72        ld      (hl),d
651d 23        inc     hl
651e 73        ld      (hl),e
651f 23        inc     hl
6520 eb        ex      de,hl
6521 2a337f    ld      hl,(7f33h)
6524 eb        ex      de,hl
6525 72        ld      (hl),d
6526 23        inc     hl
6527 73        ld      (hl),e
6528 23        inc     hl
6529 222b7f    ld      (7f2bh),hl
652c 210000    ld      hl,0000h
652f 229c7d    ld      (7d9ch),hl
6532 c9        ret     

; gotoccmd
6533 cd8962    call    6289h
6536 cd675e    call    5e67h		; cond
6539 7b        ld      a,e
653a a7        and     a
653b ca5261    jp      z,6152h		; pincg  
653e 1807      jr      6547h            ; (+07h)

; gotocmd
6540 cd8962    call    6289h
6543 7e        ld      a,(hl)
6544 1600      ld      d,00h
6546 5f        ld      e,a
6547 1d        dec     e
6548 cac963    jp      z,63c9h		; finisx
654b 32947d    ld      (7d94h),a
654e 210000    ld      hl,0000h
6551 229c7d    ld      (7d9ch),hl
6554 2a337f    ld      hl,(7f33h)
6557 222b7f    ld      (7f2bh),hl
655a c39759    jp      5997h		; uexec

; jumpccmd
; jumpnccmd
655d cd8962    call    6289h
6560 cd675e    call    5e67h		; cond
6563 7b        ld      a,e
6564 a7        and     a
6565 ca5261    jp      z,6152h		; pincg  
6568 1807      jr      6571h            ; (+07h)

; jumpcmd
; jumpncmd
656a cd8962    call    6289h
656d 7e        ld      a,(hl)
656e 1600      ld      d,00h
6570 5f        ld      e,a
6571 1d        dec     e
6572 caa85c    jp      z,5ca8h		; errorx
6575 32947d    ld      (7d94h),a
6578 3a497f    ld      a,(7f49h)
657b a7        and     a
657c c4115a    call    nz,5a11h		; convert
657f 3a3e7d    ld      a,(7d3eh)
6582 fe1e      cp      1eh
6584 fa9765    jp      m,6597h
6587 cda459    call    59a4h		; uload
658a 210000    ld      hl,0000h
658d 229c7d    ld      (7d9ch),hl
6590 3e03      ld      a,03h
6592 f5        push    af
6593 3e16      ld      a,16h
6595 1811      jr      65a8h            ; (+11h) ; execv
6597 cd0759    call    5907h		; stkinit
659a 210000    ld      hl,0000h
659d 229c7d    ld      (7d9ch),hl
65a0 c39759    jp      5997h		; uexec

; xovcmd
65a3 7e        ld      a,(hl)
65a4 23        inc     hl
65a5 22987d    ld      (7d98h),hl

; execv
65a8 323f7d    ld      (7d3fh),a
65ab 3a387f    ld      a,(7f38h)
65ae 67        ld      h,a
65af 3a947d    ld      a,(7d94h)
65b2 6f        ld      l,a
65b3 e5        push    hl
65b4 cdbf5b    call    5bbfh		; pin
65b7 cde764    call    64e7h		; join
65ba 3a3f7d    ld      a,(7d3fh)
65bd 32947d    ld      (7d94h),a
65c0 3e01      ld      a,01h
65c2 32387f    ld      (7f38h),a
65c5 cda459    call    59a4h		; uload
65c8 e1        pop     hl
65c9 cdc85b    call    5bc8h		; unpin
65cc 2a987d    ld      hl,(7d98h)
65cf e5        push    hl
65d0 23        inc     hl
65d1 5e        ld      e,(hl)
65d2 23        inc     hl
65d3 56        ld      d,(hl)
65d4 cd1353    call    5313h		; v.reloc
65d7 cd1364    call    6413h		; unjoin
65da c3a459    jp      59a4h		; uload


; erasecmd
65dd 210000    ld      hl,0000h
65e0 22597d    ld      (7d59h),hl
65e3 cde571    call    71e5h		; getvar
65e6 7c        ld      a,h
65e7 a7        and     a
65e8 fa4c66    jp      m,664ch
65eb b5        or      l
65ec ca5261    jp      z,6152h		; pincg  

65ef 29        add     hl,hl
65f0 29        add     hl,hl
65f1 29        add     hl,hl
65f2 2b        dec     hl
65f3 224b7d    ld      (7d4bh),hl
65f6 3af622    ld      a,(22f6h)
65f9 324d7d    ld      (7d4dh),a
65fc 2e04      ld      l,04h
65fe cd5e00    call    005eh
6601 cd4f00    call    004fh
6604 22537d    ld      (7d53h),hl
6607 eb        ex      de,hl
6608 2a4b7d    ld      hl,(7d4bh)
660b 19        add     hl,de
660c 7c        ld      a,h
660d e6fe      and     0feh
660f 2803      jr      z,6614h          ; (+03h)
6611 21ff01    ld      hl,01ffh
6614 22577d    ld      (7d57h),hl
6617 cd5200    call    0052h
661a eb        ex      de,hl
661b 2a597d    ld      hl,(7d59h)
661e 19        add     hl,de
661f 22597d    ld      (7d59h),hl
6622 210f00    ld      hl,000fh
6625 19        add     hl,de
6626 22557d    ld      (7d55h),hl
6629 21537d    ld      hl,7d53h
662c cd4c00    call    004ch
662f 3a4d7d    ld      a,(7d4dh)
6632 07        rlca    
6633 e6fe      and     0feh
6635 6f        ld      l,a
6636 cd5e00    call    005eh
6639 2a537d    ld      hl,(7d53h)
663c cd5500    call    0055h
663f 2a557d    ld      hl,(7d55h)
6642 11f1ff    ld      de,0fff1h
6645 19        add     hl,de
6646 cd5800    call    0058h
6649 c35261    jp      6152h		; pincg  

; erasfcmd
664c 3af622    ld      a,(22f6h)
664f e61c      and     1ch
6651 07        rlca    
6652 f607      or      07h
6654 2600      ld      h,00h
6656 6f        ld      l,a
6657 cd0d5e    call    5e0dh		; ferase
665a c35261    jp      6152h		; pincg

; erase2cmd  
665d cde571    call    71e5h		; getvar
6660 e5        push    hl
6661 cde571    call    71e5h		; getvar
6664 2b        dec     hl
6665 3e1f      ld      a,1fh
6667 a5        and     l
6668 6f        ld      l,a
6669 29        add     hl,hl
666a 29        add     hl,hl
666b 29        add     hl,hl
666c 29        add     hl,hl
666d cdf95d    call    5df9h		; comphl
6670 22597d    ld      (7d59h),hl
6673 e1        pop     hl
6674 c3e665    jp      65e6h

; calccmd
6677 cde571    call    71e5h		; getvar
667a c35261    jp      6152h		; pincg  

; modeccmd
667d cd675e    call    5e67h		; cond
6680 7b        ld      a,e
6681 fe04      cp      04h
6683 ca5261    jp      z,6152h		; pincg  
6686 215261    ld      hl,6152h		; pincg  
6689 e5        push    hl
668a 1805      jr      6691h            ; (+05h)

; modecmd
668c 7e        ld      a,(hl)
668d 216261    ld      hl,6162h		; pinc2
6690 e5        push    hl
6691 47        ld      b,a
6692 3af622    ld      a,(22f6h)
6695 e61c      and     1ch
6697 b0        or      b
6698 07        rlca    
6699 e6fe      and     0feh
669b 2600      ld      h,00h
669d 6f        ld      l,a
669e c35e00    jp      005eh

; color display
66a1 21ffff    ld      hl,0ffffh
66a4 22797d    ld      (7d79h),hl
66a7 cde571    call    71e5h		; getvar
66aa cde571    call    71e5h		; getvar
66ad c35261    jp      6152h		; pincg  

; fcolor
66b0 21137f    ld      hl,7f13h
66b3 11257d    ld      de,7d25h
66b6 010600    ld      bc,0006h
66b9 cdae5e    call    5eaeh		; moveb
66bc c9        ret     

; bcolor
66bd 21197f    ld      hl,7f19h
66c0 18f1      jr      66b3h            ; (-0fh)

; paint - flood fill
66c2 c35d61    jp      615dh		; pinc1

; blockcmd
66c5 cde571    call    71e5h		; getvar
66c8 2a697d    ld      hl,(7d69h)
66cb 224b7d    ld      (7d4bh),hl
66ce 3a6b7d    ld      a,(7d6bh)
66d1 324d7d    ld      (7d4dh),a
66d4 cde571    call    71e5h		; getvar
66d7 2a697d    ld      hl,(7d69h)
66da 22847d    ld      (7d84h),hl
66dd 224e7d    ld      (7d4eh),hl
66e0 cde571    call    71e5h		; getvar
66e3 22867d    ld      (7d86h),hl
66e6 cd7461    call    6174h		; bounds
66e9 2a4b7d    ld      hl,(7d4bh)
66ec 22847d    ld      (7d84h),hl
66ef cd7461    call    6174h		; bounds
66f2 3a4d7d    ld      a,(7d4dh)
66f5 e67f      and     7fh
66f7 3c        inc     a
66f8 fe03      cp      03h
66fa 2002      jr      nz,66feh         ; (+02h)
66fc 3e06      ld      a,06h
66fe 1600      ld      d,00h
6700 5f        ld      e,a
6701 2a867d    ld      hl,(7d86h)
6704 cddc5d    call    5ddch		; muldehl
6707 42        ld      b,d
6708 4b        ld      c,e
6709 2a4b7d    ld      hl,(7d4bh)
670c eb        ex      de,hl
670d 2a4e7d    ld      hl,(7d4eh)
6710 cdae5e    call    5eaeh		; moveb
6713 c35261    jp      6152h		; pincg  

; enablecmd
6716 f3        di      
6717 3afc22    ld      a,(22fch)
671a 4f        ld      c,a
671b 46        ld      b,(hl)
671c 78        ld      a,b
671d e601      and     01h
671f 78        ld      a,b
6720 2805      jr      z,6727h          ; (+05h)
6722 e6fe      and     0feh
6724 b1        or      c
6725 1802      jr      6729h            ; (+02h)
6727 2f        cpl     
6728 a1        and     c
6729 6f        ld      l,a
672a 2604      ld      h,04h
672c cd7000    call    0070h
672f fb        ei      
6730 c36261    jp      6162h		; pinc2

; sizecmd
6733 7e        ld      a,(hl)
6734 32487f    ld      (7f48h),a
6737 21d57f    ld      hl,7fd5h
673a 160c      ld      d,0ch
673c cdc85e    call    5ec8h		; zerob
673f c36261    jp      6162h		; pinc2

; rotatecmd
6742 7e        ld      a,(hl)
6743 32c37f    ld      (7fc3h),a
6746 21e17f    ld      hl,7fe1h
6749 160c      ld      d,0ch
674b cdc85e    call    5ec8h		; zerob
674e c36261    jp      6162h		; pinc2

; branch1
6751 cd8962    call    6289h
6754 46        ld      b,(hl)
6755 23        inc     hl
6756 4e        ld      c,(hl)
6757 2a9a7d    ld      hl,(7d9ah)
675a 09        add     hl,bc
675b 22987d    ld      (7d98h),hl
675e c35861    jp      6158h		; pinc0

; branchcond
6761 cd8962    call    6289h
6764 cd675e    call    5e67h		; cond
6767 7a        ld      a,d
6768 a3        and     e
6769 fa5261    jp      m,6152h		; pincg  
676c 2a9a7d    ld      hl,(7d9ah)
676f 19        add     hl,de
6770 22987d    ld      (7d98h),hl
6773 c35861    jp      6158h		; pinc0


;drawcmd
6776 cdd067    call    67d0h
6779 cde571    call    71e5h		; getvar
677c 224d7d    ld      (7d4dh),hl
677f cde571    call    71e5h		; getvar
6782 eb        ex      de,hl
6783 2a4d7d    ld      hl,(7d4dh)
6786 cd4600    call    0046h
6789 3a4b7d    ld      a,(7d4bh)
678c 3d        dec     a
678d ca5261    jp      z,6152h		; pincg  
6790 324b7d    ld      (7d4bh),a
6793 18e4      jr      6779h            ; (-1ch)

; drawccmd
6795 cdd067    call    67d0h
6798 cd4f63    call    634fh		; rctoxy
679b eb        ex      de,hl
679c 2a537d    ld      hl,(7d53h)
679f cd4600    call    0046h
67a2 3a4b7d    ld      a,(7d4bh)
67a5 3d        dec     a
67a6 ca5261    jp      z,6152h		; pincg  
67a9 324b7d    ld      (7d4bh),a
67ac 18ea      jr      6798h            ; (-16h)

; drawlcmd
67ae cdd067    call    67d0h
67b1 2a677d    ld      hl,(7d67h)
67b4 46        ld      b,(hl)
67b5 23        inc     hl
67b6 4e        ld      c,(hl)
67b7 23        inc     hl
67b8 56        ld      d,(hl)
67b9 23        inc     hl
67ba 5e        ld      e,(hl)
67bb 23        inc     hl
67bc 22677d    ld      (7d67h),hl
67bf 60        ld      h,b
67c0 69        ld      l,c
67c1 cd4600    call    0046h
67c4 3a4b7d    ld      a,(7d4bh)
67c7 3d        dec     a
67c8 ca5261    jp      z,6152h		; pincg  
67cb 324b7d    ld      (7d4bh),a
67ce 18e1      jr      67b1h            ; (-1fh)
67d0 7e        ld      a,(hl)
67d1 324b7d    ld      (7d4bh),a
67d4 23        inc     hl
67d5 22677d    ld      (7d67h),hl
67d8 c9        ret     


; showacmd
67d9 cde571    call    71e5h		; getvar
67dc 2a697d    ld      hl,(7d69h)
67df 22097d    ld      (7d09h),hl
67e2 22847d    ld      (7d84h),hl
67e5 cde571    call    71e5h		; getvar
67e8 220b7d    ld      (7d0bh),hl
67eb 22867d    ld      (7d86h),hl
67ee cd7461    call    6174h		; bounds
67f1 3a477d    ld      a,(7d47h)
67f4 a7        and     a
67f5 cca261    call    z,61a2h		; dispsav
67f8 cd5d6b    call    6b5dh		; iformq
67fb cd606b    call    6b60h		; formp
67fe c37262    jp      6272h		; autoelg

; showcmd
6801 cde571    call    71e5h		; getvar
6804 cd1d5e    call    5e1dh		; itoa
6807 22f97c    ld      (7cf9h),hl
680a eb        ex      de,hl
680b 22fb7c    ld      (7cfbh),hl
680e 3a477d    ld      a,(7d47h)
6811 a7        and     a
6812 cca261    call    z,61a2h		; dispsav
6815 cd3a6c    call    6c3ah		; format
6818 c37262    jp      6272h		; autoelg

; ccodecmd
681b 212c68    ld      hl,682ch
681e e5        push    hl
681f cde571    call    71e5h		; getvar
6822 e5        push    hl
6823 cde571    call    71e5h		; getvar
6826 2a697d    ld      hl,(7d69h)
6829 54        ld      d,h
682a 5d        ld      e,l
682b c9        ret     

682c c35261    jp      6152h		; pincg  

; beepcmd
682f cd8800    call    0088h		; r.alarm
6832 c35d61    jp      615dh		; pinc1

; funkeycmd
6835 3e01      ld      a,01h
6837 329d7f    ld      (7f9dh),a
683a 46        ld      b,(hl)
683b 78        ld      a,b
683c e67f      and     7fh
683e 1600      ld      d,00h
6840 5f        ld      e,a
6841 23        inc     hl
6842 78        ld      a,b
6843 a7        and     a
6844 fa6b68    jp      m,686bh
6847 7e        ld      a,(hl)
6848 23        inc     hl
6849 22677d    ld      (7d67h),hl
684c a7        and     a
684d ca5261    jp      z,6152h		; pincg  
6850 fe01      cp      01h
6852 2001      jr      nz,6855h         ; (+01h)
6854 af        xor     a
6855 219e7f    ld      hl,7f9eh
6858 cb03      rlc     e
685a 19        add     hl,de
685b cb0b      rrc     e
685d 77        ld      (hl),a
685e 23        inc     hl
685f 3a387f    ld      a,(7f38h)
6862 77        ld      (hl),a
6863 3e0f      ld      a,0fh
6865 bb        cp      e
6866 2814      jr      z,687ch          ; (+14h)
6868 c35261    jp      6152h		; pincg  
686b d5        push    de
686c cd675e    call    5e67h		; cond
686f 7b        ld      a,e
6870 d1        pop     de
6871 18d9      jr      684ch            ; (-27h)

; basecmd
6873 3ab87f    ld      a,(7fb8h)
6876 32ba7f    ld      (7fbah),a
6879 c35d61    jp      615dh		; pinc1


687c af        xor     a
687d 324a7f    ld      (7f4ah),a
6880 218968    ld      hl,6889h		; int1
6883 22ee22    ld      (22eeh),hl
6886 c35261    jp      6152h		; pincg  

; int1
6889 3abc7f    ld      a,(7fbch)
688c a7        and     a
688d f5        push    af
688e 2af37f    ld      hl,(7ff3h)
6891 7c        ld      a,h
6892 b5        or      l
6893 280f      jr      z,68a4h          ; (+0fh)
6895 e5        push    hl
6896 260a      ld      h,0ah
6898 cd7000    call    0070h
689b 7d        ld      a,l
689c e1        pop     hl
689d cd1c60    call    601ch		; buffin
68a0 f1        pop     af
68a1 c8        ret     z

68a2 180e      jr      68b2h            ; (+0eh)
68a4 f1        pop     af
68a5 c8        ret     z

68a6 f3        di      
68a7 3afc22    ld      a,(22fch)
68aa e6f7      and     0f7h
68ac 6f        ld      l,a
68ad 2604      ld      h,04h
68af cd7000    call    0070h
68b2 3e01      ld      a,01h
68b4 324a7f    ld      (7f4ah),a
68b7 c9        ret     

68b8 af        xor     a
68b9 324a7f    ld      (7f4ah),a
68bc 3abd7f    ld      a,(7fbdh)
68bf 32387f    ld      (7f38h),a
68c2 3abc7f    ld      a,(7fbch)
68c5 5f        ld      e,a
68c6 c3d264    jp      64d2h

; getkeycmd
68c9 cdc15f    call    5fc1h		; getkey
68cc c35d61    jp      615dh		; pinc1

; clrkeycmd
68cf cdf35f    call    5ff3h		; clrkey
68d2 c35d61    jp      615dh		; pinc1


; tpausecmd
68d5 cd0e6a    call    6a0eh
68d8 2a677d    ld      hl,(7d67h)
68db cdff69    call    69ffh		; tabpnt
68de 22677d    ld      (7d67h),hl
68e1 2a967d    ld      hl,(7d96h)
68e4 19        add     hl,de
68e5 3afc22    ld      a,(22fch)
68e8 32937d    ld      (7d93h),a
68eb 47        ld      b,a
68ec 7e        ld      a,(hl)
68ed e628      and     28h
68ef b0        or      b
68f0 6f        ld      l,a
68f1 2604      ld      h,04h
68f3 cd7000    call    0070h
68f6 3e02      ld      a,02h
68f8 180f      jr      6909h            ; (+0fh) ; paus10

; pausecmd
68fa cd0e6a    call    6a0eh
68fd 3a257d    ld      a,(7d25h)
6900 b7        or      a
6901 f20869    jp      p,6908h
6904 3e01      ld      a,01h
6906 1801      jr      6909h            ; (+01h)
6908 af        xor     a

; paus10
6909 328f7d    ld      (7d8fh),a
690c 2a9a7d    ld      hl,(7d9ah)
690f cdf95d    call    5df9h		; comphl
6912 eb        ex      de,hl
6913 2a677d    ld      hl,(7d67h)
6916 19        add     hl,de
6917 229c7d    ld      (7d9ch),hl

; paus10
691a cd235f    call    5f23h
691d 3a967f    ld      a,(7f96h)
6920 e604      and     04h
6922 200b      jr      nz,692fh         ; (+0bh)
6924 3a8f7d    ld      a,(7d8fh)
6927 b7        or      a
6928 2805      jr      z,692fh          ; (+05h) ; paus12
692a cdc15f    call    5fc1h		; getkey
692d 203d      jr      nz,696ch         ; (+3dh)
*
*         process terminal job stack
*
; paus12 
692f cd5060    call    6050h		; xplato
6932 21257d    ld      hl,7d25h
6935 7e        ld      a,(hl)
6936 a7        and     a
6937 fa5769    jp      m,6957h
693a 21bffb    ld      hl,0fbbfh
693d 222c7d    ld      (7d2ch),hl
6940 218312    ld      hl,1283h
6943 222e7d    ld      (7d2eh),hl
6946 216e97    ld      hl,976eh
6949 22307d    ld      (7d30h),hl
694c cd5277    call    7752h		; addf
694f 21257d    ld      hl,7d25h
6952 7e        ld      a,(hl)
6953 a7        and     a
6954 fa6c69    jp      m,696ch
6957 215208    ld      hl,0852h
695a 3ae622    ld      a,(22e6h)
695d fe02      cp      02h
695f 2003      jr      nz,6964h         ; (+03h) ; paus30 
*
*
*         idle for aprox 16 milliseconds
*
; paus20
6961 216a0b    ld      hl,0b6ah			; loop count init value

; paus30 
6964 2b        dec     hl
6965 7c        ld      a,h
6966 a7        and     a
6967 f26469    jp      p,6964h		; paus30 
696a 18ae      jr      691ah            ; (-52h)


696c 3a8f7d    ld      a,(7d8fh)
696f b7        or      a
6970 2834      jr      z,69a6h          ; (+34h)
6972 3d        dec     a
6973 ca9759    jp      z,5997h		; uexec
6976 cdaf69    call    69afh		; gkeyoff
6979 cdd269    call    69d2h		; testtab
697c 289c      jr      z,691ah          ; (-64h)
697e 3a937d    ld      a,(7d93h)
6981 6f        ld      l,a
6982 2604      ld      h,04h
6984 cd7000    call    0070h
6987 3a9d7f    ld      a,(7f9dh)
698a a7        and     a
698b ca9759    jp      z,5997h		; uexec
698e 2a757d    ld      hl,(7d75h)
6991 cdcf5e    call    5ecfh		; funku
6994 feff      cp      0ffh
6996 ca9759    jp      z,5997h		; uexec
6999 7b        ld      a,e
699a a7        and     a
699b ca9759    jp      z,5997h		; uexec
699e 3e02      ld      a,02h
69a0 f5        push    af
69a1 3e16      ld      a,16h
69a3 c3a865    jp      65a8h		; execv
69a6 21ffff    ld      hl,0ffffh
69a9 22777d    ld      (7d77h),hl
69ac c39759    jp      5997h		; uexec

; gkeyoff
69af 2a757d    ld      hl,(7d75h)
69b2 7c        ld      a,h
69b3 a7        and     a
69b4 fac269    jp      m,69c2h
69b7 200d      jr      nz,69c6h         ; (+0dh)
69b9 110800    ld      de,0008h
69bc 19        add     hl,de
69bd 7d        ld      a,l
69be 328d7d    ld      (7d8dh),a
69c1 c9        ret     

69c2 3e00      ld      a,00h
69c4 18f8      jr      69beh            ; (-08h)
69c6 fe01      cp      01h
69c8 2004      jr      nz,69ceh         ; (+04h)
69ca 3e05      ld      a,05h
69cc 18f0      jr      69beh            ; (-10h)
69ce 3e03      ld      a,03h
69d0 18ec      jr      69beh            ; (-14h)

; testtab
69d2 2a967d    ld      hl,(7d96h)
69d5 eb        ex      de,hl
69d6 2a907d    ld      hl,(7d90h)
69d9 19        add     hl,de
69da 3e02      ld      a,02h
69dc a6        and     (hl)
69dd c0        ret     nz

69de 3a8d7d    ld      a,(7d8dh)
69e1 57        ld      d,a
69e2 e607      and     07h
69e4 4f        ld      c,a
69e5 aa        xor     d
69e6 0f        rrca    
69e7 0f        rrca    
69e8 0f        rrca    
69e9 5f        ld      e,a
69ea 1600      ld      d,00h
69ec 3a927d    ld      a,(7d92h)
69ef bb        cp      e
69f0 fafd69    jp      m,69fdh
69f3 19        add     hl,de
69f4 af        xor     a
69f5 37        scf     
69f6 17        rla     
69f7 0d        dec     c
69f8 f2f669    jp      p,69f6h
69fb a6        and     (hl)
69fc c9        ret     

69fd af        xor     a
69fe c9        ret     


; tabpnt
69ff 56        ld      d,(hl)
6a00 23        inc     hl
6a01 5e        ld      e,(hl)
6a02 23        inc     hl
6a03 7e        ld      a,(hl)
6a04 23        inc     hl
6a05 eb        ex      de,hl
6a06 22907d    ld      (7d90h),hl
6a09 32927d    ld      (7d92h),a
6a0c eb        ex      de,hl
6a0d c9        ret     

6a0e cde571    call    71e5h		; getvar
6a11 3a6b7d    ld      a,(7d6bh)
6a14 e680      and     80h
6a16 c0        ret     nz

6a17 c3757a    jp      7a75h		; itof

; doto0cmd
6a1a 110100    ld      de,0001h
6a1d cd6c6a    call    6a6ch
6a20 cde571    call    71e5h		; getvar
6a23 180b      jr      6a30h            ; (+0bh)

; doto1cmd
6a25 110000    ld      de,0000h
6a28 cd6c6a    call    6a6ch
6a2b eb        ex      de,hl
6a2c 2a8b7d    ld      hl,(7d8bh)
6a2f 19        add     hl,de
6a30 eb        ex      de,hl
6a31 2a887d    ld      hl,(7d88h)
6a34 22697d    ld      (7d69h),hl
6a37 3a8a7d    ld      a,(7d8ah)
6a3a 326b7d    ld      (7d6bh),a
6a3d eb        ex      de,hl
6a3e e5        push    hl
6a3f cd9471    call    7194h		; nputvar
6a42 e1        pop     hl
6a43 eb        ex      de,hl
6a44 2a8d7d    ld      hl,(7d8dh)
6a47 3a907d    ld      a,(7d90h)
6a4a b7        or      a
6a4b fa4f6a    jp      m,6a4fh
6a4e eb        ex      de,hl
6a4f cdf95d    call    5df9h		; comphl
6a52 19        add     hl,de
6a53 7c        ld      a,h
6a54 b7        or      a
6a55 2a917d    ld      hl,(7d91h)
6a58 fa636a    jp      m,6a63h
6a5b 23        inc     hl
6a5c 23        inc     hl
6a5d 22987d    ld      (7d98h),hl
6a60 c35861    jp      6158h		; pinc0
6a63 56        ld      d,(hl)
6a64 23        inc     hl
6a65 5e        ld      e,(hl)
6a66 2a9a7d    ld      hl,(7d9ah)
6a69 19        add     hl,de
6a6a 18f1      jr      6a5dh            ; (-0fh)
6a6c 19        add     hl,de
6a6d 56        ld      d,(hl)
6a6e 23        inc     hl
6a6f 5e        ld      e,(hl)
6a70 23        inc     hl
6a71 22917d    ld      (7d91h),hl
6a74 2a967d    ld      hl,(7d96h)
6a77 19        add     hl,de
6a78 22677d    ld      (7d67h),hl
6a7b cde571    call    71e5h		; getvar
6a7e 228b7d    ld      (7d8bh),hl
6a81 2a697d    ld      hl,(7d69h)
6a84 22887d    ld      (7d88h),hl
6a87 3a6b7d    ld      a,(7d6bh)
6a8a 328a7d    ld      (7d8ah),a
6a8d cde571    call    71e5h		; getvar
6a90 228d7d    ld      (7d8dh),hl
6a93 cde571    call    71e5h		; getvar
6a96 228f7d    ld      (7d8fh),hl
6a99 c9        ret     


; inhibitcmd
6a9a 11967f    ld      de,7f96h
6a9d 011000    ld      bc,0010h
6aa0 c5        push    bc
6aa1 1810      jr      6ab3h            ; (+10h)

; forcecmd
6aa3 11987f    ld      de,7f98h
6aa6 010000    ld      bc,0000h
6aa9 c5        push    bc
6aaa 1807      jr      6ab3h            ; (+07h)

; specscmd
6aac 11b97d    ld      de,7db9h
6aaf 010000    ld      bc,0000h
6ab2 c5        push    bc
6ab3 46        ld      b,(hl)
6ab4 23        inc     hl
6ab5 4e        ld      c,(hl)
6ab6 78        ld      a,b
6ab7 b1        or      c
6ab8 280a      jr      z,6ac4h          ; (+0ah)
6aba 1a        ld      a,(de)
6abb b0        or      b
6abc 12        ld      (de),a
6abd 13        inc     de
6abe 1a        ld      a,(de)
6abf b1        or      c
6ac0 12        ld      (de),a
6ac1 c1        pop     bc
6ac2 1825      jr      6ae9h            ; (+25h)
6ac4 eb        ex      de,hl
6ac5 d1        pop     de
6ac6 73        ld      (hl),e
6ac7 23        inc     hl
6ac8 72        ld      (hl),d
6ac9 181e      jr      6ae9h            ; (+1eh)

; allowcmd
6acb 46        ld      b,(hl)
6acc 23        inc     hl
6acd 4e        ld      c,(hl)
6ace 79        ld      a,c
6acf b0        or      b
6ad0 2811      jr      z,6ae3h          ; (+11h)
6ad2 2a967f    ld      hl,(7f96h)
6ad5 79        ld      a,c
6ad6 2f        cpl     
6ad7 a4        and     h
6ad8 32977f    ld      (7f97h),a
6adb 78        ld      a,b
6adc 2f        cpl     
6add a5        and     l
6ade 32967f    ld      (7f96h),a
6ae1 1806      jr      6ae9h            ; (+06h)
6ae3 21efff    ld      hl,0ffefh
6ae6 22967f    ld      (7f96h),hl
6ae9 c36761    jp      6167h		; pinc3

; lvarscmd
6aec 2a987d    ld      hl,(7d98h)
6aef eb        ex      de,hl
6af0 2a9a7d    ld      hl,(7d9ah)
6af3 cda55b    call    5ba5h		;subhlde
6af6 eb        ex      de,hl
6af7 229c7d    ld      (7d9ch),hl
6afa 2a677d    ld      hl,(7d67h)
6afd 56        ld      d,(hl)
6afe 23        inc     hl
6aff 5e        ld      e,(hl)
6b00 d5        push    de
6b01 eb        ex      de,hl
6b02 cd865b    call    5b86h		; getmem
6b05 2a2b7f    ld      hl,(7f2bh)
6b08 22277f    ld      (7f27h),hl
6b0b d1        pop     de
6b0c 19        add     hl,de
6b0d 222b7f    ld      (7f2bh),hl
6b10 222d7f    ld      (7f2dh),hl
6b13 cda459    call    59a4h		; uload
6b16 18d1      jr      6ae9h            ; (-2fh)

; noargs1cmd
; noargscmd
6b18 3a9a7f    ld      a,(7f9ah)
6b1b a7        and     a
6b1c 2806      jr      z,6b24h          ; (+06h)
6b1e cd4b6b    call    6b4bh		; abdestr
6b21 c3a85c    jp      5ca8h		; errorx
6b24 2a677d    ld      hl,(7d67h)
6b27 22987d    ld      (7d98h),hl


; doimain
6b2a 3a9c7f    ld      a,(7f9ch)
6b2d a7        and     a
6b2e ca5861    jp      z,6158h		; pinc0
6b31 af        xor     a
6b32 329c7f    ld      (7f9ch),a
6b35 cde764    call    64e7h		; join
6b38 21b67f    ld      hl,7fb6h
6b3b 7e        ld      a,(hl)
6b3c 32947d    ld      (7d94h),a
6b3f 23        inc     hl
6b40 7e        ld      a,(hl)
6b41 32387f    ld      (7f38h),a
6b44 47        ld      b,a
6b45 cd435a    call    5a43h		; rd.tbl
6b48 c39759    jp      5997h		; uexec

; abdestr
6b4b 0602      ld      b,02h
6b4d 0e01      ld      c,01h
6b4f cd925d    call    5d92h		; purgu
6b52 af        xor     a
6b53 329a7f    ld      (7f9ah),a
6b56 c9        ret     

6b57 00        nop     
6b58 00        nop     
6b59 00        nop     
; Disassembly of the file "E:\mTUTOR\l4\ppttut-format.bin"
; 
; CPU Type: Z80
; 
; Created with dZ80 2.0
; 
; on Thursday, 30 of November 2017 at 06:49 PM
; 

; iformp
6b5a cd146c    call    6c14h		; iformat   

; iformq
6b5d c3036c    jp      6c03h

; formp
6b60 2a097d    ld      hl,(7d09h)
6b63 2b        dec     hl
6b64 e5        push    hl
6b65 2a0b7d    ld      hl,(7d0bh)
6b68 e5        push    hl
6b69 2af422    ld      hl,(22f4h)
6b6c 4d        ld      c,l
6b6d 3e01      ld      a,01h
6b6f a1        and     c
6b70 32207d    ld      (7d20h),a
6b73 3e40      ld      a,40h
6b75 a1        and     c
6b76 32217d    ld      (7d21h),a
6b79 210100    ld      hl,0001h
6b7c 22fb7c    ld      (7cfbh),hl
6b7f d1        pop     de
6b80 e1        pop     hl
6b81 1b        dec     de
6b82 7a        ld      a,d
6b83 a7        and     a
6b84 f8        ret     m

6b85 23        inc     hl
6b86 e5        push    hl
6b87 22f97c    ld      (7cf9h),hl
6b8a d5        push    de
6b8b 7e        ld      a,(hl)
6b8c 47        ld      b,a
6b8d 3afd7c    ld      a,(7cfdh)
6b90 4f        ld      c,a
6b91 e601      and     01h
6b93 57        ld      d,a
6b94 3ec0      ld      a,0c0h
6b96 a1        and     c
6b97 80        add     a,b
6b98 5f        ld      e,a
6b99 216a6e    ld      hl,6e6ah		; formtab
6b9c 19        add     hl,de
6b9d 7e        ld      a,(hl)
6b9e a7        and     a
6b9f f2c86b    jp      p,6bc8h
6ba2 e67f      and     7fh
6ba4 fe02      cp      02h
6ba6 2826      jr      z,6bceh          ; (+26h)
6ba8 fe05      cp      05h
6baa 2814      jr      z,6bc0h          ; (+14h)
6bac fe1b      cp      1bh
6bae 2810      jr      z,6bc0h          ; (+10h)
6bb0 fe0b      cp      0bh
6bb2 280c      jr      z,6bc0h          ; (+0ch)
6bb4 fe1c      cp      1ch
6bb6 2816      jr      z,6bceh          ; (+16h)
6bb8 fe27      cp      27h
6bba 3012      jr      nc,6bceh         ; (+12h)
6bbc fe04      cp      04h
6bbe 2008      jr      nz,6bc8h         ; (+08h)
6bc0 cd3a6c    call    6c3ah		; format
6bc3 cd036c    call    6c03h
6bc6 18a1      jr      6b69h            ; (-5fh)
6bc8 cdd36b    call    6bd3h
6bcb cd036c    call    6c03h
6bce cd3a6c    call    6c3ah		; format
6bd1 1896      jr      6b69h            ; (-6ah)
6bd3 3a207d    ld      a,(7d20h)
6bd6 a7        and     a
6bd7 280a      jr      z,6be3h          ; (+0ah)
6bd9 cd5200    call    0052h
6bdc eb        ex      de,hl
6bdd 2a1e7d    ld      hl,(7d1eh)
6be0 eb        ex      de,hl
6be1 1808      jr      6bebh            ; (+08h)
6be3 cd4f00    call    004fh
6be6 eb        ex      de,hl
6be7 2a1c7d    ld      hl,(7d1ch)
6bea eb        ex      de,hl
6beb 3a217d    ld      a,(7d21h)
6bee a7        and     a
6bef 2801      jr      z,6bf2h          ; (+01h)
6bf1 eb        ex      de,hl
6bf2 7a        ld      a,d
6bf3 2f        cpl     
6bf4 57        ld      d,a
6bf5 7b        ld      a,e
6bf6 2f        cpl     
6bf7 5f        ld      e,a
6bf8 13        inc     de
6bf9 19        add     hl,de
6bfa 7c        ld      a,h
6bfb a7        and     a
6bfc f0        ret     p

6bfd 21106c    ld      hl,6c10h
6c00 c34900    jp      0049h
6c03 cd4f00    call    004fh
6c06 221c7d    ld      (7d1ch),hl
6c09 cd5200    call    0052h
6c0c 221e7d    ld      (7d1eh),hl
6c0f c9        ret     

6c10 3f        ccf     
6c11 0d        dec     c
6c12 3f        ccf     
6c13 00        nop

; iformat     
6c14 210000    ld      hl,0000h
6c17 3a487f    ld      a,(7f48h)
6c1a a7        and     a
6c1b 2802      jr      z,6c1fh          ; (+02h)
6c1d 2e20      ld      l,20h
6c1f 3ac37f    ld      a,(7fc3h)
6c22 a7        and     a
6c23 2801      jr      z,6c26h          ; (+01h)
6c25 2c        inc     l
6c26 cd7300    call    0073h
6c29 af        xor     a
6c2a 32fd7c    ld      (7cfdh),a
6c2d 32fe7c    ld      (7cfeh),a
6c30 32017d    ld      (7d01h),a
6c33 32027d    ld      (7d02h),a
6c36 32067d    ld      (7d06h),a
6c39 c9        ret     

; format
6c3a 2af97c    ld      hl,(7cf9h)
6c3d e5        push    hl
6c3e 2afb7c    ld      hl,(7cfbh)
6c41 e5        push    hl
6c42 3ac37f    ld      a,(7fc3h)
6c45 a7        and     a
6c46 2805      jr      z,6c4dh          ; (+05h)
6c48 2a3c7d    ld      hl,(7d3ch)
6c4b 1803      jr      6c50h            ; (+03h)
6c4d 2a3a7d    ld      hl,(7d3ah)
6c50 22f022    ld      (22f0h),hl
6c53 d1        pop     de
6c54 e1        pop     hl
6c55 1b        dec     de
6c56 7a        ld      a,d
6c57 a7        and     a
6c58 f8        ret     m

6c59 46        ld      b,(hl)
6c5a 23        inc     hl
6c5b e5        push    hl
6c5c d5        push    de
6c5d 3afd7c    ld      a,(7cfdh)
6c60 32fe7c    ld      (7cfeh),a
6c63 4f        ld      c,a
6c64 e601      and     01h
6c66 32fd7c    ld      (7cfdh),a
6c69 57        ld      d,a
6c6a 3ec0      ld      a,0c0h
6c6c a1        and     c
6c6d 80        add     a,b
6c6e 5f        ld      e,a
6c6f 216a6e    ld      hl,6e6ah		; formtab
6c72 19        add     hl,de
6c73 7e        ld      a,(hl)
6c74 a7        and     a
6c75 fa9f6c    jp      m,6c9fh
6c78 cd7d6c    call    6c7dh
6c7b 18d6      jr      6c53h            ; (-2ah)
6c7d 32067d    ld      (7d06h),a
6c80 21067d    ld      hl,7d06h
6c83 110100    ld      de,0001h
6c86 cd4900    call    0049h
6c89 3a017d    ld      a,(7d01h)
6c8c 32027d    ld      (7d02h),a
6c8f a7        and     a
6c90 c8        ret     z

6c91 2f        cpl     
6c92 3c        inc     a
6c93 57        ld      d,a
6c94 cd0d6e    call    6e0dh
6c97 cd526e    call    6e52h
6c9a af        xor     a
6c9b 32017d    ld      (7d01h),a
6c9e c9        ret     

6c9f e67f      and     7fh
6ca1 1600      ld      d,00h
6ca3 5f        ld      e,a
6ca4 214d71    ld      hl,714dh
6ca7 19        add     hl,de
6ca8 5e        ld      e,(hl)
6ca9 216a70    ld      hl,706ah
6cac 19        add     hl,de
6cad 2b        dec     hl
6cae 22ff7c    ld      (7cffh),hl
6cb1 cd056e    call    6e05h
6cb4 7e        ld      a,(hl)
6cb5 a7        and     a
6cb6 fac66c    jp      m,6cc6h
6cb9 07        rlca    
6cba 1600      ld      d,00h
6cbc 5f        ld      e,a
6cbd 21cd6c    ld      hl,6ccdh
6cc0 19        add     hl,de
6cc1 5e        ld      e,(hl)
6cc2 23        inc     hl
6cc3 56        ld      d,(hl)
6cc4 eb        ex      de,hl
6cc5 e9        jp      (hl)
6cc6 e67f      and     7fh
6cc8 cd7d6c    call    6c7dh
6ccb 18e4      jr      6cb1h            ; (-1ch)
6ccd 53        ld      d,e
6cce 6c        ld      l,h
6ccf f1        pop     af
6cd0 6c        ld      l,h
6cd1 066d      ld      b,6dh
6cd3 0a        ld      a,(bc)
6cd4 6d        ld      l,l
6cd5 17        rla     
6cd6 6d        ld      l,l
6cd7 326d48    ld      (486dh),a
6cda 6d        ld      l,l
6cdb 55        ld      d,l
6cdc 6d        ld      l,l
6cdd 62        ld      h,d
6cde 6d        ld      l,l
6cdf 66        ld      h,(hl)
6ce0 6d        ld      l,l
6ce1 fd6c      ld      iyl,iyh
6ce3 d5        push    de
6ce4 6d        ld      l,l
6ce5 53        ld      d,e
6ce6 6c        ld      l,h
6ce7 3f        ccf     
6ce8 6d        ld      l,l
6ce9 e7        rst     20h
6cea 6d        ld      l,l
6ceb f26d6c    jp      p,6c6dh
6cee 6d        ld      l,l
6cef 53        ld      d,e
6cf0 6c        ld      l,h
6cf1 0640      ld      b,40h
6cf3 3afe7c    ld      a,(7cfeh)
6cf6 a8        xor     b
6cf7 32fd7c    ld      (7cfdh),a
6cfa c3536c    jp      6c53h
6cfd 3a017d    ld      a,(7d01h)
6d00 cd8f6c    call    6c8fh
6d03 c3536c    jp      6c53h
6d06 0680      ld      b,80h
6d08 18e9      jr      6cf3h            ; (-17h)
6d0a 3af422    ld      a,(22f4h)
6d0d ee04      xor     04h
6d0f 6f        ld      l,a
6d10 cd7300    call    0073h
6d13 0601      ld      b,01h
6d15 18dc      jr      6cf3h            ; (-24h)
6d17 3afd7c    ld      a,(7cfdh)
6d1a e6fe      and     0feh
6d1c 32fd7c    ld      (7cfdh),a
6d1f 3af422    ld      a,(22f4h)
6d22 e6fb      and     0fbh
6d24 6f        ld      l,a
6d25 cd7300    call    0073h
6d28 af        xor     a
6d29 32017d    ld      (7d01h),a
6d2c 32027d    ld      (7d02h),a
6d2f c3536c    jp      6c53h
6d32 cd056e    call    6e05h
6d35 56        ld      d,(hl)
6d36 3a017d    ld      a,(7d01h)
6d39 82        add     a,d
6d3a 32017d    ld      (7d01h),a
6d3d 180d      jr      6d4ch            ; (+0dh)
6d3f 3a027d    ld      a,(7d02h)
6d42 32017d    ld      (7d01h),a
6d45 57        ld      d,a
6d46 1804      jr      6d4ch            ; (+04h)
6d48 cd056e    call    6e05h
6d4b 56        ld      d,(hl)
6d4c cd0d6e    call    6e0dh
6d4f cd526e    call    6e52h
6d52 c3b16c    jp      6cb1h
6d55 cd056e    call    6e05h
6d58 56        ld      d,(hl)
6d59 cd0d6e    call    6e0dh
6d5c cd176e    call    6e17h
6d5f c3b16c    jp      6cb1h
6d62 16f8      ld      d,0f8h
6d64 18f3      jr      6d59h            ; (-0dh)
6d66 cd726d    call    6d72h
6d69 c3536c    jp      6c53h
6d6c cd726d    call    6d72h
6d6f c3b16c    jp      6cb1h
6d72 16f8      ld      d,0f8h
6d74 cd0d6e    call    6e0dh
6d77 cd176e    call    6e17h
6d7a 1600      ld      d,00h
6d7c 3a017d    ld      a,(7d01h)
6d7f 5f        ld      e,a
6d80 3a067d    ld      a,(7d06h)
6d83 32037d    ld      (7d03h),a
6d86 fe5b      cp      5bh
6d88 3006      jr      nc,6d90h         ; (+06h)
6d8a e640      and     40h
6d8c 2802      jr      z,6d90h          ; (+02h)
6d8e 1603      ld      d,03h
6d90 3a027d    ld      a,(7d02h)
6d93 82        add     a,d
6d94 93        sub     e
6d95 32047d    ld      (7d04h),a
6d98 57        ld      d,a
6d99 cd0d6e    call    6e0dh
6d9c cd526e    call    6e52h
6d9f cdc26d    call    6dc2h
6da2 cd056e    call    6e05h
6da5 7e        ld      a,(hl)
6da6 32067d    ld      (7d06h),a
6da9 21067d    ld      hl,7d06h
6dac 110100    ld      de,0001h
6daf cd4900    call    0049h
6db2 cdcf6d    call    6dcfh
6db5 3a037d    ld      a,(7d03h)
6db8 32067d    ld      (7d06h),a
6dbb 3a047d    ld      a,(7d04h)
6dbe cd8f6c    call    6c8fh
6dc1 c9        ret     

6dc2 3af622    ld      a,(22f6h)
6dc5 32227d    ld      (7d22h),a
6dc8 f602      or      02h
6dca 07        rlca    
6dcb 6f        ld      l,a
6dcc c35e00    jp      005eh
6dcf 3a227d    ld      a,(7d22h)
6dd2 c3ca6d    jp      6dcah
6dd5 cd056e    call    6e05h
6dd8 56        ld      d,(hl)
6dd9 3af622    ld      a,(22f6h)
6ddc e6bc      and     0bch
6dde aa        xor     d
6ddf 07        rlca    
6de0 6f        ld      l,a
6de1 cd5e00    call    005eh
6de4 c3536c    jp      6c53h
6de7 3a067d    ld      a,(7d06h)
6dea e640      and     40h
6dec cd7d6c    call    6c7dh
6def c3536c    jp      6c53h
6df2 cd056e    call    6e05h
6df5 7e        ld      a,(hl)
6df6 32067d    ld      (7d06h),a
6df9 21057d    ld      hl,7d05h
6dfc 110200    ld      de,0002h
6dff cd4900    call    0049h
6e02 c3b16c    jp      6cb1h
6e05 2aff7c    ld      hl,(7cffh)
6e08 23        inc     hl
6e09 22ff7c    ld      (7cffh),hl
6e0c c9        ret     

6e0d 3af422    ld      a,(22f4h)
6e10 e620      and     20h
6e12 c8        ret     z

6e13 7a        ld      a,d
6e14 17        rla     
6e15 57        ld      d,a
6e16 c9        ret     

6e17 3af422    ld      a,(22f4h)
6e1a 5f        ld      e,a
6e1b e601      and     01h
6e1d d5        push    de
6e1e 2019      jr      nz,6e39h         ; (+19h)
6e20 cd4f00    call    004fh
6e23 d1        pop     de
6e24 7b        ld      a,e
6e25 e640      and     40h
6e27 7a        ld      a,d
6e28 2802      jr      z,6e2ch          ; (+02h)
6e2a 2f        cpl     
6e2b 3c        inc     a
6e2c 5f        ld      e,a
6e2d a7        and     a
6e2e 1600      ld      d,00h
6e30 f2356e    jp      p,6e35h
6e33 16ff      ld      d,0ffh
6e35 19        add     hl,de
6e36 c35500    jp      0055h
6e39 cd5200    call    0052h
6e3c d1        pop     de
6e3d 7b        ld      a,e
6e3e e640      and     40h
6e40 7a        ld      a,d
6e41 2802      jr      z,6e45h          ; (+02h)
6e43 2f        cpl     
6e44 3c        inc     a
6e45 5f        ld      e,a
6e46 a7        and     a
6e47 1600      ld      d,00h
6e49 f24e6e    jp      p,6e4eh
6e4c 16ff      ld      d,0ffh
6e4e 19        add     hl,de
6e4f c35800    jp      0058h
6e52 3af422    ld      a,(22f4h)
6e55 e601      and     01h
6e57 d5        push    de
6e58 2809      jr      z,6e63h          ; (+09h)
6e5a cd4f00    call    004fh
6e5d d1        pop     de
6e5e 7a        ld      a,d
6e5f 2f        cpl     
6e60 3c        inc     a
6e61 18c9      jr      6e2ch            ; (-37h)
6e63 cd5200    call    0052h
6e66 d1        pop     de
6e67 7a        ld      a,d
6e68 18db      jr      6e45h            ; (-25h)

; formtab
6e6a 80        add     a,b
6e6b 010203    ld      bc,0302h
6e6e 04        inc     b
6e6f 05        dec     b
6e70 0607      ld      b,07h
6e72 08        ex      af,af'
6e73 09        add     hl,bc
6e74 0a        ld      a,(bc)
6e75 0b        dec     bc
6e76 0c        inc     c
6e77 0d        dec     c
6e78 0e0f      ld      c,0fh
6e7a 1011      djnz    6e8dh            ; (+11h)
6e7c 12        ld      (de),a
6e7d 13        inc     de
6e7e 14        inc     d
6e7f 15        dec     d
6e80 1617      ld      d,17h
6e82 1819      jr      6e9dh            ; (+19h)
6e84 1a        ld      a,(de)
6e85 1b        dec     de
6e86 1c        inc     e
6e87 1d        dec     e
6e88 1e1f      ld      e,1fh
6e8a 2021      jr      nz,6eadh         ; (+21h)
6e8c 222324    ld      (2423h),hl
6e8f 25        dec     h
6e90 2627      ld      h,27h
6e92 2829      jr      z,6ebdh          ; (+29h)
6e94 2a2b2c    ld      hl,(2c2bh)
6e97 2d        dec     l
6e98 2e2f      ld      l,2fh
6e9a 3031      jr      nc,6ecdh         ; (+31h)
6e9c 323334    ld      (3433h),a
6e9f 35        dec     (hl)
6ea0 88        adc     a,b
6ea1 86        add     a,(hl)
6ea2 81        add     a,c
6ea3 84        add     a,h
6ea4 3a3b85    ld      a,(853bh)
6ea7 83        add     a,e
6ea8 82        add     a,d
6ea9 39        add     hl,sp
6eaa 80        add     a,b
6eab 41        ld      b,c
6eac 42        ld      b,d
6ead 43        ld      b,e
6eae 44        ld      b,h
6eaf 45        ld      b,l
6eb0 46        ld      b,(hl)
6eb1 47        ld      b,a
6eb2 48        ld      c,b
6eb3 49        ld      c,c
6eb4 4a        ld      c,d
6eb5 4b        ld      c,e
6eb6 4c        ld      c,h
6eb7 4d        ld      c,l
6eb8 4e        ld      c,(hl)
6eb9 4f        ld      c,a
6eba 50        ld      d,b
6ebb 51        ld      d,c
6ebc 52        ld      d,d
6ebd 53        ld      d,e
6ebe 54        ld      d,h
6ebf 55        ld      d,l
6ec0 56        ld      d,(hl)
6ec1 57        ld      d,a
6ec2 58        ld      e,b
6ec3 59        ld      e,c
6ec4 5a        ld      e,d
6ec5 a0        and     b
6ec6 a1        and     c
6ec7 8f        adc     a,a
6ec8 91        sub     c
6ec9 90        sub     b
6eca a2        and     d
6ecb 3c        inc     a
6ecc 36a4      ld      (hl),0a4h
6ece a5        and     l
6ecf 65        ld      h,l
6ed0 66        ld      h,(hl)
6ed1 80        add     a,b
6ed2 3d        dec     a
6ed3 80        add     a,b
6ed4 80        add     a,b
6ed5 80        add     a,b
6ed6 80        add     a,b
6ed7 80        add     a,b
6ed8 37        scf     
6ed9 3868      jr      c,6f43h          ; (+68h)
6edb b3        or      e
6edc b4        or      h
6edd b5        or      l
6ede 67        ld      h,a
6edf 80        add     a,b
6ee0 89        adc     a,c
6ee1 87        add     a,a
6ee2 80        add     a,b
6ee3 8a        adc     a,d
6ee4 b3        or      e
6ee5 b4        or      h
6ee6 80        add     a,b
6ee7 83        add     a,e
6ee8 82        add     a,d
6ee9 00        nop     
6eea 80        add     a,b
6eeb 71        ld      (hl),c
6eec 72        ld      (hl),d
6eed 9c        sbc     a,h
6eee 73        ld      (hl),e
6eef b3        or      e
6ef0 06ac      ld      b,0ach
6ef2 ad        xor     l
6ef3 09        add     hl,bc
6ef4 a9        xor     c
6ef5 ab        xor     e
6ef6 74        ld      (hl),h
6ef7 75        ld      (hl),l
6ef8 b4        or      h
6ef9 6f        ld      l,a
6efa 76        halt    
6efb b5        or      l
6efc 77        ld      (hl),a
6efd 78        ld      a,b
6efe 7c        ld      a,h
6eff b6        or      (hl)
6f00 9d        sbc     a,l
6f01 79        ld      a,c
6f02 b7        or      a
6f03 aa        xor     d
6f04 1a        ld      a,(de)
6f05 8d        adc     a,l
6f06 8e        adc     a,(hl)
6f07 1d        dec     e
6f08 1e1f      ld      e,1fh
6f0a 7d        ld      a,l
6f0b 3e22      ld      a,22h
6f0d 23        inc     hl
6f0e 24        inc     h
6f0f 6b        ld      l,e
6f10 2627      ld      h,27h
6f12 7e        ld      a,(hl)
6f13 29        add     hl,hl
6f14 70        ld      (hl),b
6f15 40        ld      b,b
6f16 6c        ld      l,h
6f17 9a        sbc     a,d
6f18 98        sbc     a,b
6f19 2f        cpl     
6f1a 3069      jr      nc,6f85h         ; (+69h)
6f1c 6a        ld      l,d
6f1d 33        inc     sp
6f1e 9f        sbc     a,a
6f1f 96        sub     (hl)
6f20 94        sub     h
6f21 92        sub     d
6f22 81        add     a,c
6f23 8b        adc     a,e
6f24 7a        ld      a,d
6f25 7b        ld      a,e
6f26 9b        sbc     a,e
6f27 97        sub     a
6f28 82        add     a,d
6f29 64        ld      h,h
6f2a 80        add     a,b
6f2b 63        ld      h,e
6f2c 42        ld      b,d
6f2d a3        and     e
6f2e 61        ld      h,c
6f2f 45        ld      b,l
6f30 a7        and     a
6f31 b1        or      c
6f32 b2        or      d
6f33 6e        ld      l,(hl)
6f34 ae        xor     (hl)
6f35 b0        or      b
6f36 4c        ld      c,h
6f37 4d        ld      c,l
6f38 4e        ld      c,(hl)
6f39 a6        and     (hl)
6f3a 50        ld      d,b
6f3b 51        ld      d,c
6f3c 52        ld      d,d
6f3d 53        ld      d,e
6f3e 54        ld      d,h
6f3f 55        ld      d,l
6f40 56        ld      d,(hl)
6f41 60        ld      h,b
6f42 62        ld      h,d
6f43 af        xor     a
6f44 5a        ld      e,d
6f45 a0        and     b
6f46 a1        and     c
6f47 8f        adc     a,a
6f48 91        sub     c
6f49 90        sub     b
6f4a a2        and     d
6f4b 3c        inc     a
6f4c 36a4      ld      (hl),0a4h
6f4e a5        and     l
6f4f 65        ld      h,l
6f50 66        ld      h,(hl)
6f51 80        add     a,b
6f52 3d        dec     a
6f53 80        add     a,b
6f54 80        add     a,b
6f55 80        add     a,b
6f56 80        add     a,b
6f57 80        add     a,b
6f58 37        scf     
6f59 3868      jr      c,6fc3h          ; (+68h)
6f5b 3132b5    ld      sp,0b532h
6f5e 9e        sbc     a,(hl)
6f5f 80        add     a,b
6f60 95        sub     l
6f61 93        sub     e
6f62 80        add     a,b
6f63 8a        adc     a,d
6f64 2626      ld      h,26h
6f66 80        add     a,b
6f67 83        add     a,e
6f68 82        add     a,d
6f69 00        nop     
6f6a 80        add     a,b
6f6b 010203    ld      bc,0302h
6f6e 04        inc     b
6f6f 05        dec     b
6f70 0607      ld      b,07h
6f72 08        ex      af,af'
6f73 09        add     hl,bc
6f74 0a        ld      a,(bc)
6f75 0b        dec     bc
6f76 0c        inc     c
6f77 0d        dec     c
6f78 0e0f      ld      c,0fh
6f7a 1011      djnz    6f8dh            ; (+11h)
6f7c 12        ld      (de),a
6f7d 13        inc     de
6f7e 14        inc     d
6f7f 15        dec     d
6f80 1617      ld      d,17h
6f82 1819      jr      6f9dh            ; (+19h)
6f84 1a        ld      a,(de)
6f85 1b        dec     de
6f86 1c        inc     e
6f87 1d        dec     e
6f88 1e1f      ld      e,1fh
6f8a 2021      jr      nz,6fadh         ; (+21h)
6f8c 222324    ld      (2423h),hl
6f8f 25        dec     h
6f90 2663      ld      h,63h
6f92 2864      jr      z,6ff8h          ; (+64h)
6f94 6c        ld      l,h
6f95 5f        ld      e,a
6f96 2c        inc     l
6f97 99        sbc     a,c
6f98 3d        dec     a
6f99 3e30      ld      a,30h
6f9b 5d        ld      e,l
6f9c 5e        ld      e,(hl)
6f9d 60        ld      h,b
6f9e 34        inc     (hl)
6f9f 35        dec     (hl)
6fa0 88        adc     a,b
6fa1 86        add     a,(hl)
6fa2 81        add     a,c
6fa3 84        add     a,h
6fa4 5b        ld      e,e
6fa5 5c        ld      e,h
6fa6 85        add     a,l
6fa7 83        add     a,e
6fa8 82        add     a,d
6fa9 3b        dec     sp
6faa 80        add     a,b
6fab 41        ld      b,c
6fac 42        ld      b,d
6fad 43        ld      b,e
6fae 44        ld      b,h
6faf 45        ld      b,l
6fb0 46        ld      b,(hl)
6fb1 47        ld      b,a
6fb2 48        ld      c,b
6fb3 49        ld      c,c
6fb4 4a        ld      c,d
6fb5 4b        ld      c,e
6fb6 4c        ld      c,h
6fb7 4d        ld      c,l
6fb8 4e        ld      c,(hl)
6fb9 4f        ld      c,a
6fba 50        ld      d,b
6fbb 51        ld      d,c
6fbc 52        ld      d,d
6fbd 53        ld      d,e
6fbe 54        ld      d,h
6fbf 55        ld      d,l
6fc0 56        ld      d,(hl)
6fc1 57        ld      d,a
6fc2 58        ld      e,b
6fc3 59        ld      e,c
6fc4 5a        ld      e,d
6fc5 a0        and     b
6fc6 a1        and     c
6fc7 8f        adc     a,a
6fc8 91        sub     c
6fc9 90        sub     b
6fca a2        and     d
6fcb 61        ld      h,c
6fcc 62        ld      h,d
6fcd a4        and     h
6fce a5        and     l
6fcf 65        ld      h,l
6fd0 66        ld      h,(hl)
6fd1 80        add     a,b
6fd2 68        ld      l,b
6fd3 80        add     a,b
6fd4 80        add     a,b
6fd5 80        add     a,b
6fd6 80        add     a,b
6fd7 80        add     a,b
6fd8 3c        inc     a
6fd9 7c        ld      a,h
6fda 70        ld      (hl),b
6fdb 80        add     a,b
6fdc 80        add     a,b
6fdd 80        add     a,b
6fde 74        ld      (hl),h
6fdf 75        ld      (hl),l
6fe0 89        adc     a,c
6fe1 87        add     a,a
6fe2 80        add     a,b
6fe3 8a        adc     a,d
6fe4 80        add     a,b
6fe5 80        add     a,b
6fe6 80        add     a,b
6fe7 83        add     a,e
6fe8 82        add     a,d
6fe9 7b        ld      a,e
6fea 80        add     a,b
6feb 27        daa     
6fec 29        add     hl,hl
6fed 2a2b2d    ld      hl,(2d2bh)
6ff0 2e2f      ld      l,2fh
6ff2 313233    ld      sp,3332h
6ff5 3637      ld      (hl),37h
6ff7 3839      jr      c,7032h          ; (+39h)
6ff9 3a1011    ld      a,(1110h)
6ffc 12        ld      (de),a
6ffd 13        inc     de
6ffe 14        inc     d
6fff 15        dec     d
7000 1617      ld      d,17h
7002 1819      jr      701dh            ; (+19h)
7004 1a        ld      a,(de)
7005 b8        cp      b
7006 b9        cp      c
7007 ba        cp      d
7008 bb        cp      e
7009 bc        cp      h
700a bd        cp      l
700b be        cp      (hl)
700c bf        cp      a
700d c0        ret     nz

700e c1        pop     bc
700f 25        dec     h
7010 2663      ld      h,63h
7012 75        ld      (hl),l
7013 64        ld      h,h
7014 6c        ld      l,h
7015 5f        ld      e,a
7016 2c        inc     l
7017 9a        sbc     a,d
7018 98        sbc     a,b
7019 7e        ld      a,(hl)
701a 305d      jr      nc,7079h         ; (+5dh)
701c 5e        ld      e,(hl)
701d 60        ld      h,b
701e 34        inc     (hl)
701f 96        sub     (hl)
7020 94        sub     h
7021 92        sub     d
7022 81        add     a,c
7023 8b        adc     a,e
7024 5b        ld      e,e
7025 5c        ld      e,h
7026 9b        sbc     a,e
7027 97        sub     a
7028 82        add     a,d
7029 3b        dec     sp
702a 80        add     a,b
702b 67        ld      h,a
702c 69        ld      l,c
702d 6a        ld      l,d
702e 6b        ld      l,e
702f 6d        ld      l,l
7030 6e        ld      l,(hl)
7031 6f        ld      l,a
7032 71        ld      (hl),c
7033 72        ld      (hl),d
7034 73        ld      (hl),e
7035 76        halt    
7036 77        ld      (hl),a
7037 78        ld      a,b
7038 79        ld      a,c
7039 7a        ld      a,d
703a 50        ld      d,b
703b 51        ld      d,c
703c 52        ld      d,d
703d 53        ld      d,e
703e 54        ld      d,h
703f 55        ld      d,l
7040 56        ld      d,(hl)
7041 57        ld      d,a
7042 58        ld      e,b
7043 59        ld      e,c
7044 5a        ld      e,d
7045 a0        and     b
7046 a1        and     c
7047 8f        adc     a,a
7048 91        sub     c
7049 90        sub     b
704a a2        and     d
704b 61        ld      h,c
704c 62        ld      h,d
704d a4        and     h
704e a5        and     l
704f 65        ld      h,l
7050 66        ld      h,(hl)
7051 80        add     a,b
7052 68        ld      l,b
7053 80        add     a,b
7054 80        add     a,b
7055 80        add     a,b
7056 80        add     a,b
7057 80        add     a,b
7058 3c        inc     a
7059 7d        ld      a,l
705a 70        ld      (hl),b
705b 80        add     a,b
705c 80        add     a,b
705d 80        add     a,b
705e 74        ld      (hl),h
705f 75        ld      (hl),l
7060 95        sub     l
7061 93        sub     e
7062 80        add     a,b
7063 8a        adc     a,d
7064 80        add     a,b
7065 80        add     a,b
7066 80        add     a,b
7067 83        add     a,e
7068 82        add     a,d
7069 7b        ld      a,e
706a 00        nop     
706b 010203    ld      bc,0302h
706e 0f        rrca    
706f 0d        dec     c
7070 04        inc     b
7071 08        ex      af,af'
7072 00        nop     
7073 05        dec     b
7074 05        dec     b
7075 00        nop     
7076 0605      ld      b,05h
7078 00        nop     
7079 05        dec     b
707a fb        ei      
707b 00        nop     
707c 06fb      ld      b,0fbh
707e 00        nop     
707f 0f        rrca    
7080 0a        ld      a,(bc)
7081 00        nop     
7082 0f        rrca    
7083 0c        inc     c
7084 00        nop     
7085 00        nop     
7086 a9        xor     c
7087 103a      djnz    70c3h            ; (+3ah)
7089 00        nop     
708a aa        xor     d
708b 103b      djnz    70c8h            ; (+3bh)
708d 00        nop     
708e 0b        dec     bc
708f 02        ld      (bc),a
7090 0b        dec     bc
7091 010b03    ld      bc,030bh
7094 05        dec     b
7095 1000      djnz    7097h            ; (+00h)
7097 0610      ld      b,10h
7099 00        nop     
709a 05        dec     b
709b f0        ret     p

709c 00        nop     
709d 06f0      ld      b,0f0h
709f 00        nop     
70a0 06f0      ld      b,0f0h
70a2 00        nop     
70a3 03        inc     bc
70a4 e0        ret     po

70a5 1062      djnz    7109h            ; (+62h)
70a7 00        nop     
70a8 0e07      ld      c,07h
70aa 04        inc     b
70ab 00        nop     
70ac 07        rlca    
70ad fc000d    call    m,0d00h
70b0 bf        cp      a
70b1 06f6      ld      b,0f6h
70b3 105e      djnz    7113h            ; (+5eh)
70b5 060a      ld      b,0ah
70b7 00        nop     
70b8 105f      djnz    7119h            ; (+5fh)
70ba 105e      djnz    711ah            ; (+5eh)
70bc 00        nop     
70bd a8        xor     b
70be 107e      djnz    713eh            ; (+7eh)
70c0 00        nop     
70c1 ad        xor     l
70c2 06fd      ld      b,0fdh
70c4 106f      djnz    7135h            ; (+6fh)
70c6 0603      ld      b,03h
70c8 00        nop     
70c9 0f        rrca    
70ca 1b        dec     de
70cb 00        nop     
70cc 0f        rrca    
70cd 1b        dec     de
70ce 00        nop     
70cf 0f        rrca    
70d0 1a        ld      a,(de)
70d1 00        nop     
70d2 a9        xor     c
70d3 0d        dec     c
70d4 bc        cp      h
70d5 060b      ld      b,0bh
70d7 103c      djnz    7115h            ; (+3ch)
70d9 06f6      ld      b,0f6h
70db 1003      djnz    70e0h            ; (+03h)
70dd 06ff      ld      b,0ffh
70df 0d        dec     c
70e0 aa        xor     d
70e1 00        nop     
70e2 0f        rrca    
70e3 1d        dec     e
70e4 00        nop     
70e5 0f        rrca    
70e6 1c        inc     e
70e7 00        nop     
70e8 e7        rst     20h
70e9 1068      djnz    7153h            ; (+68h)
70eb 00        nop     
70ec e0        ret     po

70ed 1063      djnz    7152h            ; (+63h)
70ef 1061      djnz    7152h            ; (+61h)
70f1 00        nop     
70f2 00        nop     
70f3 81        add     a,c
70f4 0602      ld      b,02h
70f6 106f      djnz    7167h            ; (+6fh)
70f8 06fe      ld      b,0feh
70fa 00        nop     
70fb 8f        adc     a,a
70fc 105c      djnz    715ah            ; (+5ch)
70fe 00        nop     
70ff 81        add     a,c
7100 105c      djnz    715eh            ; (+5ch)
7102 00        nop     
7103 81        add     a,c
7104 07        rlca    
7105 04        inc     b
7106 1005      djnz    710dh            ; (+05h)
7108 00        nop     
7109 8f        adc     a,a
710a 1028      djnz    7134h            ; (+28h)
710c 00        nop     
710d c1        pop     bc
710e 0602      ld      b,02h
7110 106f      djnz    7181h            ; (+6fh)
7112 06fe      ld      b,0feh
7114 00        nop     
7115 cf        rst     08h
7116 105c      djnz    7174h            ; (+5ch)
7118 00        nop     
7119 c1        pop     bc
711a 105c      djnz    7178h            ; (+5ch)
711c 00        nop     
711d c1        pop     bc
711e 07        rlca    
711f 04        inc     b
7120 06fd      ld      b,0fdh
7122 1045      djnz    7169h            ; (+45h)
7124 0603      ld      b,03h
7126 00        nop     
7127 cf        rst     08h
7128 06fe      ld      b,0feh
712a 1028      djnz    7154h            ; (+28h)
712c 0602      ld      b,02h
712e 00        nop     
712f 09        add     hl,bc
7130 5e        ld      e,(hl)
7131 09        add     hl,bc
7132 5b        ld      e,e
7133 09        add     hl,bc
7134 5f        ld      e,a
7135 09        add     hl,bc
7136 5c        ld      e,h
7137 09        add     hl,bc
7138 5d        ld      e,l
7139 09        add     hl,bc
713a 27        daa     
713b 09        add     hl,bc
713c 29        add     hl,hl
713d 09        add     hl,bc
713e 2a092b    ld      hl,(2b09h)
7141 09        add     hl,bc
7142 2d        dec     l
7143 09        add     hl,bc
7144 2e09      ld      l,09h
7146 2f        cpl     
7147 09        add     hl,bc
7148 310932    ld      sp,3209h
714b 09        add     hl,bc
714c 33        inc     sp
714d 00        nop     
714e 010203    ld      bc,0302h
7151 04        inc     b
7152 07        rlca    
7153 09        add     hl,bc
7154 0c        inc     c
7155 0f        rrca    
7156 12        ld      (de),a
7157 15        dec     d
7158 181b      jr      7175h            ; (+1bh)
715a 1c        inc     e
715b 2024      jr      nz,7181h         ; (+24h)
715d 2628      ld      h,28h
715f 2a2d30    ld      hl,(302dh)
7162 33        inc     sp
7163 3639      ld      (hl),39h
7165 3a3e3f    ld      a,(3f3eh)
7168 42        ld      b,d
7169 45        ld      b,l
716a 4e        ld      c,(hl)
716b 53        ld      d,e
716c 57        ld      d,a
716d 5f        ld      e,a
716e 62        ld      h,d
716f 65        ld      h,l
7170 68        ld      l,b
7171 78        ld      a,b
7172 7b        ld      a,e
7173 7e        ld      a,(hl)
7174 82        add     a,d
7175 88        adc     a,b
7176 89        adc     a,c
7177 91        sub     c
7178 95        sub     l
7179 99        sbc     a,c
717a 9f        sbc     a,a
717b a3        and     e
717c ab        xor     e
717d af        xor     a
717e b3        or      e
717f bd        cp      l
7180 c5        push    bc
7181 c7        rst     00h
7182 c9        ret     

7183 cbcd      set     1,l
7185 cf        rst     08h
7186 d1        pop     de
7187 d3d5      out     (0d5h),a
7189 d7        rst     10h
718a d9        exx     
718b dbdd      in      a,(0ddh)
718d df        rst     18h
718e e1        pop     hl
718f 00        nop     
; Disassembly of the file "E:\mTUTOR\l4\ppttut-getvar.bin"
; 
; CPU Type: Z80
; 
; Created with dZ80 2.0
; 
; on Thursday, 30 of November 2017 at 06:52 PM
; 

; fputvar
7190 3e80      ld      a,80h
7192 1801      jr      7195h            ; (+01h)  ; putvar

; nputvar
7194 af        xor     a

; putvar
7195 57        ld      d,a
7196 3a6b7d    ld      a,(7d6bh)
7199 aa        xor     d
719a f2b971    jp      p,71b9h
719d aa        xor     d
719e fab371    jp      m,71b3h
71a1 010600    ld      bc,0006h
71a4 11257d    ld      de,7d25h
71a7 edb0      ldir    
71a9 3e80      ld      a,80h
71ab 322b7d    ld      (7d2bh),a
71ae cda77a    call    7aa7h		; ftoi
71b1 1806      jr      71b9h            ; (+06h)
71b3 cd757a    call    7a75h		; itof
71b6 21257d    ld      hl,7d25h
71b9 eb        ex      de,hl
71ba 3a6b7d    ld      a,(7d6bh)
71bd e67f      and     7fh
71bf 07        rlca    
71c0 4f        ld      c,a
71c1 0600      ld      b,00h
71c3 21cf71    ld      hl,71cfh
71c6 09        add     hl,bc
71c7 4e        ld      c,(hl)
71c8 23        inc     hl
71c9 46        ld      b,(hl)
71ca c5        push    bc
71cb 2a697d    ld      hl,(7d69h)
71ce c9        ret     

71cf d5        push    de
71d0 71        ld      (hl),c
71d1 d7        rst     10h
71d2 71        ld      (hl),c
71d3 db71      in      a,(71h)
71d5 73        ld      (hl),e
71d6 c9        ret     

71d7 72        ld      (hl),d
71d8 23        inc     hl
71d9 73        ld      (hl),e
71da c9        ret     

71db 0606      ld      b,06h
71dd 1a        ld      a,(de)
71de 13        inc     de
71df 77        ld      (hl),a
71e0 23        inc     hl
71e1 05        dec     b
71e2 20f9      jr      nz,71ddh         ; (-07h)
71e4 c9        ret     


; getvar
71e5 af        xor     a
71e6 326b7d    ld      (7d6bh),a
71e9 2a677d    ld      hl,(7d67h)
71ec 7e        ld      a,(hl)
71ed feff      cp      0ffh
71ef 281f      jr      z,7210h          ; (+1fh)
71f1 23        inc     hl
71f2 eb        ex      de,hl
71f3 07        rlca    
71f4 4f        ld      c,a
71f5 0600      ld      b,00h
71f7 210072    ld      hl,7200h
71fa 09        add     hl,bc
71fb 4e        ld      c,(hl)
71fc 23        inc     hl
71fd 46        ld      b,(hl)
71fe c5        push    bc
71ff c9        ret     

7200 1872      jr      7274h            ; (+72h)
7202 2672      ld      h,72h
7204 2c        inc     l
7205 72        ld      (hl),d
7206 4d        ld      c,l
7207 72        ld      (hl),d
7208 57        ld      d,a
7209 72        ld      (hl),d
720a 72        ld      (hl),d
720b 72        ld      (hl),d
720c 7c        ld      a,h
720d 72        ld      (hl),d
720e 8c        adc     a,h
720f 72        ld      (hl),d
7210 326b7d    ld      (7d6bh),a
7213 23        inc     hl
7214 22677d    ld      (7d67h),hl
7217 c9        ret     

7218 eb        ex      de,hl
7219 1600      ld      d,00h
721b 5e        ld      e,(hl)
721c 23        inc     hl
721d 22677d    ld      (7d67h),hl
7220 eb        ex      de,hl
7221 af        xor     a
7222 326b7d    ld      (7d6bh),a
7225 c9        ret     

7226 eb        ex      de,hl
7227 56        ld      d,(hl)
7228 23        inc     hl
7229 5e        ld      e,(hl)
722a 18f0      jr      721ch            ; (-10h)
722c 2afc7f    ld      hl,(7ffch)
722f e5        push    hl
7230 eb        ex      de,hl
7231 1600      ld      d,00h
7233 5e        ld      e,(hl)
7234 23        inc     hl
7235 22677d    ld      (7d67h),hl
7238 e1        pop     hl
7239 19        add     hl,de
723a 22697d    ld      (7d69h),hl
723d af        xor     a
723e 326b7d    ld      (7d6bh),a
7241 6e        ld      l,(hl)
7242 7d        ld      a,l
7243 a7        and     a
7244 fa4a72    jp      m,724ah
7247 2600      ld      h,00h
7249 c9        ret     

724a 26ff      ld      h,0ffh
724c c9        ret     

724d 2afc7f    ld      hl,(7ffch)
7250 e5        push    hl
7251 eb        ex      de,hl
7252 56        ld      d,(hl)
7253 23        inc     hl
7254 5e        ld      e,(hl)
7255 18dd      jr      7234h            ; (-23h)
7257 2afc7f    ld      hl,(7ffch)
725a e5        push    hl
725b eb        ex      de,hl
725c 1600      ld      d,00h
725e 5e        ld      e,(hl)
725f 23        inc     hl
7260 22677d    ld      (7d67h),hl
7263 e1        pop     hl
7264 19        add     hl,de
7265 22697d    ld      (7d69h),hl
7268 3e01      ld      a,01h
726a 326b7d    ld      (7d6bh),a
726d 56        ld      d,(hl)
726e 23        inc     hl
726f 5e        ld      e,(hl)
7270 eb        ex      de,hl
7271 c9        ret     

7272 2afc7f    ld      hl,(7ffch)
7275 e5        push    hl
7276 eb        ex      de,hl
7277 56        ld      d,(hl)
7278 23        inc     hl
7279 5e        ld      e,(hl)
727a 18e3      jr      725fh            ; (-1dh)
727c eb        ex      de,hl
727d 1600      ld      d,00h
727f 5e        ld      e,(hl)
7280 23        inc     hl
7281 22677d    ld      (7d67h),hl
7284 2a967d    ld      hl,(7d96h)
7287 19        add     hl,de
7288 44        ld      b,h
7289 4d        ld      c,l
728a 1806      jr      7292h            ; (+06h)  ; expr
728c eb        ex      de,hl
728d 56        ld      d,(hl)
728e 23        inc     hl
728f 5e        ld      e,(hl)
7290 18ee      jr      7280h            ; (-12h)

; expr
7292 af        xor     a
7293 32707d    ld      (7d70h),a
7296 cda172    call    72a1h		; exprna
7299 3a707d    ld      a,(7d70h)
729c a7        and     a
729d c8        ret     z

729e c3a85c    jp      5ca8h		; errorx

; exprna
72a1 0a        ld      a,(bc)
72a2 03        inc     bc
72a3 07        rlca    
72a4 1600      ld      d,00h
72a6 5f        ld      e,a
72a7 21cf72    ld      hl,72cfh
72aa 19        add     hl,de
72ab 5e        ld      e,(hl)
72ac 23        inc     hl
72ad 56        ld      d,(hl)
72ae eb        ex      de,hl
72af 7c        ld      a,h
72b0 a7        and     a
72b1 fab572    jp      m,72b5h
72b4 e9        jp      (hl)
72b5 e67f      and     7fh
72b7 07        rlca    
72b8 5f        ld      e,a
72b9 1600      ld      d,00h
72bb 7d        ld      a,l
72bc 21c572    ld      hl,72c5h
72bf 19        add     hl,de
72c0 5e        ld      e,(hl)
72c1 23        inc     hl
72c2 56        ld      d,(hl)
72c3 eb        ex      de,hl
72c4 e9        jp      (hl)
72c5 9a        sbc     a,d
72c6 73        ld      (hl),e
72c7 017412    ld      bc,1274h
72ca 7b        ld      a,e
72cb 4c        ld      c,h
72cc 7b        ld      a,e
72cd 53        ld      d,e
72ce 74        ld      (hl),h
72cf 8b        adc     a,e
72d0 73        ld      (hl),e
72d1 92        sub     d
72d2 73        ld      (hl),e
72d3 00        nop     
72d4 80        add     a,b
72d5 40        ld      b,b
72d6 80        add     a,b
72d7 018041    ld      bc,4180h
72da 80        add     a,b
72db a8        xor     b
72dc 5c        ld      e,h
72dd a8        xor     b
72de 5c        ld      e,h
72df 2080      jr      nz,7261h         ; (-80h)
72e1 60        ld      h,b
72e2 80        add     a,b
72e3 218061    ld      hl,6180h
72e6 80        add     a,b
72e7 61        ld      h,c
72e8 76        halt    
72e9 72        ld      (hl),d
72ea 74        ld      (hl),h
72eb 80        add     a,b
72ec 74        ld      (hl),h
72ed 86        add     a,(hl)
72ee 74        ld      (hl),h
72ef 8f        adc     a,a
72f0 74        ld      (hl),h
72f1 0f        rrca    
72f2 75        ld      (hl),l
72f3 19        add     hl,de
72f4 75        ld      (hl),l
72f5 1c        inc     e
72f6 75        ld      (hl),l
72f7 96        sub     (hl)
72f8 74        ld      (hl),h
72f9 9d        sbc     a,l
72fa 74        ld      (hl),h
72fb 00        nop     
72fc 00        nop     
72fd 00        nop     
72fe 00        nop     
72ff 00        nop     
7300 84        add     a,h
7301 0184a6    ld      bc,0a684h
7304 74        ld      (hl),h
7305 b1        or      c
7306 74        ld      (hl),h
7307 04        inc     b
7308 75        ld      (hl),l
7309 c474d2    call    nz,0d274h
730c 74        ld      (hl),h
730d e474ee    call    po,0ee74h
7310 74        ld      (hl),h
7311 7c        ld      a,h
7312 74        ld      (hl),h
7313 75        ld      (hl),l
7314 75        ld      (hl),l
7315 42        ld      b,d
7316 80        add     a,b
7317 62        ld      h,d
7318 80        add     a,b
7319 f3        di      
731a 75        ld      (hl),l
731b fd75a1    ld      (iy-5fh),l
731e 75        ld      (hl),l
731f 07        rlca    
7320 76        halt    
7321 11768d    ld      de,8d76h
7324 75        ld      (hl),l
7325 bc        cp      h
7326 74        ld      (hl),h
7327 00        nop     
7328 00        nop     
7329 ae        xor     (hl)
732a 75        ld      (hl),l
732b b6        or      (hl)
732c 75        ld      (hl),l
732d bc        cp      h
732e 75        ld      (hl),l
732f c47532    call    nz,3275h
7332 76        halt    
7333 3a764e    ld      a,(4e76h)
7336 76        halt    
7337 51        ld      d,c
7338 76        halt    
7339 55        ld      d,l
733a 76        halt    
733b 1c        inc     e
733c 76        halt    
733d 018206    ld      bc,0682h
7340 82        add     a,d
7341 04        inc     b
7342 82        add     a,d
7343 03        inc     bc
7344 82        add     a,d
7345 02        ld      (bc),a
7346 82        add     a,d
7347 05        dec     b
7348 82        add     a,d
7349 018306    ld      bc,0683h
734c 83        add     a,e
734d 04        inc     b
734e 83        add     a,e
734f 03        inc     bc
7350 83        add     a,e
7351 02        ld      (bc),a
7352 83        add     a,e
7353 05        dec     b
7354 83        add     a,e
7355 fd742b    ld      (iy+2bh),h
7358 76        halt    
7359 3e76      ld      a,76h
735b 3676      ld      (hl),76h
735d d475dd    call    nc,0dd75h
7360 75        ld      (hl),l
7361 80        add     a,b
7362 80        add     a,b
7363 c0        ret     nz

7364 80        add     a,b
7365 81        add     a,c
7366 80        add     a,b
7367 c1        pop     bc
7368 80        add     a,b
7369 a0        and     b
736a 80        add     a,b
736b e0        ret     po

736c 80        add     a,b
736d a1        and     c
736e 80        add     a,b
736f e1        pop     hl
7370 80        add     a,b
7371 c280e2    jp      nz,0e280h
7374 80        add     a,b
7375 00        nop     
7376 81        add     a,c
7377 02        ld      (bc),a
7378 81        add     a,c
7379 04        inc     b
737a 81        add     a,c
737b 018103    ld      bc,0381h
737e 81        add     a,c
737f 05        dec     b
7380 81        add     a,c
7381 48        ld      c,b
7382 75        ld      (hl),l
7383 e5        push    hl
7384 c3a172    jp      72a1h		; exprna
7387 d5        push    de
7388 c3a172    jp      72a1h		; exprna
738b 0a        ld      a,(bc)
738c 03        inc     bc
738d 1600      ld      d,00h
738f 5f        ld      e,a
7390 18f5      jr      7387h            ; (-0bh)
7392 0a        ld      a,(bc)
7393 03        inc     bc
7394 57        ld      d,a
7395 0a        ld      a,(bc)
7396 03        inc     bc
7397 5f        ld      e,a
7398 18ed      jr      7387h            ; (-13h)
739a a7        and     a
739b faad73    jp      m,73adh
739e f5        push    af
739f 3a387f    ld      a,(7f38h)
73a2 fe03      cp      03h
73a4 d2a85c    jp      nc,5ca8h		; errorx
73a7 f1        pop     af
73a8 2afc7f    ld      hl,(7ffch)
73ab 1803      jr      73b0h            ; (+03h)
73ad 2a277f    ld      hl,(7f27h)
73b0 e5        push    hl
73b1 07        rlca    
73b2 07        rlca    
73b3 f5        push    af
73b4 0a        ld      a,(bc)
73b5 3805      jr      c,73bch          ; (+05h)
73b7 5f        ld      e,a
73b8 1600      ld      d,00h
73ba 1804      jr      73c0h            ; (+04h)
73bc 57        ld      d,a
73bd 03        inc     bc
73be 0a        ld      a,(bc)
73bf 5f        ld      e,a
73c0 03        inc     bc
73c1 f1        pop     af
73c2 e1        pop     hl
73c3 19        add     hl,de
73c4 07        rlca    
73c5 3002      jr      nc,73c9h         ; (+02h)
73c7 18ba      jr      7383h            ; (-46h)
73c9 22697d    ld      (7d69h),hl
73cc 0f        rrca    
73cd 0f        rrca    
73ce 0f        rrca    
73cf e603      and     03h
73d1 2809      jr      z,73dch          ; (+09h)
73d3 3d        dec     a
73d4 2815      jr      z,73ebh          ; (+15h)
73d6 3d        dec     a
73d7 281c      jr      z,73f5h          ; (+1ch)
73d9 c3a85c    jp      5ca8h		; errorx
73dc 5e        ld      e,(hl)
73dd 7b        ld      a,e
73de a7        and     a
73df fae673    jp      m,73e6h
73e2 1600      ld      d,00h
73e4 1802      jr      73e8h            ; (+02h)
73e6 16ff      ld      d,0ffh
73e8 af        xor     a
73e9 1805      jr      73f0h            ; (+05h)
73eb 56        ld      d,(hl)
73ec 23        inc     hl
73ed 5e        ld      e,(hl)
73ee 3e01      ld      a,01h
73f0 326b7d    ld      (7d6bh),a
73f3 1892      jr      7387h            ; (-6eh)
73f5 3e82      ld      a,82h
73f7 326b7d    ld      (7d6bh),a
73fa 110500    ld      de,0005h
73fd 19        add     hl,de
73fe c37d75    jp      757dh
7401 d1        pop     de
7402 e1        pop     hl
7403 c5        push    bc
7404 f5        push    af
7405 1b        dec     de
7406 7a        ld      a,d
7407 e6c0      and     0c0h
7409 c2a85c    jp      nz,5ca8h		; errorx
740c 23        inc     hl
740d 23        inc     hl
740e 23        inc     hl
740f 46        ld      b,(hl)
7410 23        inc     hl
7411 4e        ld      c,(hl)
7412 c5        push    bc
7413 e1        pop     hl
7414 7c        ld      a,h
7415 feff      cp      0ffh
7417 caa85c    jp      z,5ca8h		; errorx
741a f1        pop     af
741b f5        push    af
741c 19        add     hl,de
741d 0f        rrca    
741e e603      and     03h
7420 280f      jr      z,7431h          ; (+0fh)
7422 19        add     hl,de
7423 3d        dec     a
7424 280b      jr      z,7431h          ; (+0bh)
7426 3d        dec     a
7427 c2a85c    jp      nz,5ca8h		; errorx
742a e5        push    hl
742b 62        ld      h,d
742c 6b        ld      l,e
742d 29        add     hl,hl
742e 29        add     hl,hl
742f d1        pop     de
7430 19        add     hl,de
7431 eb        ex      de,hl
7432 2a2d7f    ld      hl,(7f2dh)
7435 cdf95d    call    5df9h		; comphl
7438 19        add     hl,de
7439 7c        ld      a,h
743a a7        and     a
743b f2a85c    jp      p,5ca8h		; errorx
743e eb        ex      de,hl
743f f1        pop     af
7440 0f        rrca    
7441 c1        pop     bc
7442 da8373    jp      c,7383h
7445 e603      and     03h
7447 22697d    ld      (7d69h),hl
744a b7        or      a
744b 288f      jr      z,73dch          ; (-71h)
744d 3d        dec     a
744e 289b      jr      z,73ebh          ; (-65h)
7450 c3f573    jp      73f5h
7453 2afa7f    ld      hl,(7ffah)
7456 b7        or      a
7457 2803      jr      z,745ch          ; (+03h)
7459 2a337f    ld      hl,(7f33h)
745c e5        push    hl
745d 60        ld      h,b
745e 69        ld      l,c
745f 56        ld      d,(hl)
7460 23        inc     hl
7461 5e        ld      e,(hl)
7462 23        inc     hl
7463 44        ld      b,h
7464 4d        ld      c,l
7465 e1        pop     hl
7466 19        add     hl,de
7467 22697d    ld      (7d69h),hl
746a 3e03      ld      a,03h
746c 326b7d    ld      (7d6bh),a
746f c38373    jp      7383h
7472 e1        pop     hl
7473 3a6b7d    ld      a,(7d6bh)
7476 e67f      and     7fh
7478 326b7d    ld      (7d6bh),a
747b c9        ret     

747c e1        pop     hl
747d c3a172    jp      72a1h		; exprna
7480 d1        pop     de
7481 e1        pop     hl
7482 19        add     hl,de
7483 c38373    jp      7383h
7486 e1        pop     hl
7487 cdf95d    call    5df9h		; comphl
748a d1        pop     de
748b 19        add     hl,de
748c c38373    jp      7383h
748f e1        pop     hl
7490 cdf95d    call    5df9h		; comphl
7493 c38373    jp      7383h
7496 d1        pop     de
7497 e1        pop     hl
7498 d5        push    de
7499 73        ld      (hl),e
749a c3a172    jp      72a1h		; exprna
749d d1        pop     de
749e e1        pop     hl
749f d5        push    de
74a0 72        ld      (hl),d
74a1 23        inc     hl
74a2 73        ld      (hl),e
74a3 c3a172    jp      72a1h		; exprna
74a6 d1        pop     de
74a7 e1        pop     hl
74a8 7a        ld      a,d
74a9 a4        and     h
74aa 57        ld      d,a
74ab 7b        ld      a,e
74ac a5        and     l
74ad 5f        ld      e,a
74ae c38773    jp      7387h
74b1 d1        pop     de
74b2 e1        pop     hl
74b3 7c        ld      a,h
74b4 b2        or      d
74b5 67        ld      h,a
74b6 7d        ld      a,l
74b7 b3        or      e
74b8 6f        ld      l,a
74b9 c38373    jp      7383h
74bc e1        pop     hl
74bd 23        inc     hl
74be 56        ld      d,(hl)
74bf 23        inc     hl
74c0 5e        ld      e,(hl)
74c1 c38773    jp      7387h
74c4 d1        pop     de
74c5 e1        pop     hl
74c6 1b        dec     de
74c7 7a        ld      a,d
74c8 a7        and     a
74c9 fa8373    jp      m,7383h
74cc 29        add     hl,hl
74cd 30f7      jr      nc,74c6h         ; (-09h)
74cf 23        inc     hl
74d0 18f4      jr      74c6h            ; (-0ch)
74d2 d1        pop     de
74d3 e1        pop     hl
74d4 1b        dec     de
74d5 7a        ld      a,d
74d6 a7        and     a
74d7 fa8373    jp      m,7383h
74da 7c        ld      a,h
74db 84        add     a,h
74dc 7c        ld      a,h
74dd 1f        rra     
74de 67        ld      h,a
74df 7d        ld      a,l
74e0 1f        rra     
74e1 6f        ld      l,a
74e2 18f0      jr      74d4h            ; (-10h)
74e4 d1        pop     de
74e5 7a        ld      a,d
74e6 2f        cpl     
74e7 57        ld      d,a
74e8 7b        ld      a,e
74e9 2f        cpl     
74ea 5f        ld      e,a
74eb c38773    jp      7387h
74ee e1        pop     hl
74ef 7c        ld      a,h
74f0 a7        and     a
74f1 f28373    jp      p,7383h
74f4 2f        cpl     
74f5 67        ld      h,a
74f6 7d        ld      a,l
74f7 2f        cpl     
74f8 6f        ld      l,a
74f9 23        inc     hl
74fa c38373    jp      7383h
74fd e1        pop     hl
74fe 2a697d    ld      hl,(7d69h)
7501 c38373    jp      7383h
7504 d1        pop     de
7505 e1        pop     hl
7506 7c        ld      a,h
7507 aa        xor     d
7508 67        ld      h,a
7509 7d        ld      a,l
750a ab        xor     e
750b 6f        ld      l,a
750c c38373    jp      7383h
750f d1        pop     de
7510 e1        pop     hl
7511 c5        push    bc
7512 cddc5d    call    5ddch		; muldehl
7515 c1        pop     bc
7516 c38773    jp      7387h
7519 af        xor     a
751a 1802      jr      751eh            ; (+02h)
751c 3e01      ld      a,01h
751e 326c7d    ld      (7d6ch),a
7521 e1        pop     hl
7522 d1        pop     de
7523 c5        push    bc
7524 7a        ld      a,d
7525 ac        xor     h
7526 f5        push    af
7527 cd015e    call    5e01h		; abshl
752a eb        ex      de,hl
752b cd015e    call    5e01h		; abshl
752e 44        ld      b,h
752f 4d        ld      c,l
7530 cdb55d    call    5db5h		; divbcde
7533 3a6c7d    ld      a,(7d6ch)
7536 a7        and     a
7537 2803      jr      z,753ch          ; (+03h)
7539 210000    ld      hl,0000h
753c 09        add     hl,bc
753d f1        pop     af
753e f24475    jp      p,7544h
7541 cdf95d    call    5df9h		; comphl
7544 c1        pop     bc
7545 c38373    jp      7383h
7548 d1        pop     de
7549 7a        ld      a,d
754a a7        and     a
754b 2022      jr      nz,756fh         ; (+22h)
754d 7b        ld      a,e
754e fe01      cp      01h
7550 fa6f75    jp      m,756fh
7553 fe03      cp      03h
7555 f26f75    jp      p,756fh
7558 3d        dec     a
7559 07        rlca    
755a 5f        ld      e,a
755b 21f17f    ld      hl,7ff1h
755e 19        add     hl,de
755f 5e        ld      e,(hl)
7560 23        inc     hl
7561 56        ld      d,(hl)
7562 7a        ld      a,d
7563 b3        or      e
7564 2809      jr      z,756fh          ; (+09h)
7566 13        inc     de
7567 13        inc     de
7568 eb        ex      de,hl
7569 5e        ld      e,(hl)
756a 23        inc     hl
756b 56        ld      d,(hl)
756c c38773    jp      7387h
756f 110000    ld      de,0000h
7572 c38773    jp      7387h
7575 03        inc     bc
7576 03        inc     bc
7577 03        inc     bc
7578 03        inc     bc
7579 03        inc     bc
757a 69        ld      l,c
757b 60        ld      h,b
757c 03        inc     bc
757d 56        ld      d,(hl)
757e 2b        dec     hl
757f 5e        ld      e,(hl)
7580 2b        dec     hl
7581 d5        push    de
7582 56        ld      d,(hl)
7583 2b        dec     hl
7584 5e        ld      e,(hl)
7585 2b        dec     hl
7586 d5        push    de
7587 56        ld      d,(hl)
7588 2b        dec     hl
7589 5e        ld      e,(hl)
758a c38773    jp      7387h
758d cd2577    call    7725h		; fpopa
7590 d1        pop     de
7591 21257d    ld      hl,7d25h
7594 c5        push    bc
7595 010600    ld      bc,0006h
7598 edb0      ldir    
759a c1        pop     bc
759b cd4377    call    7743h		; fpusha
759e c3a172    jp      72a1h		; exprna
75a1 e1        pop     hl
75a2 7d        ld      a,l
75a3 b4        or      h
75a4 ca8373    jp      z,7383h
75a7 3e80      ld      a,80h
75a9 ad        xor     l
75aa 6f        ld      l,a
75ab c38373    jp      7383h
75ae e1        pop     hl
75af 3e7f      ld      a,7fh
75b1 a5        and     l
75b2 6f        ld      l,a
75b3 c38373    jp      7383h
75b6 e1        pop     hl
75b7 e1        pop     hl
75b8 e1        pop     hl
75b9 c3a172    jp      72a1h		; exprna
75bc e1        pop     hl
75bd c5        push    bc
75be cd757a    call    7a75h		; itof
75c1 c1        pop     bc
75c2 18d7      jr      759bh            ; (-29h)
75c4 3e80      ld      a,80h
75c6 322b7d    ld      (7d2bh),a
75c9 cd2577    call    7725h		; fpopa
75cc c5        push    bc
75cd cda77a    call    7aa7h		; ftoi
75d0 c1        pop     bc
75d1 c38373    jp      7383h
75d4 cd2577    call    7725h		; fpopa
75d7 cde77a    call    7ae7h		; intf
75da c39b75    jp      759bh
75dd cd2577    call    7725h		; fpopa
75e0 cd4377    call    7743h		; fpusha
75e3 cde77a    call    7ae7h		; intf
75e6 cd4377    call    7743h		; fpusha
75e9 cd1a77    call    771ah
75ec c5        push    bc
75ed cd6478    call    7864h		; subf
75f0 c1        pop     bc
75f1 18a8      jr      759bh            ; (-58h)
75f3 cd1a77    call    771ah
75f6 c5        push    bc
75f7 cd5277    call    7752h		; addf
75fa c1        pop     bc
75fb 189e      jr      759bh            ; (-62h)
75fd cd1a77    call    771ah
7600 c5        push    bc
7601 cd6478    call    7864h		; subf
7604 c1        pop     bc
7605 1894      jr      759bh            ; (-6ch)
7607 cd1a77    call    771ah
760a c5        push    bc
760b cd8978    call    7889h		; mulf
760e c1        pop     bc
760f 188a      jr      759bh            ; (-76h)
7611 cd1a77    call    771ah
7614 c5        push    bc
7615 cd0879    call    7908h		; divf
7618 c1        pop     bc
7619 c39b75    jp      759bh
761c cd2577    call    7725h		; fpopa
761f 3a6b7d    ld      a,(7d6bh)
7622 f680      or      80h
7624 326b7d    ld      (7d6bh),a
7627 21257d    ld      hl,7d25h
762a c9        ret     

762b cd3477    call    7734h		; fpopr
762e 3e06      ld      a,06h
7630 180e      jr      7640h            ; (+0eh)
7632 3e01      ld      a,01h
7634 180a      jr      7640h            ; (+0ah)
7636 3e02      ld      a,02h
7638 1806      jr      7640h            ; (+06h)
763a 3e04      ld      a,04h
763c 1802      jr      7640h            ; (+02h)
763e 3e05      ld      a,05h
7640 32537d    ld      (7d53h),a
7643 cd2577    call    7725h		; fpopa
7646 3e3c      ld      a,3ch
7648 cd907b    call    7b90h
764b c39b75    jp      759bh
764e af        xor     a
764f 1806      jr      7657h            ; (+06h)
7651 3e01      ld      a,01h
7653 1802      jr      7657h            ; (+02h)
7655 3e02      ld      a,02h
7657 32537d    ld      (7d53h),a
765a cd2577    call    7725h		; fpopa
765d 3e3b      ld      a,3bh
765f 18e7      jr      7648h            ; (-19h)
7661 0a        ld      a,(bc)
7662 03        inc     bc
7663 07        rlca    
7664 1600      ld      d,00h
7666 5f        ld      e,a
7667 217f76    ld      hl,767fh
766a 19        add     hl,de
766b 5e        ld      e,(hl)
766c 23        inc     hl
766d 56        ld      d,(hl)
766e eb        ex      de,hl
766f 7c        ld      a,h
7670 a7        and     a
7671 fa7576    jp      m,7675h
7674 e9        jp      (hl)
7675 e67f      and     7fh
7677 67        ld      h,a
7678 5e        ld      e,(hl)
7679 23        inc     hl
767a 56        ld      d,(hl)
767b eb        ex      de,hl
767c c38373    jp      7383h
767f 75        ld      (hl),l
7680 fdbb      cp      e
7682 76        halt    
7683 c3764b    jp      4b76h
7686 ff        rst     38h
7687 79        ld      a,c
7688 fd7b      ld      a,e
768a fdef      rst     28h
768c fdcb76f1  ld      c,set 6,(iy+76h)
7690 fdf5      push    af
7692 fdf9      ld      sp,iy
7694 fdf7      rst     30h
7696 fdf3      di      
7698 fdfb      ei      
769a fdeca2d5  call    pe,0d5a2h
769e 76        halt    
769f fdfd00    nop     
76a2 ff        rst     38h
76a3 0f        rrca    
76a4 ff        rst     38h
76a5 11ffe5    ld      de,0e5ffh
76a8 76        halt    
76a9 fb        ei      
76aa 76        halt    
76ab 0a        ld      a,(bc)
76ac ff        rst     38h
76ad ff        rst     38h
76ae fddd76    halt    
76b1 edff      db      0edh, 0ffh       ; Undocumented 8 T-State NOP
76b3 0677      ld      b,77h
76b5 0e77      ld      c,77h
76b7 14        inc     d
76b8 77        ld      (hl),a
76b9 0d        dec     c
76ba ff        rst     38h
76bb c5        push    bc
76bc cd4f00    call    004fh
76bf c1        pop     bc
76c0 c38373    jp      7383h
76c3 c5        push    bc
76c4 cd5200    call    0052h
76c7 c1        pop     bc
76c8 c38373    jp      7383h
76cb 2af222    ld      hl,(22f2h)
76ce 54        ld      d,h
76cf 5d        ld      e,l
76d0 19        add     hl,de
76d1 19        add     hl,de
76d2 c38373    jp      7383h
76d5 2aeb22    ld      hl,(22ebh)
76d8 2600      ld      h,00h
76da c38373    jp      7383h
76dd 2ae622    ld      hl,(22e6h)
76e0 2600      ld      h,00h
76e2 c38373    jp      7383h
76e5 3af622    ld      a,(22f6h)
76e8 e603      and     03h
76ea 5f        ld      e,a
76eb 1600      ld      d,00h
76ed 21f776    ld      hl,76f7h
76f0 19        add     hl,de
76f1 5e        ld      e,(hl)
76f2 1b        dec     de
76f3 eb        ex      de,hl
76f4 c38373    jp      7383h
76f7 03        inc     bc
76f8 010002    ld      bc,0200h
76fb c5        push    bc
76fc 210c7c    ld      hl,7c0ch
76ff cdf254    call    54f2h		; f.filel
7702 c1        pop     bc
7703 c38373    jp      7383h
7706 c5        push    bc
7707 cda056    call    56a0h		; d.clock
770a c1        pop     bc
770b c38373    jp      7383h
770e 21187f    ld      hl,7f18h
7711 c37d75    jp      757dh
7714 211e7f    ld      hl,7f1eh
7717 c37d75    jp      757dh
771a e1        pop     hl
771b 22257d    ld      (7d25h),hl
771e cd3477    call    7734h		; fpopr
7721 2a257d    ld      hl,(7d25h)
7724 e5        push    hl

; fpopa
7725 d1        pop     de
7726 e1        pop     hl
7727 22257d    ld      (7d25h),hl
772a e1        pop     hl
772b 22277d    ld      (7d27h),hl
772e e1        pop     hl
772f 22297d    ld      (7d29h),hl
7732 eb        ex      de,hl
7733 e9        jp      (hl)

; fpopr
7734 d1        pop     de
7735 e1        pop     hl
7736 222c7d    ld      (7d2ch),hl
7739 e1        pop     hl
773a 222e7d    ld      (7d2eh),hl
773d e1        pop     hl
773e 22307d    ld      (7d30h),hl
7741 eb        ex      de,hl
7742 e9        jp      (hl)

; fpusha
7743 d1        pop     de
7744 2a297d    ld      hl,(7d29h)
7747 e5        push    hl
7748 2a277d    ld      hl,(7d27h)
774b e5        push    hl
774c 2a257d    ld      hl,(7d25h)
774f e5        push    hl
7750 eb        ex      de,hl
7751 e9        jp      (hl)

; addf
7752 21257d    ld      hl,7d25h
7755 7e        ld      a,(hl)
7756 e680      and     80h
7758 32387d    ld      (7d38h),a
775b 7e        ld      a,(hl)
775c e67f      and     7fh
775e 77        ld      (hl),a
775f 212c7d    ld      hl,7d2ch
7762 7e        ld      a,(hl)
7763 e680      and     80h
7765 32397d    ld      (7d39h),a
7768 7e        ld      a,(hl)
7769 e67f      and     7fh
776b 77        ld      (hl),a
776c af        xor     a
776d 322b7d    ld      (7d2bh),a
7770 32327d    ld      (7d32h),a
7773 23        inc     hl
7774 3a267d    ld      a,(7d26h)
7777 96        sub     (hl)
7778 4f        ld      c,a
7779 2b        dec     hl
777a 3a257d    ld      a,(7d25h)
777d 9e        sbc     a,(hl)
777e 47        ld      b,a
777f fa8977    jp      m,7789h
7782 202c      jr      nz,77b0h         ; (+2ch)
7784 212e7d    ld      hl,7d2eh
7787 1811      jr      779ah            ; (+11h)
7789 feff      cp      0ffh
778b 2023      jr      nz,77b0h         ; (+23h)
778d 79        ld      a,c
778e 2f        cpl     
778f 3c        inc     a
7790 4f        ld      c,a
7791 2a2c7d    ld      hl,(7d2ch)
7794 22257d    ld      (7d25h),hl
7797 21277d    ld      hl,7d27h
779a 79        ld      a,c
779b a7        and     a
779c 282b      jr      z,77c9h          ; (+2bh)
779e e5        push    hl
779f a7        and     a
77a0 cd4d7a    call    7a4dh		; shr1
77a3 e1        pop     hl
77a4 0d        dec     c
77a5 20f7      jr      nz,779eh         ; (-09h)
77a7 7e        ld      a,(hl)
77a8 23        inc     hl
77a9 b6        or      (hl)
77aa 23        inc     hl
77ab b6        or      (hl)
77ac 23        inc     hl
77ad b6        or      (hl)
77ae 2019      jr      nz,77c9h         ; (+19h)
77b0 78        ld      a,b
77b1 a7        and     a
77b2 f25a7a    jp      p,7a5ah
77b5 212c7d    ld      hl,7d2ch
77b8 11257d    ld      de,7d25h
77bb 010600    ld      bc,0006h
77be edb0      ldir    
77c0 3a397d    ld      a,(7d39h)
77c3 32387d    ld      (7d38h),a
77c6 c35a7a    jp      7a5ah
77c9 3a387d    ld      a,(7d38h)
77cc 21397d    ld      hl,7d39h
77cf be        cp      (hl)
77d0 2859      jr      z,782bh          ; (+59h)
77d2 21327d    ld      hl,7d32h
77d5 112b7d    ld      de,7d2bh
77d8 1a        ld      a,(de)
77d9 96        sub     (hl)
77da 12        ld      (de),a
77db 47        ld      b,a
77dc 1b        dec     de
77dd 2b        dec     hl
77de 1a        ld      a,(de)
77df 9e        sbc     a,(hl)
77e0 12        ld      (de),a
77e1 4f        ld      c,a
77e2 c5        push    bc
77e3 1b        dec     de
77e4 2b        dec     hl
77e5 1a        ld      a,(de)
77e6 9e        sbc     a,(hl)
77e7 12        ld      (de),a
77e8 47        ld      b,a
77e9 1b        dec     de
77ea 2b        dec     hl
77eb 1a        ld      a,(de)
77ec 9e        sbc     a,(hl)
77ed 12        ld      (de),a
77ee 4f        ld      c,a
77ef 1b        dec     de
77f0 2b        dec     hl
77f1 1a        ld      a,(de)
77f2 9e        sbc     a,(hl)
77f3 12        ld      (de),a
77f4 d1        pop     de
77f5 302a      jr      nc,7821h         ; (+2ah)
77f7 21387d    ld      hl,7d38h
77fa 3e80      ld      a,80h
77fc ae        xor     (hl)
77fd 77        ld      (hl),a
77fe 212b7d    ld      hl,7d2bh
7801 7e        ld      a,(hl)
7802 2f        cpl     
7803 c601      add     a,01h
7805 77        ld      (hl),a
7806 2b        dec     hl
7807 7e        ld      a,(hl)
7808 2f        cpl     
7809 ce00      adc     a,00h
780b 77        ld      (hl),a
780c 2b        dec     hl
780d 7e        ld      a,(hl)
780e 2f        cpl     
780f ce00      adc     a,00h
7811 77        ld      (hl),a
7812 2b        dec     hl
7813 7e        ld      a,(hl)
7814 2f        cpl     
7815 ce00      adc     a,00h
7817 77        ld      (hl),a
7818 2b        dec     hl
7819 7e        ld      a,(hl)
781a 2f        cpl     
781b ce00      adc     a,00h
781d 77        ld      (hl),a
781e c3f179    jp      79f1h		; normf
7821 b0        or      b
7822 b1        or      c
7823 b2        or      d
7824 b3        or      e
7825 c2f179    jp      nz,79f1h		; normf
7828 c3637a    jp      7a63h		; zerof
782b 212b7d    ld      hl,7d2bh
782e 11327d    ld      de,7d32h
7831 1a        ld      a,(de)
7832 86        add     a,(hl)
7833 77        ld      (hl),a
7834 2b        dec     hl
7835 1b        dec     de
7836 1a        ld      a,(de)
7837 8e        adc     a,(hl)
7838 77        ld      (hl),a
7839 2b        dec     hl
783a 1b        dec     de
783b 1a        ld      a,(de)
783c 8e        adc     a,(hl)
783d 77        ld      (hl),a
783e 2b        dec     hl
783f 1b        dec     de
7840 1a        ld      a,(de)
7841 8e        adc     a,(hl)
7842 77        ld      (hl),a
7843 2b        dec     hl
7844 1b        dec     de
7845 1a        ld      a,(de)
7846 8e        adc     a,(hl)
7847 77        ld      (hl),a
7848 d2137a    jp      nc,7a13h
784b cd4d7a    call    7a4dh		; shr1
784e 3a267d    ld      a,(7d26h)
7851 c601      add     a,01h
7853 32267d    ld      (7d26h),a
7856 3a257d    ld      a,(7d25h)
7859 ce00      adc     a,00h
785b 32257d    ld      (7d25h),a
785e f2137a    jp      p,7a13h
7861 c3687a    jp      7a68h

; subf
7864 3a2c7d    ld      a,(7d2ch)
7867 ee80      xor     80h
7869 322c7d    ld      (7d2ch),a
786c c35277    jp      7752h		; addf
786f 21257d    ld      hl,7d25h
7872 7e        ld      a,(hl)
7873 e680      and     80h
7875 47        ld      b,a
7876 7e        ld      a,(hl)
7877 e67f      and     7fh
7879 77        ld      (hl),a
787a 212c7d    ld      hl,7d2ch
787d 7e        ld      a,(hl)
787e e680      and     80h
7880 a8        xor     b
7881 32387d    ld      (7d38h),a
7884 7e        ld      a,(hl)
7885 e67f      and     7fh
7887 77        ld      (hl),a
7888 c9        ret     


; mulf
7889 2a257d    ld      hl,(7d25h)
788c 7c        ld      a,h
788d b5        or      l
788e ca637a    jp      z,7a63h		; zerof
7891 2a2c7d    ld      hl,(7d2ch)
7894 7c        ld      a,h
7895 b5        or      l
7896 ca637a    jp      z,7a63h		; zerof
7899 cd6f78    call    786fh
789c 21267d    ld      hl,7d26h
789f 3a2d7d    ld      a,(7d2dh)
78a2 86        add     a,(hl)
78a3 77        ld      (hl),a
78a4 47        ld      b,a
78a5 2b        dec     hl
78a6 3a2c7d    ld      a,(7d2ch)
78a9 8e        adc     a,(hl)
78aa 4f        ld      c,a
78ab b0        or      b
78ac ca637a    jp      z,7a63h		; zerof
78af 79        ld      a,c
78b0 d640      sub     40h
78b2 fa687a    jp      m,7a68h
78b5 da637a    jp      c,7a63h		; zerof
78b8 77        ld      (hl),a
78b9 0600      ld      b,00h
78bb 48        ld      c,b
78bc 50        ld      d,b
78bd 58        ld      e,b
78be 2620      ld      h,20h
78c0 e5        push    hl
78c1 212e7d    ld      hl,7d2eh
78c4 a7        and     a
78c5 cd507a    call    7a50h
78c8 3014      jr      nc,78deh         ; (+14h)
78ca 3a2a7d    ld      a,(7d2ah)
78cd 83        add     a,e
78ce 5f        ld      e,a
78cf 3a297d    ld      a,(7d29h)
78d2 8a        adc     a,d
78d3 57        ld      d,a
78d4 3a287d    ld      a,(7d28h)
78d7 89        adc     a,c
78d8 4f        ld      c,a
78d9 3a277d    ld      a,(7d27h)
78dc 88        adc     a,b
78dd 47        ld      b,a
78de 78        ld      a,b
78df 1f        rra     
78e0 47        ld      b,a
78e1 79        ld      a,c
78e2 1f        rra     
78e3 4f        ld      c,a
78e4 7a        ld      a,d
78e5 1f        rra     
78e6 57        ld      d,a
78e7 7b        ld      a,e
78e8 1f        rra     
78e9 5f        ld      e,a
78ea e1        pop     hl
78eb 25        dec     h
78ec 20d2      jr      nz,78c0h         ; (-2eh)
78ee 1f        rra     
78ef e680      and     80h
78f1 322b7d    ld      (7d2bh),a
78f4 68        ld      l,b
78f5 61        ld      h,c
78f6 22277d    ld      (7d27h),hl
78f9 7d        ld      a,l
78fa b4        or      h
78fb 6a        ld      l,d
78fc 63        ld      h,e
78fd 22297d    ld      (7d29h),hl
7900 b5        or      l
7901 b4        or      h
7902 c2f179    jp      nz,79f1h		; normf
7905 c3637a    jp      7a63h		; zerof

; divf
7908 cd6f78    call    786fh
790b 2a257d    ld      hl,(7d25h)
790e eb        ex      de,hl
790f 2a2c7d    ld      hl,(7d2ch)
7912 7a        ld      a,d
7913 94        sub     h
7914 53        ld      d,e
7915 5f        ld      e,a
7916 7a        ld      a,d
7917 9d        sbc     a,l
7918 57        ld      d,a
7919 210140    ld      hl,4001h
791c fa2879    jp      m,7928h
791f 19        add     hl,de
7920 7c        ld      a,h
7921 b7        or      a
7922 f22f79    jp      p,792fh
7925 c3687a    jp      7a68h
7928 19        add     hl,de
7929 d2637a    jp      nc,7a63h		; zerof
792c 7c        ld      a,h
792d e67f      and     7fh
792f 65        ld      h,l
7930 6f        ld      l,a
7931 22257d    ld      (7d25h),hl
7934 21317d    ld      hl,7d31h
7937 112a7d    ld      de,7d2ah
793a 1a        ld      a,(de)
793b 96        sub     (hl)
793c 2b        dec     hl
793d 1b        dec     de
793e 1a        ld      a,(de)
793f 9e        sbc     a,(hl)
7940 2b        dec     hl
7941 1b        dec     de
7942 1a        ld      a,(de)
7943 9e        sbc     a,(hl)
7944 2b        dec     hl
7945 1b        dec     de
7946 1a        ld      a,(de)
7947 9e        sbc     a,(hl)
7948 3013      jr      nc,795dh         ; (+13h)
794a af        xor     a
794b cd4d7a    call    7a4dh		; shr1
794e 21267d    ld      hl,7d26h
7951 7e        ld      a,(hl)
7952 d601      sub     01h
7954 77        ld      (hl),a
7955 2b        dec     hl
7956 7e        ld      a,(hl)
7957 de00      sbc     a,00h
7959 fa637a    jp      m,7a63h		; zerof
795c 77        ld      (hl),a
795d 2a307d    ld      hl,(7d30h)
7960 22317d    ld      (7d31h),hl
7963 7d        ld      a,l
7964 b4        or      h
7965 2a2e7d    ld      hl,(7d2eh)
7968 222f7d    ld      (7d2fh),hl
796b b5        or      l
796c b4        or      h
796d ca687a    jp      z,7a68h
7970 2a297d    ld      hl,(7d29h)
7973 22367d    ld      (7d36h),hl
7976 7d        ld      a,l
7977 b4        or      h
7978 2a277d    ld      hl,(7d27h)
797b 22347d    ld      (7d34h),hl
797e b5        or      l
797f b4        or      h
7980 ca637a    jp      z,7a63h		; zerof
7983 af        xor     a
7984 322e7d    ld      (7d2eh),a
7987 32337d    ld      (7d33h),a
798a 3e21      ld      a,21h
798c f5        push    af
798d 21327d    ld      hl,7d32h
7990 3a377d    ld      a,(7d37h)
7993 96        sub     (hl)
7994 5f        ld      e,a
7995 2b        dec     hl
7996 3a367d    ld      a,(7d36h)
7999 9e        sbc     a,(hl)
799a 57        ld      d,a
799b 2b        dec     hl
799c 3a357d    ld      a,(7d35h)
799f 9e        sbc     a,(hl)
79a0 4f        ld      c,a
79a1 2b        dec     hl
79a2 3a347d    ld      a,(7d34h)
79a5 9e        sbc     a,(hl)
79a6 47        ld      b,a
79a7 2b        dec     hl
79a8 3a337d    ld      a,(7d33h)
79ab 9e        sbc     a,(hl)
79ac 380c      jr      c,79bah          ; (+0ch)
79ae 21337d    ld      hl,7d33h
79b1 77        ld      (hl),a
79b2 23        inc     hl
79b3 70        ld      (hl),b
79b4 23        inc     hl
79b5 71        ld      (hl),c
79b6 23        inc     hl
79b7 72        ld      (hl),d
79b8 23        inc     hl
79b9 73        ld      (hl),e
79ba 3f        ccf     
79bb 212b7d    ld      hl,7d2bh
79be cd437a    call    7a43h		; shl1
79c1 21377d    ld      hl,7d37h
79c4 a7        and     a
79c5 cd437a    call    7a43h		; shl1
79c8 f1        pop     af
79c9 3d        dec     a
79ca 20c0      jr      nz,798ch         ; (-40h)
79cc 3a277d    ld      a,(7d27h)
79cf 1f        rra     
79d0 3a287d    ld      a,(7d28h)
79d3 1f        rra     
79d4 32277d    ld      (7d27h),a
79d7 3a297d    ld      a,(7d29h)
79da 1f        rra     
79db 32287d    ld      (7d28h),a
79de 3a2a7d    ld      a,(7d2ah)
79e1 1f        rra     
79e2 32297d    ld      (7d29h),a
79e5 3a2b7d    ld      a,(7d2bh)
79e8 1f        rra     
79e9 322a7d    ld      (7d2ah),a
79ec d25a7a    jp      nc,7a5ah
79ef 1829      jr      7a1ah            ; (+29h)

; normf
79f1 3a277d    ld      a,(7d27h)
79f4 a7        and     a
79f5 fa137a    jp      m,7a13h
79f8 212b7d    ld      hl,7d2bh
79fb cd437a    call    7a43h		; shl1
79fe 3a267d    ld      a,(7d26h)
7a01 d601      sub     01h
7a03 32267d    ld      (7d26h),a
7a06 3a257d    ld      a,(7d25h)
7a09 de00      sbc     a,00h
7a0b 32257d    ld      (7d25h),a
7a0e f2f179    jp      p,79f1h		; normf
7a11 1850      jr      7a63h            ; (+50h) ; zerof
7a13 3a2b7d    ld      a,(7d2bh)
7a16 b7        or      a
7a17 f25a7a    jp      p,7a5ah
7a1a 212a7d    ld      hl,7d2ah
7a1d 0604      ld      b,04h
7a1f 3e01      ld      a,01h
7a21 8e        adc     a,(hl)
7a22 77        ld      (hl),a
7a23 3e00      ld      a,00h
7a25 2b        dec     hl
7a26 10f9      djnz    7a21h            ; (-07h)
7a28 3030      jr      nc,7a5ah         ; (+30h)
7a2a 23        inc     hl
7a2b cd507a    call    7a50h
7a2e 3a267d    ld      a,(7d26h)
7a31 c601      add     a,01h
7a33 32267d    ld      (7d26h),a
7a36 3a257d    ld      a,(7d25h)
7a39 ce00      adc     a,00h
7a3b 32257d    ld      (7d25h),a
7a3e f25a7a    jp      p,7a5ah
7a41 1825      jr      7a68h            ; (+25h)

; shl1
7a43 c5        push    bc
7a44 0605      ld      b,05h
7a46 cb16      rl      (hl)
7a48 2b        dec     hl
7a49 10fb      djnz    7a46h            ; (-05h)
7a4b c1        pop     bc
7a4c c9        ret     

; shr1
7a4d cb1e      rr      (hl)
7a4f 23        inc     hl
7a50 c5        push    bc
7a51 0604      ld      b,04h
7a53 cb1e      rr      (hl)
7a55 23        inc     hl
7a56 10fb      djnz    7a53h            ; (-05h)
7a58 c1        pop     bc
7a59 c9        ret     

7a5a 21257d    ld      hl,7d25h
7a5d 3a387d    ld      a,(7d38h)
7a60 b6        or      (hl)
7a61 77        ld      (hl),a
7a62 c9        ret     


; zerof
7a63 210000    ld      hl,0000h
7a66 1803      jr      7a6bh            ; (+03h)
7a68 21ffff    ld      hl,0ffffh
7a6b 22257d    ld      (7d25h),hl
7a6e 22277d    ld      (7d27h),hl
7a71 22297d    ld      (7d29h),hl
7a74 c9        ret     


; itof
7a75 1600      ld      d,00h
7a77 7c        ld      a,h
7a78 b5        or      l
7a79 2828      jr      z,7aa3h          ; (+28h)
7a7b 7c        ld      a,h
7a7c a7        and     a
7a7d f2857a    jp      p,7a85h
7a80 cdf95d    call    5df9h		; comphl
7a83 1680      ld      d,80h
7a85 7a        ld      a,d
7a86 32387d    ld      (7d38h),a
7a89 af        xor     a
7a8a 322b7d    ld      (7d2bh),a
7a8d 7c        ld      a,h
7a8e 65        ld      h,l
7a8f 6f        ld      l,a
7a90 22277d    ld      (7d27h),hl
7a93 210000    ld      hl,0000h
7a96 22297d    ld      (7d29h),hl
7a99 214010    ld      hl,1040h
7a9c 22257d    ld      (7d25h),hl
7a9f cdf179    call    79f1h		; normf
7aa2 c9        ret     

7aa3 cd637a    call    7a63h		; zerof
7aa6 c9        ret     


; ftoi
7aa7 2a257d    ld      hl,(7d25h)
7aaa eb        ex      de,hl
7aab 2a277d    ld      hl,(7d27h)
7aae 7c        ld      a,h
7aaf 65        ld      h,l
7ab0 6f        ld      l,a
7ab1 3e40      ld      a,40h
7ab3 a3        and     e
7ab4 2824      jr      z,7adah          ; (+24h)
7ab6 3e3f      ld      a,3fh
7ab8 a3        and     e
7ab9 2023      jr      nz,7adeh         ; (+23h)
7abb 7a        ld      a,d
7abc e6f0      and     0f0h
7abe 201e      jr      nz,7adeh         ; (+1eh)
7ac0 3e10      ld      a,10h
7ac2 92        sub     d
7ac3 57        ld      d,a
7ac4 af        xor     a
7ac5 7c        ld      a,h
7ac6 1f        rra     
7ac7 67        ld      h,a
7ac8 7d        ld      a,l
7ac9 1f        rra     
7aca 6f        ld      l,a
7acb 15        dec     d
7acc 20f6      jr      nz,7ac4h         ; (-0ah)
7ace 3011      jr      nc,7ae1h         ; (+11h)
7ad0 3a2b7d    ld      a,(7d2bh)
7ad3 a7        and     a
7ad4 f2e17a    jp      p,7ae1h
7ad7 23        inc     hl
7ad8 1807      jr      7ae1h            ; (+07h)
7ada 210000    ld      hl,0000h
7add c9        ret     

7ade 21ff7f    ld      hl,7fffh
7ae1 7b        ld      a,e
7ae2 a7        and     a
7ae3 fcf95d    call    m,5df9h		; comphl
7ae6 c9        ret     

; intf
7ae7 2a257d    ld      hl,(7d25h)
7aea 3e40      ld      a,40h
7aec a5        and     l
7aed ca637a    jp      z,7a63h		; zerof
7af0 3e3f      ld      a,3fh
7af2 a5        and     l
7af3 c0        ret     nz

7af4 7c        ld      a,h
7af5 a7        and     a
7af6 f8        ret     m

7af7 ca637a    jp      z,7a63h		; zerof
7afa 3e20      ld      a,20h
7afc 94        sub     h
7afd f8        ret     m

7afe c8        ret     z

7aff 5f        ld      e,a
7b00 16fe      ld      d,0feh
7b02 212a7d    ld      hl,7d2ah
7b05 7a        ld      a,d
7b06 a6        and     (hl)
7b07 77        ld      (hl),a
7b08 7a        ld      a,d
7b09 07        rlca    
7b0a 57        ld      d,a
7b0b 3801      jr      c,7b0eh          ; (+01h)
7b0d 2b        dec     hl
7b0e 1d        dec     e
7b0f 20f4      jr      nz,7b05h         ; (-0ch)
7b11 c9        ret     

7b12 326d7d    ld      (7d6dh),a
7b15 d1        pop     de
7b16 e1        pop     hl
7b17 a7        and     a
7b18 ed52      sbc     hl,de
7b1a e22b7b    jp      po,7b2bh
7b1d 116d7d    ld      de,7d6dh
7b20 1a        ld      a,(de)
7b21 fe01      cp      01h
7b23 2806      jr      z,7b2bh          ; (+06h)
7b25 fe06      cp      06h
7b27 2802      jr      z,7b2bh          ; (+02h)
7b29 2f        cpl     
7b2a 12        ld      (de),a
7b2b 7c        ld      a,h
7b2c b7        or      a
7b2d fa3b7b    jp      m,7b3bh
7b30 b5        or      l
7b31 2004      jr      nz,7b37h         ; (+04h)
7b33 1601      ld      d,01h
7b35 1806      jr      7b3dh            ; (+06h)
7b37 1602      ld      d,02h
7b39 1802      jr      7b3dh            ; (+02h)
7b3b 1604      ld      d,04h
7b3d 21ffff    ld      hl,0ffffh
7b40 3a6d7d    ld      a,(7d6dh)
7b43 a2        and     d
7b44 2003      jr      nz,7b49h         ; (+03h)
7b46 210000    ld      hl,0000h
7b49 c38373    jp      7383h
7b4c 326d7d    ld      (7d6dh),a
7b4f cd1a77    call    771ah
7b52 c5        push    bc
7b53 cd867b    call    7b86h
7b56 2003      jr      nz,7b5bh         ; (+03h)
7b58 210040    ld      hl,4000h
7b5b 11e6ff    ld      de,0ffe6h
7b5e 19        add     hl,de
7b5f 226e7d    ld      (7d6eh),hl
7b62 cd6478    call    7864h		; subf
7b65 c1        pop     bc
7b66 cd867b    call    7b86h
7b69 28c8      jr      z,7b33h          ; (-38h)
7b6b e5        push    hl
7b6c 1119c0    ld      de,0c019h
7b6f 19        add     hl,de
7b70 e1        pop     hl
7b71 30c0      jr      nc,7b33h         ; (-40h)
7b73 cdf95d    call    5df9h		; comphl
7b76 eb        ex      de,hl
7b77 2a6e7d    ld      hl,(7d6eh)
7b7a 19        add     hl,de
7b7b 38b6      jr      c,7b33h          ; (-4ah)
7b7d 3a257d    ld      a,(7d25h)
7b80 e680      and     80h
7b82 28b3      jr      z,7b37h          ; (-4dh)
7b84 18b5      jr      7b3bh            ; (-4bh)
7b86 2a257d    ld      hl,(7d25h)
7b89 7d        ld      a,l
7b8a 6c        ld      l,h
7b8b e67f      and     7fh
7b8d 67        ld      h,a
7b8e b5        or      l
7b8f c9        ret     

7b90 f5        push    af
7b91 2a967d    ld      hl,(7d96h)
7b94 cdf95d    call    5df9h		; comphl
7b97 f1        pop     af
7b98 eb        ex      de,hl
7b99 2a677d    ld      hl,(7d67h)
7b9c 19        add     hl,de
7b9d 226c7d    ld      (7d6ch),hl
7ba0 60        ld      h,b
7ba1 69        ld      l,c
7ba2 19        add     hl,de
7ba3 f5        push    af
7ba4 22717d    ld      (7d71h),hl
7ba7 c5        push    bc
7ba8 cda865    call    65a8h		; execv
7bab c1        pop     bc
7bac 2a967d    ld      hl,(7d96h)
7baf eb        ex      de,hl
7bb0 2a6c7d    ld      hl,(7d6ch)
7bb3 19        add     hl,de
7bb4 22677d    ld      (7d67h),hl
7bb7 f1        pop     af
7bb8 d0        ret     nc

7bb9 2a717d    ld      hl,(7d71h)
7bbc 19        add     hl,de
7bbd 44        ld      b,h
7bbe 4d        ld      c,l
7bbf c9        ret     

7bc0 00        nop

; ilwa     
7bc1 00        nop     
